(()=>{"use strict";var e={2607:(e,t,n)=>{n.r(t),n.d(t,{default:()=>o});const o={}},4454:(e,t,n)=>{var o=n(603),l=n(6665),r=n(6520),a=n(1959),i=n(467),d=n(296),s=n(3929),c=n(6283),u=n(6773),f=n(5648),g=n(3668),h=n(558),b=n(5991),p=n(397),m=(0,l.createContext)({currentUser:null,setCurrentUser:function(){},resetPassword:function(){},logout:function(){}}),y=function(e){var t=e.children,n=(0,l.useState)((function(){var e=localStorage.getItem("currentUser");return e?JSON.parse(e):null})),o=(0,d.default)(n,2),r=o[0],a=o[1];(0,l.useEffect)((function(){r?localStorage.setItem("currentUser",JSON.stringify(r)):localStorage.removeItem("currentUser")}),[r]);var s=function(){var e=(0,i.default)((function*(e,t){if(!e||!t)throw new Error("Username and new password are required");return new Promise((function(e){setTimeout((function(){e({success:!0,message:"Password reset successful"})}),1e3)}))}));return function(t,n){return e.apply(this,arguments)}}();return(0,p.jsx)(m.Provider,{value:{currentUser:r,setCurrentUser:a,resetPassword:s,logout:function(){a(null)}},children:t})},x=n(4467);function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){(0,x.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v={NODE_ENV:"production",PUBLIC_URL:"",APP_MANIFEST:{name:"LoanSiya Web App",slug:"loansiya-webapp",version:"1.0.0",orientation:"portrait",icon:"./assets/icon.png",userInterfaceStyle:"light",newArchEnabled:!0,splash:{image:"./assets/splash-icon.png",resizeMode:"contain",backgroundColor:"#ffffff"},web:{},sdkVersion:"48.0.0",platforms:["ios","android","web"]},EXPO_DEBUG:!1,PLATFORM:"web",WDS_SOCKET_PATH:"/_expo/ws"}.REACT_APP_API_URL||"http://localhost:5600",C={login:function(){var e=(0,i.default)((function*(e,t){try{var n=yield fetch(v+"/officers/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t})});if(!n.ok){var o=yield n.json();throw new Error(o.message||"Login failed")}var l=yield n.json();if(!l.success)throw new Error(l.message||"Login failed");return{user:{username:l.officer.username,fullName:l.officer.fullName,role:l.officer.role,status:l.officer.status}}}catch(o){throw console.error("Login Error:",o),o}}));return function(t,n){return e.apply(this,arguments)}}()},S={getAllUsers:function(){var e=(0,i.default)((function*(){try{var e=yield fetch(v+"/users");if(!e.ok)throw new Error("Failed to fetch users");return e.json()}catch(t){throw console.error("API Error:",t),t}}));return function(){return e.apply(this,arguments)}}(),updateUserStatus:function(){var e=(0,i.default)((function*(e,t){try{var n=yield fetch(v+"/users/"+e+"/status",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:t})});if(!n.ok)throw new Error("Failed to update user status");return n.json()}catch(o){throw console.error("API Error:",o),o}}));return function(t,n){return e.apply(this,arguments)}}(),addUser:function(){var e=(0,i.default)((function*(e){try{var t=yield fetch(v+"/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){var n=yield t.json();throw new Error(n.error||"Failed to add user")}return t.json()}catch(n){throw console.error("API Error:",n),n}}));return function(t){return e.apply(this,arguments)}}(),updateUser:function(){var e=(0,i.default)((function*(e,t){try{var n=yield fetch(v+"/users/"+e,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok){var o=yield n.json();throw new Error(o.error||"Failed to update user")}return n.json()}catch(o){throw console.error("API Error:",o),o}}));return function(t,n){return e.apply(this,arguments)}}()},T={"Valid Id":"validid",ORCR:"orcr","Land Title":"landtitle","Deeds of Assignment":"deed","Promissory Note":"promissory-note"},B={APPLICATION_DOCS:["Valid Id","ORCR","Land Title","Deeds of Assignment"],SIGNED_DOCS:["Promissory Note","Signed Agreement"]},D={getAllClients:function(){var e=(0,i.default)((function*(){try{console.log("Fetching clients from:",v);var e=yield fetch(v+"/clients");if(!e.ok)throw new Error("Failed to fetch clients");return e.json()}catch(t){throw console.error("API Error:",t),t}}));return function(){return e.apply(this,arguments)}}(),getClientById:function(){var e=(0,i.default)((function*(e){try{var t=yield fetch(v+"/client/"+e);if(!t.ok)throw new Error("Failed to fetch client");return t.json()}catch(n){throw console.error("API Error:",n),n}}));return function(t){return e.apply(this,arguments)}}(),getClientScore:function(){var e=(0,i.default)((function*(e){try{var t=yield fetch(v+"/score/"+e,{method:"POST"});if(!t.ok)throw new Error("Failed to fetch client score");return t.json()}catch(n){throw console.error("API Error:",n),n}}));return function(t){return e.apply(this,arguments)}}(),processMetrics:function(){var e=(0,i.default)((function*(e){try{var t=yield fetch(v+"/metrics/"+e,{method:"POST"});if(!t.ok)throw new Error("Failed to process metrics");return t.json()}catch(n){throw console.error("API Error:",n),n}}));return function(t){return e.apply(this,arguments)}}(),processLoanDecision:function(){var e=(0,i.default)((function*(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{var o=yield fetch(v+"/loan/"+e+"/decision",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(j({decision:t},n))});if(!o.ok)throw new Error("Failed to process loan decision");return o.json()}catch(l){throw console.error("API Error:",l),l}}));return function(t,n){return e.apply(this,arguments)}}(),fetchClientLoanData:function(){var e=(0,i.default)((function*(e){try{var t=yield fetch(v+"/client-loan-data/"+e);if(!t.ok)throw new Error("Failed to fetch loan data");return t.json()}catch(n){throw console.error("API Error:",n),n}}));return function(t){return e.apply(this,arguments)}}(),updateLoanAmount:function(){var e=(0,i.default)((function*(e,t){try{var n=yield fetch(v+"/loan/"+e+"/amount",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:t})});if(!n.ok)throw new Error("Failed to update loan amount");return n.json()}catch(o){throw console.error("API Error:",o),o}}));return function(t,n){return e.apply(this,arguments)}}(),notifications:{getNotifications:function(){var e=(0,i.default)((function*(){try{var e=yield fetch(v+"/notifications");if(!e.ok)throw new Error("Failed to fetch notifications");return e.json()}catch(t){throw console.error("API Error:",t),t}}));return function(){return e.apply(this,arguments)}}(),createNotification:function(){var e=(0,i.default)((function*(e){try{var t=yield fetch(v+"/notifications",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to create notification");return t.json()}catch(n){throw console.error("API Error:",n),n}}));return function(t){return e.apply(this,arguments)}}(),markAsRead:function(){var e=(0,i.default)((function*(e){try{var t=yield fetch(v+"/notifications/mark-read",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({notificationIds:e})});if(!t.ok)throw new Error("Failed to mark notifications as read");return t.json()}catch(n){throw console.error("API Error:",n),n}}));return function(t){return e.apply(this,arguments)}}()},viewDocumentByFilename:function(){var e=(0,i.default)((function*(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;try{var o=e.toString().padStart(3,"0");console.log("Fetching document file:",t,"for CID:",o,"date:",n);var l=v+"/documents/"+o+"/file/"+encodeURIComponent(t);n&&(l+="?date="+encodeURIComponent(n));var r=yield fetch(l);if(!r.ok){var a=yield r.json();throw new Error(a.error||"Failed to fetch document")}var i=r.headers.get("content-type"),d=yield r.blob();return{url:URL.createObjectURL(new Blob([d],{type:i})),type:i}}catch(s){throw console.error("API Error:",s),s}}));return function(t,n){return e.apply(this,arguments)}}(),viewDocument:function(){var e=(0,i.default)((function*(e,t){try{var n=e.toString().padStart(3,"0"),o=T[t];if(!o)throw new Error("Invalid document type: "+t);var l=encodeURIComponent(o);console.log("Fetching document:",t,"as",o,"for CID:",n);var r=yield fetch(v+"/documents/"+n+"/"+l);if(!r.ok){var a=yield r.json();throw new Error(a.error||"Failed to fetch document")}var i=r.headers.get("content-type"),d=yield r.blob();return{url:URL.createObjectURL(new Blob([d],{type:i})),type:i}}catch(s){throw console.error("API Error:",s),s}}));return function(t,n){return e.apply(this,arguments)}}(),getLatestDocuments:function(){var e=(0,i.default)((function*(e){try{var t=e.toString().padStart(3,"0");console.log("Getting documents for padded CID:",t);var n=yield fetch(v+"/documents/"+t+"/all");if(!n.ok){var o=yield n.json();throw new Error(o.error||"Failed to fetch documents")}return(yield n.json()).documents}catch(l){throw console.error("API Error:",l),l}}));return function(t){return e.apply(this,arguments)}}(),getDocumentDates:function(){var e=(0,i.default)((function*(e){try{var t=e.toString().padStart(3,"0");console.log("Getting document dates for padded CID:",t);var n=yield fetch(v+"/documents/"+t+"/dates");if(!n.ok){var o=yield n.json();throw new Error(o.error||"Failed to fetch document dates")}return(yield n.json()).dates}catch(l){throw console.error("API Error:",l),l}}));return function(t){return e.apply(this,arguments)}}(),getDocumentsByDate:function(){var e=(0,i.default)((function*(e,t){try{var n=e.toString().padStart(3,"0");console.log("Getting documents for padded CID:",n,"date:",t);var o=yield fetch(v+"/documents/"+n+"/date/"+t);if(!o.ok){var l=yield o.json();throw new Error(l.error||"Failed to fetch documents")}return(yield o.json()).documents}catch(r){throw console.error("API Error:",r),r}}));return function(t,n){return e.apply(this,arguments)}}()};function M(e){var t=e.navigation,n=(0,l.useContext)(m),o=n.setCurrentUser,r=n.currentUser;(0,l.useEffect)((function(){r&&("IT_ADMIN"===r.role?t.navigate("Dashboard"):"OPS_MANAGER"===r.role?t.navigate("OpsDashboard"):"LOAN_OFFICER"===r.role&&t.navigate("LoanOfficerDashboard"))}),[r,t]);var a=(0,h.default)().width<768,g=(0,l.useState)(""),b=(0,d.default)(g,2),y=b[0],x=b[1],w=(0,l.useState)(""),j=(0,d.default)(w,2),v=j[0],S=j[1],T=(0,l.useState)(!1),B=(0,d.default)(T,2),D=B[0],M=B[1],O=function(){var e=(0,i.default)((function*(){try{M(!0);var e=yield C.login(y,v);e.user&&(o(e.user),"IT_ADMIN"===e.user.role?t.navigate("Dashboard"):"OPS_MANAGER"===e.user.role?t.navigate("OpsDashboard"):"LOAN_OFFICER"===e.user.role&&t.navigate("LoanOfficerDashboard"))}catch(n){alert(n.message||"Login failed. Please check your credentials.")}finally{M(!1)}}));return function(){return e.apply(this,arguments)}}();return(0,p.jsx)(s.default,{style:P.container,children:(0,p.jsxs)(s.default,{style:[P.card,a&&P.cardMobile],children:[(0,p.jsx)(c.default,{style:P.title,children:"LoanSiya Log-in Portal"}),(0,p.jsx)(c.default,{style:P.label,children:"Username"}),(0,p.jsx)(u.default,{style:P.input,onChangeText:x,value:y}),(0,p.jsx)(c.default,{style:P.label,children:"Password"}),(0,p.jsx)(u.default,{style:P.input,secureTextEntry:!0,onChangeText:S,value:v}),(0,p.jsx)(f.default,{style:[P.loginBtn,D&&P.loginBtnDisabled],onPress:O,disabled:D,children:(0,p.jsx)(c.default,{style:P.loginText,children:D?"Logging in...":"Login"})}),(0,p.jsx)(f.default,{onPress:function(){return t.navigate("ForgotPassword")},children:(0,p.jsx)(c.default,{style:P.forgotText,children:"Forgot Password?"})})]})})}var P=g.default.create({container:{flex:1,backgroundColor:"#f6f6f6",justifyContent:"center",alignItems:"center",padding:b.default.select({web:40,default:20})},card:{backgroundColor:"#fff",padding:b.default.select({web:40,default:24}),borderRadius:12,width:"100%",maxWidth:400,elevation:5,shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.1,shadowRadius:4},cardMobile:{padding:20,width:"95%"},title:{fontSize:b.default.select({web:24,default:20}),fontWeight:"700",textAlign:"center",marginBottom:b.default.select({web:30,default:20}),color:"#333"},label:{fontSize:b.default.select({web:16,default:14}),marginBottom:8,color:"#333",fontWeight:"500"},input:{backgroundColor:"#e1e1e1",padding:b.default.select({web:14,default:12}),borderRadius:8,marginBottom:20,fontSize:b.default.select({web:16,default:14}),borderWidth:1,borderColor:"#ccc"},loginBtn:{backgroundColor:"#007bff",paddingVertical:b.default.select({web:14,default:12}),borderRadius:8,marginTop:10,alignItems:"center",width:"100%"},loginBtnDisabled:{backgroundColor:"#ccc",opacity:.7},errorText:{color:"red",textAlign:"center",marginBottom:10},loginBtnDisabled:{backgroundColor:"#ccc",opacity:.7},loginText:{color:"#fff",fontWeight:"600",fontSize:b.default.select({web:16,default:14})},forgotText:{textAlign:"center",marginTop:16,color:"#007bff",textDecorationLine:"underline",fontSize:b.default.select({web:14,default:12})}});function O(e){var t=e.navigation,n=(0,l.useState)(1),o=(0,d.default)(n,2),r=o[0],a=o[1],i=(0,l.useState)(""),g=(0,d.default)(i,2),h=g[0],b=g[1],m=(0,l.useState)(""),y=(0,d.default)(m,2),x=y[0],w=y[1],j=(0,l.useState)(""),v=(0,d.default)(j,2),C=v[0],S=v[1],T=(0,l.useState)(""),B=(0,d.default)(T,2),D=B[0],M=B[1],P=(0,l.useState)(!1),O=(0,d.default)(P,2),k=(O[0],O[1]),z=[{username:"admin",role:"IT_ADMIN"},{username:"officer1",role:"OFFICER"}],L=function(){var e=z.find((function(e){return e.username===h}));e?(k("IT_ADMIN"===e.role),"IT_ADMIN"===e.role?a(2):a(4)):alert("Username not found!")},R=function(){C===D?C.length<6?alert("Password must be at least 6 characters long!"):a(3):alert("Passwords do not match!")};return(0,p.jsx)(s.default,{style:A.container,children:(0,p.jsxs)(s.default,{style:A.card,children:[1===r&&(0,p.jsxs)(s.default,{children:[(0,p.jsx)(c.default,{style:A.title,children:"Forgot Password"}),(0,p.jsx)(c.default,{style:A.subtitle,children:"Enter your username (ex. officer1)"}),(0,p.jsx)(c.default,{style:A.label,children:"Enter Username:"}),(0,p.jsx)(u.default,{style:A.input,value:h,onChangeText:b,placeholder:"Username"}),(0,p.jsx)(f.default,{style:A.submitBtn,onPress:L,children:(0,p.jsx)(c.default,{style:A.submitText,children:"Submit"})})]}),2===r&&(0,p.jsxs)(s.default,{children:[(0,p.jsx)(c.default,{style:A.title,children:"Hello Admin!"}),(0,p.jsx)(c.default,{style:A.label,children:"Email:"}),(0,p.jsx)(u.default,{style:A.input,value:x,onChangeText:w,placeholder:"Enter your email",keyboardType:"email-address"}),(0,p.jsx)(c.default,{style:A.label,children:"New Password:"}),(0,p.jsx)(u.default,{style:A.input,value:C,onChangeText:S,secureTextEntry:!0,placeholder:"Enter new password"}),(0,p.jsx)(c.default,{style:A.label,children:"Confirm Password:"}),(0,p.jsx)(u.default,{style:A.input,value:D,onChangeText:M,secureTextEntry:!0,placeholder:"Confirm new password"}),(0,p.jsx)(f.default,{style:A.submitBtn,onPress:R,children:(0,p.jsx)(c.default,{style:A.submitText,children:"Submit"})})]}),3===r&&(0,p.jsxs)(s.default,{children:[(0,p.jsx)(c.default,{style:A.title,children:"Hello Admin!"}),(0,p.jsx)(c.default,{style:A.message,children:"Please check your email, we have sent you a confirmation."}),(0,p.jsx)(f.default,{style:A.submitBtn,onPress:function(){return t.navigate("Login")},children:(0,p.jsx)(c.default,{style:A.submitText,children:"Back to Login"})})]}),4===r&&(0,p.jsxs)(s.default,{children:[(0,p.jsx)(c.default,{style:A.title,children:"Hello!"}),(0,p.jsx)(c.default,{style:A.message,children:"Please contact the IT Admin for password assistance!"}),(0,p.jsx)(f.default,{style:A.submitBtn,onPress:function(){return t.navigate("Login")},children:(0,p.jsx)(c.default,{style:A.submitText,children:"Back to Login"})})]})]})})}var A=g.default.create({container:{flex:1,backgroundColor:"#f6f6f6",justifyContent:"center",alignItems:"center"},card:{backgroundColor:"#fff",padding:30,borderRadius:10,width:"90%",maxWidth:400,elevation:5},title:{fontSize:22,fontWeight:"700",textAlign:"center",marginBottom:15},subtitle:{fontSize:16,textAlign:"center",marginBottom:20,color:"#666"},label:{fontSize:14,marginBottom:6,color:"#333"},input:{backgroundColor:"#e1e1e1",padding:12,borderRadius:8,marginBottom:16},submitBtn:{backgroundColor:"#007bff",paddingVertical:12,borderRadius:6,marginTop:10,alignItems:"center"},submitText:{color:"#fff",fontWeight:"600"},message:{textAlign:"center",fontSize:16,marginVertical:20,color:"#666"}}),k=(0,l.createContext)({users:[],loading:!1,addUser:function(e){},updateUser:function(e){},refreshUsers:function(){}}),z=function(e){var t=e.children,n=(0,l.useState)([]),o=(0,d.default)(n,2),r=o[0],a=o[1],s=(0,l.useState)(!1),c=(0,d.default)(s,2),u=c[0],f=c[1],g=function(){var e=(0,i.default)((function*(){try{f(!0);var e=yield S.getAllUsers();a(e)}catch(t){console.error("Error fetching users:",t)}finally{f(!1)}}));return function(){return e.apply(this,arguments)}}();(0,l.useEffect)((function(){g()}),[]);var h=function(){var e=(0,i.default)((function*(e){try{if(!e.username||!e.fullName||!e.role||!e.password)throw new Error("Username, full name, role, and password are required");f(!0);var t=yield S.addUser(e);return yield g(),t.user}catch(n){throw console.error("Error adding user:",n),n}finally{f(!1)}}));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=(0,i.default)((function*(e){try{if(!e.id&&!e.username)throw new Error("User ID or username is required for updating");var t=e.username||e.id;if(f(!0),2===Object.keys(e).length&&e.status)yield S.updateUserStatus(t,e.status);else{var n={};e.fullName&&(n.fullName=e.fullName),e.role&&(n.role=e.role),e.status&&(n.status=e.status),e.password&&(n.password=e.password),yield S.updateUser(t,n)}yield g()}catch(o){throw console.error("Error updating user:",o),o}finally{f(!1)}}));return function(t){return e.apply(this,arguments)}}();return(0,p.jsx)(k.Provider,{value:{users:r,loading:u,addUser:h,updateUser:b,refreshUsers:g},children:t})};function L(e){var t=e.navigation,n=e.role,o=e.showNotifications,r=e.unreadCount,a=(0,l.useContext)(m).logout,i=(0,h.default)().width<768;return(0,p.jsxs)(s.default,{style:R.topbar,children:[(0,p.jsxs)(s.default,{style:[R.leftSection,i&&R.leftSectionMobile],children:[(0,p.jsxs)(c.default,{style:[R.brand,i&&R.brandMobile],children:[(0,p.jsx)(c.default,{style:{color:"#0066ff"},children:"Loan"}),"Siya"]}),!i&&(0,p.jsx)(c.default,{style:R.title,children:"Dashboard"})]}),(0,p.jsxs)(s.default,{style:[R.rightSection,i&&R.rightSectionMobile],children:[(0,p.jsx)(c.default,{style:[R.role,i&&R.roleMobile],children:n}),o&&(0,p.jsxs)(f.default,{style:R.notificationContainer,onPress:function(){return t.navigate("LoanOfficerNotifications")},children:[(0,p.jsx)(c.default,{style:[R.icon,i&&R.iconMobile],children:"\ud83d\udd14"}),r>0&&(0,p.jsx)(s.default,{style:R.badge,children:(0,p.jsx)(c.default,{style:R.badgeText,children:r})})]}),(0,p.jsx)(f.default,{onPress:function(){a(),t.replace("Login")},style:[R.logoutButton,i&&R.logoutButtonMobile],children:(0,p.jsx)(c.default,{style:[R.logout,i&&R.logoutMobile],children:"Logout"})})]})]})}var R=g.default.create({topbar:{flexDirection:"row",justifyContent:"space-between",paddingHorizontal:b.default.select({web:"5%",default:16}),paddingVertical:b.default.select({web:15,default:12}),backgroundColor:"#ddd",alignItems:"center",width:"100%"},leftSection:{flexDirection:"row",alignItems:"center",gap:20},leftSectionMobile:{gap:10},rightSection:{flexDirection:"row",alignItems:"center",gap:15},rightSectionMobile:{gap:8},brand:{fontSize:b.default.select({web:22,default:18}),fontWeight:"bold"},brandMobile:{fontSize:16},title:{fontSize:b.default.select({web:20,default:16}),fontWeight:"500"},role:{fontSize:16},roleMobile:{fontSize:12},logoutButton:{padding:b.default.select({web:8,default:12}),backgroundColor:"#f0f0f0",borderRadius:6,minWidth:b.default.select({web:80,default:70})},logoutButtonMobile:{padding:10,minWidth:60},logout:{fontWeight:"bold",color:"#000",textAlign:"center"},logoutMobile:{fontSize:14},notificationContainer:{position:"relative",padding:b.default.select({web:8,default:12})},icon:{fontSize:b.default.select({web:18,default:20})},iconMobile:{fontSize:16},badge:{position:"absolute",top:0,right:0,backgroundColor:"#e74c3c",borderRadius:10,minWidth:20,height:20,justifyContent:"center",alignItems:"center",padding:2},badgeText:{color:"white",fontSize:12,fontWeight:"bold"}});function I(e){var t=e.label,n=e.value,o=e.onPress;return(0,p.jsxs)(s.default,{style:W.card,children:[(0,p.jsx)(c.default,{style:W.label,children:t}),(0,p.jsx)(c.default,{style:W.number,children:n}),o&&(0,p.jsx)(f.default,{style:W.button,onPress:o,children:(0,p.jsx)(c.default,{style:W.buttonText,children:"View List"})})]})}var W=g.default.create({card:{backgroundColor:"#e2e2e2",paddingVertical:b.default.select({web:30,default:20}),paddingHorizontal:b.default.select({web:25,default:15}),borderRadius:12,width:b.default.select({web:200,default:"45%"}),minWidth:b.default.select({web:180,default:150}),alignItems:"center",elevation:3,shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.1,shadowRadius:4},label:{fontSize:b.default.select({web:16,default:14}),textAlign:"center",marginBottom:b.default.select({web:8,default:6}),color:"#333",fontWeight:"500"},number:{fontSize:b.default.select({web:28,default:24}),fontWeight:"bold",color:"#111",marginBottom:b.default.select({web:14,default:10})},button:{backgroundColor:"#0066ff",paddingVertical:b.default.select({web:10,default:8}),paddingHorizontal:b.default.select({web:30,default:20}),borderRadius:8,width:"90%"},buttonText:{color:"#fff",fontWeight:"bold",fontSize:b.default.select({web:16,default:14}),textAlign:"center"}});function E(e){var t=e.navigation,n=(0,l.useContext)(k).users,o=(0,h.default)().width<768,r=n.filter((function(e){return("LOAN_OFFICER"===e.roleType||"Loan Officer"===e.role)&&"Active"===e.status})).length,a=n.filter((function(e){return("OPS_MANAGER"===e.roleType||"OPS_MANAGER"===e.role)&&"Active"===e.status})).length;return(0,p.jsxs)(s.default,{style:N.container,children:[(0,p.jsx)(L,{navigation:t,role:"IT Admin",showNotifications:!1}),(0,p.jsxs)(s.default,{style:N.content,children:[(0,p.jsxs)(s.default,{style:[N.cardRow,o&&N.cardRowMobile],children:[(0,p.jsx)(I,{label:"Total Active Loan Officers",value:r}),(0,p.jsx)(I,{label:"Total Active Operations Manager",value:a})]}),(0,p.jsx)(f.default,{style:[N.viewListButton,o&&N.viewListButtonMobile],onPress:function(){return t.navigate("UserManagement")},children:(0,p.jsx)(c.default,{style:[N.buttonText,o&&N.buttonTextMobile],children:"View List"})})]})]})}var N=g.default.create({container:{flex:1,backgroundColor:"#f6f6f6"},content:{flex:1,padding:20,alignItems:"center",justifyContent:"center"},cardRow:{flexDirection:"row",gap:20,marginBottom:20,flexWrap:"wrap",justifyContent:"center"},cardRowMobile:{flexDirection:"column",gap:15,alignItems:"center"},viewListButton:{backgroundColor:"#0066ff",paddingVertical:12,paddingHorizontal:40,borderRadius:8,marginTop:20,minWidth:200},viewListButtonMobile:{paddingVertical:14,paddingHorizontal:30,marginTop:25,width:"80%",maxWidth:300},buttonText:{color:"#fff",fontWeight:"600",fontSize:16,textAlign:"center"},buttonTextMobile:{fontSize:15}}),H=n(5458);function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){(0,x.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var U=(0,l.createContext)();function _(e){var t=e.children,n=(0,l.useState)([]),o=(0,d.default)(n,2),r=o[0],a=o[1],s=(0,l.useState)([]),c=(0,d.default)(s,2),u=c[0],f=c[1],g=(0,l.useState)(0),h=(0,d.default)(g,2),b=h[0],m=h[1],y=(0,l.useState)(!0),x=(0,d.default)(y,2),w=x[0],j=x[1],v=(0,l.useState)(null),C=(0,d.default)(v,2),S=C[0],T=C[1];(0,l.useEffect)((function(){B()}),[]),(0,l.useEffect)((function(){P();var e=setInterval((function(){P()}),3e4);return function(){return clearInterval(e)}}),[]);var B=function(){var e=(0,i.default)((function*(){try{j(!0),T(null);var e=yield D.getAllClients();a(e)}catch(t){T("Failed to fetch clients: "+t.message)}finally{j(!1)}}));return function(){return e.apply(this,arguments)}}(),M=function(){var e=(0,i.default)((function*(e){try{var t=yield D.getClientById(e);return a((function(n){return n.map((function(n){return n.cid===e?t:n}))})),t}catch(n){throw T("Failed to refresh client: "+n.message),n}}));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=(0,i.default)((function*(){try{var e=yield D.notifications.getNotifications();f(e),m(e.filter((function(e){return!e.read})).length)}catch(t){console.error("Failed to fetch notifications:",t)}}));return function(){return e.apply(this,arguments)}}(),O=function(){var e=(0,i.default)((function*(e){try{yield D.notifications.createNotification(F({timestamp:(new Date).toISOString(),read:!1},e)),yield P()}catch(t){console.error("Failed to create notification:",t)}}));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=(0,i.default)((function*(){try{var e=u.filter((function(e){return!e.read})).map((function(e){return e.id}));e.length>0&&(yield D.notifications.markAsRead(e),yield P())}catch(t){console.error("Failed to mark notifications as read:",t)}}));return function(){return e.apply(this,arguments)}}(),k=function(){var e=(0,i.default)((function*(e,t){try{var n=r.find((function(t){return t.cid===e}));if(!n)throw new Error("Loan not found for CID: "+e);return a((function(n){return n.map((function(n){return n.cid===e?F(F({},n),t):n}))})),"Approved"!==t.status&&"Declined"!==t.status||(yield O({cid:e,clientName:n.name,type:"status_change",status:t.status,message:"Loan request for client "+n.name+" has been "+t.status.toLowerCase()+" by Operations Manager",recipientRole:"loan_officer"})),yield M(e)}catch(o){throw console.error("Failed to update loan:",o),o}}));return function(t,n){return e.apply(this,arguments)}}(),z=function(){var e=(0,i.default)((function*(e,t){try{var n=r.find((function(t){return t.cid===e}));if(!n)throw new Error("Client not found");return yield D.updateLoanAmount(e,t),a((function(n){return n.map((function(n){if(n.cid===e){var o=(0,H.default)(n.loans.loanHistory),l=o.findIndex((function(e,t,n){return new Date(e.dateApplied).getTime()===Math.max.apply(Math,(0,H.default)(n.map((function(e){return new Date(e.dateApplied).getTime()}))))}));return-1!==l&&(o[l]=F(F({},o[l]),{},{amount:t,decidedAt:(new Date).toISOString()})),F(F({},n),{},{loans:F(F({},n.loans),{},{loanHistory:o})})}return n}))})),yield O({cid:e,clientName:n.name,type:"amount_change",amount:t,message:"Loan amount for client "+n.name+" has been updated to \u20b1"+t.toLocaleString()+" by Operations Manager",recipientRole:"loan_officer"}),yield M(e)}catch(o){throw console.error("Failed to update loan amount:",o),o}}));return function(t,n){return e.apply(this,arguments)}}();return(0,p.jsx)(U.Provider,{value:{loans:r,loading:w,error:S,updateLoan:k,updateLoanAmount:z,refreshClientData:M,notifications:u,unreadCount:b,markNotificationsAsRead:A,clearNotifications:function(){f([]),m(0)},fetchNotifications:P},children:t})}function G(){var e=(0,l.useContext)(U);if(!e)throw new Error("useLoan must be used within a LoanProvider");return e}function J(e){var t=e.navigation,n=G().loans,o=(0,h.default)().width<768,l=n.length,r=n.filter((function(e){return"Pending"===e.status||!e.status})).length;return(0,p.jsxs)(s.default,{style:q.container,children:[(0,p.jsx)(L,{navigation:t,role:"Operations Manager",showNotifications:!1}),(0,p.jsx)(s.default,{style:[q.content,o&&q.contentMobile],children:(0,p.jsxs)(s.default,{style:[q.cardRow,o&&q.cardRowMobile],children:[(0,p.jsx)(I,{label:"Total Loan Clients",value:l,onPress:function(){return t.navigate("OpsClientList")}}),(0,p.jsx)(I,{label:"Total Loan Pending",value:r,onPress:function(){return t.navigate("OpsPendingList")}})]})})]})}var q=g.default.create({container:{flex:1,backgroundColor:"#f6f6f6"},content:{flex:1,padding:b.default.select({web:40,default:20}),alignItems:"center",justifyContent:"center"},contentMobile:{padding:16},cardRow:{flexDirection:"row",gap:b.default.select({web:30,default:15}),flexWrap:"wrap",justifyContent:"center",maxWidth:1200,width:"100%"},cardRowMobile:{gap:12,paddingHorizontal:10}});function K(e){var t=e.navigation,n=G(),o=n.loans,l=n.unreadCount,r=(0,h.default)().width<768,a=o.length;o.filter((function(e){return"Pending"===e.status||!e.status})).length;return(0,p.jsxs)(s.default,{style:Y.container,children:[(0,p.jsx)(L,{navigation:t,role:"Loan Officer",showNotifications:!0,unreadCount:l}),(0,p.jsx)(s.default,{style:[Y.content,r&&Y.contentMobile],children:(0,p.jsxs)(s.default,{style:[Y.cardRow,r&&Y.cardRowMobile],children:[(0,p.jsx)(I,{label:"Total Loan Client",value:a,onPress:function(){return t.navigate("ClientList")}}),(0,p.jsx)(I,{label:"Total Loan List",value:a,onPress:function(){return t.navigate("TotalLoanList")}})]})})]})}var Y=g.default.create({container:{flex:1,backgroundColor:"#f6f6f6"},content:{flex:1,padding:b.default.select({web:40,default:20}),alignItems:"center",justifyContent:"center"},contentMobile:{padding:16},cardRow:{flexDirection:"row",gap:b.default.select({web:30,default:15}),flexWrap:"wrap",justifyContent:"center",maxWidth:1200,width:"100%"},cardRowMobile:{gap:12,paddingHorizontal:10}}),Q=n(1218),X=n(530),Z={container:{flexGrow:1,width:"100%",backgroundColor:"#f6f6f6",padding:b.default.select({web:24,default:16})},containerDesktop:{minHeight:"100vh",justifyContent:"center",paddingVertical:40},content:{flexDirection:"row",padding:b.default.select({web:20,default:16}),width:"100%",maxWidth:1400,alignSelf:"center"},contentMobile:{flexDirection:"column"},section:{flex:1,padding:b.default.select({web:20,default:16}),backgroundColor:"#fff",marginHorizontal:b.default.select({web:10,default:8}),marginVertical:b.default.select({web:0,default:8}),borderRadius:8,shadowColor:"#000",shadowOffset:{width:0,height:1},shadowOpacity:.1,shadowRadius:2,elevation:2},sectionMobile:{padding:12,marginBottom:20,marginHorizontal:0},centerContent:{justifyContent:"center",alignItems:"center"},loadingText:{marginTop:10,fontSize:b.default.select({web:16,default:14}),color:"#666"},errorText:{color:"#dc3545",fontSize:b.default.select({web:16,default:14}),marginBottom:15,textAlign:"center"},title:{fontSize:b.default.select({web:22,default:20}),fontWeight:"bold",color:"#333"},titleMobile:{fontSize:18},button:{primaryButton:{backgroundColor:"#007bff",paddingVertical:b.default.select({web:10,default:8}),paddingHorizontal:b.default.select({web:16,default:12}),borderRadius:8,alignItems:"center",justifyContent:"center"},secondaryButton:{backgroundColor:"#e9ecef",paddingVertical:b.default.select({web:10,default:8}),paddingHorizontal:b.default.select({web:16,default:12}),borderRadius:8,alignItems:"center",justifyContent:"center"},buttonText:{color:"#fff",fontSize:b.default.select({web:16,default:14}),fontWeight:"600",textAlign:"center"},buttonTextSecondary:{color:"#333",fontSize:b.default.select({web:16,default:14}),fontWeight:"600",textAlign:"center"}},modal:{overlay:{flex:1,backgroundColor:"rgba(0, 0, 0, 0.5)",justifyContent:"center",alignItems:"center"},content:{backgroundColor:"white",padding:b.default.select({web:24,default:16}),borderRadius:12,width:"80%",maxWidth:500,maxHeight:"80%"},contentMobile:{width:"90%",padding:16},title:{fontSize:b.default.select({web:18,default:16}),fontWeight:"bold",marginBottom:15,textAlign:"center",color:"#333"}},searchBar:{container:{flexDirection:"row",marginBottom:b.default.select({web:16,default:12})},input:{backgroundColor:"#fff",borderRadius:8,padding:b.default.select({web:12,default:10}),flex:1,fontSize:b.default.select({web:16,default:14}),borderWidth:1,borderColor:"#ddd"},inputMobile:{padding:8,fontSize:14}},header:{marginBottom:b.default.select({web:24,default:16})},titleContainer:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:b.default.select({web:20,default:16})}};function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach((function(t){(0,x.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function te(e){var t=e.navigation,n=e.userRole,o=void 0===n?"loanofficer":n,r=e.onClientPress,a=e.dashboardRoute,i=(0,h.default)().width<768,g=(0,l.useState)(""),b=(0,d.default)(g,2),m=b[0],y=b[1],x=G(),w=x.loans,j=x.loading,v=x.error,C=w.filter((function(e){return e.name.toLowerCase().includes(m.toLowerCase())||e.cid.includes(m)})),S=function(e){if(r)r(e);else{var n="ops"===o?"OpsClientProfile":"ClientProfile";t.navigate(n,{client:ee(ee({},e),{},{cid:e.cid,name:e.name||"N/A",age:e.age||0,email:e.email||"N/A",number:e.number||"N/A",address:e.address||"N/A",financial:e.financial||{monthlyIncome:0,monthlyExpenses:0,assets:0,dti:0}})})}};return j?(0,p.jsxs)(s.default,{style:[Z.container,Z.centerContent],children:[(0,p.jsx)(X.default,{size:"large",color:"#0066ff"}),(0,p.jsx)(c.default,{style:Z.loadingText,children:"Loading clients..."})]}):v?(0,p.jsx)(s.default,{style:[Z.container,Z.centerContent],children:(0,p.jsx)(c.default,{style:Z.errorText,children:v})}):(0,p.jsxs)(s.default,{style:Z.container,children:[(0,p.jsxs)(s.default,{style:ne.header,children:[(0,p.jsxs)(s.default,{style:ne.titleContainer,children:[(0,p.jsx)(c.default,{style:[Z.title,i&&Z.titleMobile],children:"Client List"}),(0,p.jsx)(f.default,{style:[ne.dashboardBtn,i&&ne.dashboardBtnMobile],onPress:function(){return t.navigate(a)},children:(0,p.jsx)(c.default,{style:[ne.btnText,i&&ne.btnTextMobile],children:"Go to Dashboard"})})]}),(0,p.jsx)(s.default,{style:[Z.searchBar.container,i&&ne.searchBarMobile],children:(0,p.jsx)(u.default,{style:[Z.searchBar.input,i&&Z.searchBar.inputMobile],placeholder:"Search by name or CID",value:m,onChangeText:y})})]}),!i&&(0,p.jsx)(s.default,{style:ne.tableHeader,children:(0,p.jsxs)(s.default,{style:ne.rowContent,children:[(0,p.jsx)(c.default,{style:[ne.headerCell,ne.cidCell],children:"CID"}),(0,p.jsx)(c.default,{style:[ne.headerCell,ne.nameCell],children:"Full Name"}),(0,p.jsx)(s.default,{style:ne.actionCell,children:(0,p.jsx)(c.default,{style:ne.headerCell})})]})}),(0,p.jsx)(Q.default,{data:C,keyExtractor:function(e){return e.cid},renderItem:function(e){var t=e.item;return(0,p.jsx)(f.default,{style:[ne.row,i&&ne.rowMobile],onPress:function(){return i&&S(t)},children:i?(0,p.jsxs)(s.default,{style:ne.mobileContent,children:[(0,p.jsx)(c.default,{style:ne.mobileName,children:t.name}),(0,p.jsxs)(c.default,{style:ne.mobileCid,children:["CID: ",t.cid]})]}):(0,p.jsxs)(s.default,{style:ne.rowContent,children:[(0,p.jsx)(c.default,{style:[ne.cell,ne.cidCell],children:t.cid}),(0,p.jsx)(c.default,{style:[ne.cell,ne.nameCell],children:t.name}),(0,p.jsx)(s.default,{style:ne.actionCell,children:(0,p.jsx)(f.default,{style:ne.viewBtn,onPress:function(){return S(t)},children:(0,p.jsx)(c.default,{style:ne.viewBtnText,children:"View"})})})]})})},ListEmptyComponent:function(){return(0,p.jsx)(s.default,{style:ne.emptyContainer,children:(0,p.jsx)(c.default,{style:ne.emptyText,children:m?"No clients match your search":"No clients found"})})}})]})}var ne=g.default.create({header:{marginBottom:20},titleContainer:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:b.default.select({web:20,default:16})},dashboardBtn:{backgroundColor:"#0066ff",paddingVertical:b.default.select({web:10,default:8}),paddingHorizontal:b.default.select({web:16,default:12}),borderRadius:8},dashboardBtnMobile:{paddingVertical:8,paddingHorizontal:12},btnText:{color:"#fff",fontWeight:"600",fontSize:b.default.select({web:16,default:14})},btnTextMobile:{fontSize:14},searchBarMobile:{marginBottom:10},tableHeader:{flexDirection:"row",backgroundColor:"#e9ecef",paddingVertical:12,paddingHorizontal:b.default.select({web:16,default:12}),marginBottom:4,borderRadius:8,alignItems:"flex-start"},headerCell:{fontWeight:"bold",fontSize:16,color:"#495057"},row:{flexDirection:"row",backgroundColor:"#fff",paddingVertical:b.default.select({web:12,default:10}),paddingHorizontal:b.default.select({web:16,default:12}),marginBottom:8,borderRadius:8,alignItems:"flex-start",borderWidth:1,borderColor:"#e9ecef"},rowMobile:{padding:12},rowContent:{flexDirection:"row",flex:1,alignItems:"center"},cell:{paddingHorizontal:6,fontSize:b.default.select({web:16,default:14}),color:"#212529"},cidCell:{width:"25%",textAlign:"left"},nameCell:{width:"50%",textAlign:"left"},actionCell:{width:"25%",alignItems:"flex-end"},mobileContent:{flex:1},mobileName:{fontSize:16,fontWeight:"500",marginBottom:4,color:"#212529"},mobileCid:{fontSize:14,color:"#6c757d"},viewBtn:{backgroundColor:"#e9ecef",paddingVertical:8,paddingHorizontal:16,borderRadius:6},viewBtnText:{color:"#495057",fontSize:14,fontWeight:"500"},emptyContainer:{padding:b.default.select({web:20,default:16}),alignItems:"center"},emptyText:{fontSize:b.default.select({web:16,default:14}),color:"#6c757d"}});function oe(e){var t=e.navigation;return(0,p.jsx)(te,{navigation:t,userRole:"loanofficer",dashboardRoute:"LoanOfficerDashboard"})}var le=n(368),re=n(8264),ae=function(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})};function ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function de(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(n),!0).forEach((function(t){(0,x.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var se=function(){var e=(0,i.default)((function*(e){try{var t=yield D.getDocumentDates(e),n=[];for(var o of t){var l=(yield D.getDocumentsByDate(e,o.date)).filter((function(e){return!["pdf","signed-promissory-note"].some((function(t){return e.type.includes(t)||e.name.toLowerCase().includes(t)||e.displayName.toLowerCase().includes(t)}))}));l.length>0&&n.push(de(de({},o),{},{documentCount:l.length}))}return n}catch(r){throw console.error("Error loading document dates:",r),new Error("Failed to load document dates")}}));return function(t){return e.apply(this,arguments)}}(),ce=function(){var e=(0,i.default)((function*(e){try{var t=yield D.getDocumentDates(e),n=[];for(var o of t){var l=(yield D.getDocumentsByDate(e,o.date)).filter((function(e){var t=(e.name||"").toLowerCase(),n=(e.displayName||"").toLowerCase(),o=(e.type||"").toLowerCase().includes("pdf")||t.endsWith(".pdf")||n.endsWith(".pdf"),l=t.includes("signed-promissory-note")||n.includes("signed-promissory note");return o||l}));l.length>0&&n.push(de(de({},o),{},{documentCount:l.length}))}return n}catch(r){throw console.error("Error loading signed document dates:",r),new Error("Failed to load signed document dates")}}));return function(t){return e.apply(this,arguments)}}(),ue=function(){var e=(0,i.default)((function*(e,t){try{return(yield D.getDocumentsByDate(e,t)).filter((function(e){return!["pdf","signed-promissory-note"].some((function(t){return e.type.includes(t)||e.name.toLowerCase().includes(t)||e.displayName.toLowerCase().includes(t)}))}))}catch(n){throw console.error("Error loading documents:",n),new Error("Failed to load application documents")}}));return function(t,n){return e.apply(this,arguments)}}(),fe=function(){var e=(0,i.default)((function*(e,t){try{return(yield D.getDocumentsByDate(e,t)).filter((function(e){var t=(e.name||"").toLowerCase(),n=(e.displayName||"").toLowerCase(),o=(e.type||"").toLowerCase().includes("pdf")||t.endsWith(".pdf")||n.endsWith(".pdf"),l=t.includes("signed-promissory-note")||n.includes("signed-promissory note");return o||l}))}catch(n){throw console.error("Error loading signed documents:",n),new Error("Failed to load signed documents")}}));return function(t,n){return e.apply(this,arguments)}}();function ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function he(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ge(Object(n),!0).forEach((function(t){(0,x.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var be={name:"N/A",age:0,cid:"",email:"N/A",number:"N/A",address:"N/A",documents:{applicationDocs:B.APPLICATION_DOCS,signedDocuments:[]},financial:{monthlyIncome:0,monthlyExpenses:0,assets:0,dti:0},employer:"N/A",position:"N/A"};function pe(e){var t,n,o=e.navigation,r=e.route,a=e.userRole,u=void 0===a?"loanofficer":a,g=(0,h.default)().width<768,b=(0,l.useState)(null),m=(0,d.default)(b,2),y=m[0],x=m[1],w=(0,l.useState)(!0),j=(0,d.default)(w,2),v=j[0],C=j[1],S=(0,l.useState)(null),T=(0,d.default)(S,2),B=T[0],D=T[1],M=(0,l.useState)(!1),P=(0,d.default)(M,2),O=P[0],A=P[1],k=(0,l.useState)([]),z=(0,d.default)(k,2),L=z[0],R=z[1],I=(0,l.useState)(!1),W=(0,d.default)(I,2),E=W[0],N=W[1],H=(0,l.useState)("application"),V=(0,d.default)(H,2),F=V[0],U=V[1],_=G().refreshClientData,J=null==(t=r.params)||null==(n=t.client)?void 0:n.cid;(0,l.useEffect)((function(){J&&q()}),[J]);var q=function(){var e=(0,i.default)((function*(){try{var e,t;C(!0),D(null);var n=yield _(J),o={applicationDocs:(null==(e=n.documents)?void 0:e.applicationDocs)||be.documents.applicationDocs,signedDocuments:(null==(t=n.documents)?void 0:t.signedDocuments)||[]};x(he(he(he({},be),n),{},{documents:o}))}catch(l){console.error("Error loading client:",l),D("Failed to load client data. Please try again.")}finally{C(!1)}}));return function(){return e.apply(this,arguments)}}(),K=function(){var e=(0,i.default)((function*(e){try{N(!0),U(e);var t="application"===e?yield se(J):yield ce(J);R(t),A(!0)}catch(B){alert("Error loading "+e+" document dates. Please try again.")}finally{N(!1)}}));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=(0,i.default)((function*(e){try{A(!1);var t="application"===F?yield ue(y.cid,e):yield fe(y.cid,e);t.length>0?o.navigate("DocumentPreview",{cid:y.cid,title:("application"===F?"Application":"Signed")+" Documents - "+ae(e),documents:t,latestDate:e}):alert("No "+F+" documents found for the selected date")}catch(B){alert("Error loading "+F+" documents. Please try again.")}}));return function(t){return e.apply(this,arguments)}}();return v?(0,p.jsxs)(s.default,{style:[Z.container,Z.centerContent],children:[(0,p.jsx)(X.default,{size:"large",color:"#0066ff"}),(0,p.jsx)(c.default,{style:Z.loadingText,children:"Loading client data..."})]}):B?(0,p.jsxs)(s.default,{style:[Z.container,Z.centerContent],children:[(0,p.jsx)(c.default,{style:Z.errorText,children:B}),(0,p.jsx)(f.default,{style:me.retryBtn,onPress:q,children:(0,p.jsx)(c.default,{style:me.retryText,children:"Retry"})})]}):y?(0,p.jsxs)(le.default,{style:me.scrollView,contentContainerStyle:[Z.container,!g&&Z.containerDesktop],children:[(0,p.jsxs)(s.default,{style:[Z.content,g&&Z.contentMobile],children:[(0,p.jsxs)(s.default,{style:[Z.section,g&&Z.sectionMobile],children:[(0,p.jsx)(c.default,{style:me.sectionTitle,children:"Client Profile"}),(0,p.jsx)(c.default,{style:me.subTitle,children:"Personal Details"}),(0,p.jsxs)(s.default,{style:me.detailsContainer,children:[(0,p.jsxs)(c.default,{children:[(0,p.jsx)(c.default,{style:me.bold,children:"Name:"})," ",y.name]}),(0,p.jsxs)(c.default,{children:[(0,p.jsx)(c.default,{style:me.bold,children:"Age:"})," ",y.age]}),(0,p.jsxs)(c.default,{children:[(0,p.jsx)(c.default,{style:me.bold,children:"CID:"})," ",y.cid]}),(0,p.jsxs)(c.default,{children:[(0,p.jsx)(c.default,{style:me.bold,children:"Email:"})," ",y.email]}),(0,p.jsxs)(c.default,{children:[(0,p.jsx)(c.default,{style:me.bold,children:"Number:"})," ",y.number]}),(0,p.jsxs)(c.default,{children:[(0,p.jsx)(c.default,{style:me.bold,children:"Address:"})," ",y.address]})]}),(0,p.jsx)(c.default,{style:[me.subTitle,{marginTop:16}],children:"Uploaded Documents"}),(0,p.jsxs)(s.default,{style:me.documentCategory,children:[(0,p.jsx)(c.default,{style:me.categoryText,children:"Application Documents"}),(0,p.jsx)(f.default,{style:me.previewBtn,onPress:function(){return K("application")},disabled:E,children:(0,p.jsx)(c.default,{style:me.previewText,children:E?"Loading...":"View"})})]}),(0,p.jsxs)(s.default,{style:me.documentCategory,children:[(0,p.jsx)(c.default,{style:me.categoryText,children:"Signed Documents"}),(0,p.jsx)(f.default,{style:me.previewBtn,onPress:function(){return K("signed")},disabled:E,children:(0,p.jsx)(c.default,{style:me.previewText,children:E?"Loading...":"View"})})]})]}),(0,p.jsxs)(s.default,{style:[Z.section,g&&Z.sectionMobile],children:[(0,p.jsxs)(s.default,{style:me.financialContainer,children:[(0,p.jsx)(c.default,{style:me.sectionTitle,children:"Financial Record"}),(0,p.jsxs)(s.default,{style:me.financialDetails,children:[(0,p.jsxs)(c.default,{style:me.financialItem,children:["Monthly Income \u20b1",y.financial.monthlyIncome.toLocaleString()]}),(0,p.jsxs)(c.default,{style:me.financialItem,children:["Monthly Expenses \u20b1",y.financial.monthlyExpenses.toLocaleString()]}),(0,p.jsxs)(c.default,{style:me.financialItem,children:["Saving and Assets \u20b1",y.financial.assets.toLocaleString()]}),(0,p.jsxs)(c.default,{style:me.financialItem,children:["Debt to Income Ratio ",y.financial.dti,"%"]})]})]}),(0,p.jsxs)(s.default,{style:me.employmentContainer,children:[(0,p.jsx)(c.default,{style:[me.sectionTitle,{marginTop:16}],children:"Employment or Business info"}),(0,p.jsxs)(s.default,{style:me.employmentDetails,children:[(0,p.jsx)(c.default,{style:me.employmentItem,children:y.employer}),(0,p.jsx)(c.default,{style:me.employmentItem,children:y.position})]})]}),(0,p.jsxs)(s.default,{style:me.loanHistoryContainer,children:[(0,p.jsx)(c.default,{style:[me.sectionTitle,{marginTop:16}],children:"Loan History"}),(0,p.jsx)(f.default,{style:me.viewBtn,onPress:function(){return o.navigate("LoanHistory",{clientId:y.cid,userRole:u})},children:(0,p.jsx)(c.default,{style:me.viewBtnText,children:"View History"})})]}),(0,p.jsxs)(s.default,{style:me.actionRow,children:[(0,p.jsx)(f.default,{style:me.backBtn,onPress:function(){return o.goBack()},children:(0,p.jsx)(c.default,{style:me.backBtnText,children:"\u2190 Back to List"})}),(0,p.jsx)(f.default,{style:me.refreshBtn,onPress:q,children:(0,p.jsx)(c.default,{style:me.actionBtnText,children:"\u21bb Refresh"})})]})]})]}),(0,p.jsx)(re.default,{visible:O,transparent:!0,animationType:"fade",onRequestClose:function(){return A(!1)},children:(0,p.jsx)(s.default,{style:Z.modal.overlay,children:(0,p.jsxs)(s.default,{style:[Z.modal.content,g&&Z.modal.contentMobile],children:[(0,p.jsxs)(c.default,{style:Z.modal.title,children:["Select ","application"===F?"Application":"Signed"," Document Date"]}),L.length>0?L.map((function(e,t){return(0,p.jsxs)(f.default,{style:me.dateButton,onPress:function(){return Y(e.date)},children:[(0,p.jsxs)(c.default,{style:me.dateButtonText,children:["\ud83d\udcc5 ",ae(e.date)]}),(0,p.jsxs)(c.default,{style:me.documentCountText,children:["(",e.documentCount," documents)"]})]},t)})):(0,p.jsx)(c.default,{style:me.noDataText,children:"No document dates found"}),(0,p.jsx)(f.default,{style:me.closeButton,onPress:function(){return A(!1)},children:(0,p.jsx)(c.default,{style:me.closeButtonText,children:"Cancel"})})]})})})]}):(0,p.jsxs)(s.default,{style:[Z.container,Z.centerContent],children:[(0,p.jsx)(c.default,{style:Z.errorText,children:"Client not found"}),(0,p.jsx)(f.default,{style:me.backBtn,onPress:function(){return o.goBack()},children:(0,p.jsx)(c.default,{style:me.backBtnText,children:"\u2190 Back to List"})})]})}var me=g.default.create({scrollView:{flex:1},sectionTitle:{fontWeight:"bold",fontSize:b.default.select({web:18,default:16}),marginBottom:10,color:"#333"},subTitle:{fontWeight:"bold",fontSize:b.default.select({web:16,default:14}),marginTop:10,marginBottom:6,color:"#444"},detailsContainer:{backgroundColor:"#fff",padding:b.default.select({web:16,default:12}),borderRadius:8,marginTop:8,gap:8},bold:{fontWeight:"bold"},documentCategory:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",backgroundColor:"#f5f5f5",padding:b.default.select({web:16,default:12}),marginVertical:8,borderRadius:8,borderWidth:1,borderColor:"#e0e0e0"},categoryText:{fontSize:b.default.select({web:15,default:14}),color:"#333",fontWeight:"500"},financialContainer:{marginBottom:16},financialDetails:{backgroundColor:"#f8f9fa",padding:12,borderRadius:8,gap:8},financialItem:{fontSize:b.default.select({web:15,default:14}),color:"#333",paddingVertical:2},employmentContainer:{marginBottom:16},employmentDetails:{backgroundColor:"#f8f9fa",padding:12,borderRadius:8,gap:6,marginTop:8},employmentItem:{fontSize:b.default.select({web:15,default:14}),color:"#333",paddingVertical:2},loanHistoryContainer:{marginBottom:20},viewBtn:he(he({},Z.button.primaryButton),{},{marginTop:8}),viewBtnText:he({},Z.button.buttonText),actionRow:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginTop:20,gap:10,flexWrap:"wrap"},backBtn:he(he({},Z.button.secondaryButton),{},{flex:1,maxWidth:b.default.select({web:"auto",default:"48%"}),alignItems:"center"}),refreshBtn:{backgroundColor:"#28a745",paddingVertical:b.default.select({web:10,default:10}),paddingHorizontal:b.default.select({web:16,default:16}),borderRadius:8,flex:1,maxWidth:b.default.select({web:"auto",default:"48%"}),alignItems:"center"},backBtnText:he({},Z.button.buttonTextSecondary),actionBtnText:he({},Z.button.buttonText),dateButton:{backgroundColor:"#f8f9fa",padding:b.default.select({web:15,default:12}),borderRadius:8,marginBottom:8,borderWidth:1,borderColor:"#e9ecef",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},dateButtonText:{fontSize:b.default.select({web:16,default:14}),color:"#333",fontWeight:"500"},documentCountText:{fontSize:b.default.select({web:14,default:12}),color:"#666",fontStyle:"italic"},noDataText:{textAlign:"center",color:"#666",fontSize:16,marginVertical:20},previewBtn:{backgroundColor:"#0066ff",paddingVertical:b.default.select({web:8,default:6}),paddingHorizontal:b.default.select({web:16,default:12}),borderRadius:6},previewText:{color:"#fff",fontSize:b.default.select({web:14,default:12}),fontWeight:"500"},closeButton:{backgroundColor:"#dc3545",padding:b.default.select({web:12,default:10}),borderRadius:8,marginTop:15},closeButtonText:{textAlign:"center",fontWeight:"bold",color:"white",fontSize:b.default.select({web:16,default:14})},retryBtn:{backgroundColor:"#0066ff",paddingVertical:8,paddingHorizontal:20,borderRadius:6},retryText:{color:"#fff",fontWeight:"bold"}});function ye(e){var t=e.navigation,n=e.route;return(0,p.jsx)(pe,{navigation:t,route:n,userRole:"loanofficer"})}var xe=n(2996),we=["Pending","Approved","Declined"];function je(e){var t=e.navigation,n=(e.route,(0,l.useState)("")),o=(0,d.default)(n,2),r=o[0],a=o[1],g=(0,l.useState)("Pending"),b=(0,d.default)(g,2),m=b[0],y=b[1],x=(0,l.useState)(!1),w=(0,d.default)(x,2),j=w[0],v=w[1],C=G(),S=C.loans,T=C.refreshClientData,B=C.notifications,D=function(){var e=(0,i.default)((function*(){v(!0);try{yield Promise.all(S.map((function(e){return T(e.cid)})))}catch(e){console.error("Error refreshing loans:",e)}finally{v(!1)}}));return function(){return e.apply(this,arguments)}}();(0,l.useEffect)((function(){return t.addListener("focus",D)}),[t,S]),(0,l.useEffect)((function(){D()}),[]);var M=function(e){var t=new Date(e);return["January","February","March","April","May","June","July","August","September","October","November","December"][t.getMonth()]+" "+t.getDate()+", "+t.getFullYear()},P=function(e){var t,n=B.filter((function(t){return t.cid===e.cid&&("status_change"===t.type||"amount_change"===t.type)})).sort((function(e,t){return new Date(t.timestamp)-new Date(e.timestamp)}));if(n.length>0){var o=n[0];return M(o.timestamp)+" ("+(o.status||"Amount updated")+" by Ops Manager)"}if(null!=(t=e.loans)&&t.loanHistory&&e.loans.loanHistory.length>0){var l=(0,H.default)(e.loans.loanHistory).sort((function(e,t){return new Date(t.dateUpdated||t.dateApplied)-new Date(e.dateUpdated||e.dateApplied)}))[0],r=l.dateUpdated||l.dateApplied;return""+M(r)+(l.status?" ("+l.status+")":"")}return"No date"},O=S.filter((function(e){var t=e.name.toLowerCase().includes(r.toLowerCase())||e.cid.includes(r),n=e.status?e.status.toLowerCase():"pending",o=m.toLowerCase(),l="pending"===o&&(!e.status||"pending"===n)||n===o;return t&&l})),A=(0,h.default)().width,k=A<600,z=A>=600&&A<1024;return(0,p.jsxs)(s.default,{style:ve.container,children:[(0,p.jsxs)(s.default,{style:[ve.header,k&&ve.headerMobile],children:[(0,p.jsx)(c.default,{style:[ve.title,k&&ve.titleMobile],children:"Total Loan List"}),(0,p.jsx)(f.default,{style:[ve.dashboardBtn,k&&ve.dashboardBtnMobile],onPress:function(){return t.navigate("LoanOfficerDashboard")},children:(0,p.jsx)(c.default,{style:[ve.btnText,k&&ve.btnTextMobile],children:"Go to Dashboard"})})]}),(0,p.jsxs)(s.default,{style:[ve.searchFilterRow,k&&ve.searchFilterRowMobile],children:[(0,p.jsx)(u.default,{style:[ve.searchInput,k&&ve.searchInputMobile],placeholder:"Search by name or CID",value:r,onChangeText:a}),(0,p.jsxs)(s.default,{style:[ve.filter,k&&ve.filterMobile],children:[(0,p.jsx)(c.default,{style:[ve.filterLabel,k&&ve.filterLabelMobile],children:"Filter:"}),we.map((function(e){return(0,p.jsx)(xe.default,{style:[ve.filterOption,m===e&&ve.activeFilter,k&&ve.filterOptionMobile],onPress:function(){return y(e)},children:(0,p.jsx)(c.default,{style:[ve.filterText,m===e&&ve.activeFilterText,k&&ve.filterTextMobile],children:e})},e)}))]})]}),!k&&(0,p.jsxs)(s.default,{style:ve.tableHeader,children:[(0,p.jsx)(s.default,{style:[ve.headerContainer,z?ve.tabletCell:{flex:1},ve.cidCell],children:(0,p.jsx)(c.default,{style:[ve.headerCell,z&&ve.tabletHeaderText],children:"CID"})}),(0,p.jsx)(s.default,{style:[ve.headerContainer,z?ve.tabletCell:{flex:3},ve.nameCell],children:(0,p.jsx)(c.default,{style:[ve.headerCell,z&&ve.tabletHeaderText],children:"Full Name"})}),(0,p.jsx)(s.default,{style:[ve.headerContainer,z?ve.tabletCell:{flex:2},ve.statusCell],children:(0,p.jsx)(c.default,{style:[ve.headerCell,ve.centerText,z&&ve.tabletHeaderText],children:"Loan Status"})}),(0,p.jsx)(s.default,{style:[ve.headerContainer,z?ve.tabletCell:{flex:2},ve.updateCell],children:(0,p.jsx)(c.default,{style:[ve.headerCell,z&&ve.tabletHeaderText],children:"Latest Update"})}),(0,p.jsx)(s.default,{style:[ve.headerContainer,z?ve.tabletCell:{flex:1},ve.actionCell],children:(0,p.jsx)(c.default,{style:[ve.headerCell,z&&ve.tabletHeaderText]})})]}),j&&(0,p.jsx)(s.default,{style:ve.refreshingIndicator,children:(0,p.jsx)(c.default,{style:ve.refreshingText,children:"Refreshing loan data..."})}),(0,p.jsx)(Q.default,{data:O,keyExtractor:function(e){return e.cid},renderItem:function(e){var n=e.item;return(0,p.jsx)(f.default,{style:[ve.row,k&&ve.rowMobile,z&&ve.rowTablet],onPress:function(){return k&&t.navigate("PendingLoanDetail",{client:n,backScreen:"TotalLoanList"})},children:k?(0,p.jsxs)(s.default,{style:ve.mobileContent,children:[(0,p.jsx)(c.default,{style:ve.mobileName,children:n.name}),(0,p.jsxs)(c.default,{style:ve.mobileCid,children:["CID: ",n.cid]}),(0,p.jsxs)(s.default,{style:ve.mobileStatusRow,children:[(0,p.jsxs)(c.default,{style:[ve.mobileStatus,n.status&&"approved"===n.status.toLowerCase()&&ve.approvedStatus,n.status&&"declined"===n.status.toLowerCase()&&ve.declinedStatus,(!n.status||"pending"===n.status.toLowerCase())&&ve.pendingStatus],children:["Status: ",n.status?n.status.charAt(0).toUpperCase()+n.status.slice(1).toLowerCase():"Pending"]}),(0,p.jsxs)(c.default,{style:ve.mobileDate,children:["Latest Updated: ",P(n)]})]})]}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(s.default,{style:[ve.cellContainer,z?ve.tabletCell:{flex:1},ve.cidCell],children:(0,p.jsx)(c.default,{style:ve.cell,numberOfLines:1,children:n.cid})}),(0,p.jsx)(s.default,{style:[ve.cellContainer,z?ve.tabletCell:{flex:3},ve.nameCell],children:(0,p.jsx)(c.default,{style:ve.cell,numberOfLines:1,children:n.name})}),(0,p.jsx)(s.default,{style:[ve.cellContainer,z?ve.tabletCell:{flex:2},ve.statusCell],children:(0,p.jsx)(c.default,{style:[ve.cell,ve.centerText,n.status&&"approved"===n.status.toLowerCase()&&ve.approvedStatus,n.status&&"declined"===n.status.toLowerCase()&&ve.declinedStatus,(!n.status||"pending"===n.status.toLowerCase())&&ve.pendingStatus],numberOfLines:1,children:n.status?n.status.charAt(0).toUpperCase()+n.status.slice(1).toLowerCase():"Pending"})}),(0,p.jsx)(s.default,{style:[ve.cellContainer,z?ve.tabletCell:{flex:2},ve.updateCell],children:(0,p.jsx)(c.default,{style:[ve.cell,z&&ve.tabletUpdateText],children:P(n)})}),(0,p.jsx)(s.default,{style:[ve.cellContainer,z?ve.tabletCell:{flex:1},ve.actionCell],children:(0,p.jsx)(f.default,{style:ve.viewBtn,onPress:function(){return t.navigate("PendingLoanDetail",{client:n,backScreen:"TotalLoanList"})},children:(0,p.jsx)(c.default,{style:ve.viewBtnText,children:"View"})})})]})})}})]})}var ve=g.default.create({rowTablet:{paddingVertical:16},tabletCell:{paddingHorizontal:8},tabletUpdateText:{fontSize:13,lineHeight:18,flexWrap:"wrap",textAlign:"left",paddingRight:4,width:"100%"},cidCell:{width:"15%"},nameCell:{width:"25%"},statusCell:{width:"15%"},updateCell:{width:"35%",paddingRight:12},actionCell:{width:"10%",alignItems:"center"},headerMobile:{flexDirection:"column",gap:12,alignItems:"flex-start",marginBottom:16},titleMobile:{fontSize:18},dashboardBtnMobile:{paddingVertical:8,paddingHorizontal:12},btnTextMobile:{fontSize:14},searchFilterRowMobile:{flexDirection:"column",gap:12},searchInputMobile:{minWidth:"100%",padding:8,fontSize:14},filterMobile:{flexWrap:"wrap",gap:8},filterLabelMobile:{fontSize:14},filterOptionMobile:{paddingVertical:4,paddingHorizontal:8},filterTextMobile:{fontSize:12},rowMobile:{padding:12,marginBottom:8,backgroundColor:"#fff",borderRadius:8,borderWidth:1,borderColor:"#e9ecef"},mobileContent:{flex:1},mobileName:{fontSize:16,fontWeight:"500",marginBottom:4,color:"#212529"},mobileCid:{fontSize:14,color:"#6c757d",marginBottom:6},mobileStatusRow:{flexDirection:"column",gap:8},mobileStatus:{fontSize:14,fontWeight:"500"},mobileDate:{fontSize:12,color:"#6c757d",flexWrap:"wrap"},viewBtnText:{color:"#495057",fontSize:14,fontWeight:"500"},cellContainer:{paddingHorizontal:10,justifyContent:"center",alignItems:"center"},headerContainer:{paddingHorizontal:10,justifyContent:"center",alignItems:"center"},centerText:{textAlign:"center",width:"100%"},container:{padding:b.default.select({web:20,default:16}),backgroundColor:"#f6f6f6",flex:1},approvedStatus:{color:"#2ecc71",fontWeight:"bold"},pendingStatus:{color:"#000000",fontWeight:"bold"},declinedStatus:{color:"#e74c3c",fontWeight:"bold"},header:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:20},title:{fontSize:22,fontWeight:"bold"},dashboardBtn:{backgroundColor:"#007AFF",paddingVertical:8,paddingHorizontal:16,borderRadius:6},btnText:{color:"#fff",fontWeight:"600"},searchFilterRow:{flexDirection:"row",justifyContent:"space-between",gap:10,marginBottom:10,flexWrap:"wrap"},searchInput:{backgroundColor:"#ddd",borderRadius:6,padding:10,flex:1,minWidth:150},filter:{flexDirection:"row",alignItems:"center",gap:6},filterLabel:{fontWeight:"600"},filterOption:{backgroundColor:"#eee",paddingVertical:6,paddingHorizontal:12,borderRadius:6},activeFilter:{backgroundColor:"#007AFF"},filterText:{color:"#000"},activeFilterText:{color:"#fff",fontWeight:"bold"},refreshingIndicator:{padding:10,backgroundColor:"#e8f5e9",marginBottom:10},refreshingText:{color:"#2ecc71",textAlign:"center"},tableHeader:{flexDirection:"row",backgroundColor:"#dcdcdc",paddingVertical:10,marginBottom:4,alignItems:"center"},headerCell:{fontWeight:"bold",fontSize:15},row:{flexDirection:"row",paddingVertical:12,borderBottomWidth:1,borderColor:"#ccc",alignItems:"center",minHeight:50},cell:{fontSize:14},viewBtn:{backgroundColor:"#ccc",paddingVertical:6,paddingHorizontal:16,borderRadius:6}});function Ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(n),!0).forEach((function(t){(0,x.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Te={name:"N/A",age:0,cid:"",email:"N/A",number:"N/A",address:"N/A",input:{paymentHistory:0,creditUtilization:0,creditHistoryLength:0,creditMix:0,newInquiries:0},financial:{monthlyIncome:0,monthlyExpenses:0,assets:0,dti:0},employer:"N/A",position:"N/A",loans:{approved:{amount:0,status:"None"},pending:{amount:0,status:"None"},loanHistory:[]},loanBalance:{amount:0,dueDate:"N/A"}};function Be(e){var t,n=e.navigation,o=e.route,r=(0,l.useState)(null),a=(0,d.default)(r,2),u=a[0],g=a[1],b=(0,l.useState)(null),m=(0,d.default)(b,2),y=m[0],x=m[1],w=(0,l.useState)(!1),j=(0,d.default)(w,2),v=(j[0],j[1],(0,l.useState)(null)),C=(0,d.default)(v,2),S=(C[0],C[1],G()),T=(S.loans,S.refreshClientData),B=(0,h.default)().width<768,M=function(){var e=(0,i.default)((function*(e){try{try{if(!(yield fetch("http://localhost:5600/clients")).ok)throw new Error("API server is not responding properly")}catch(n){throw new Error("API server is not running. Please start the credit-scoring-api server first.")}var t=yield D.fetchClientLoanData(e);x(t)}catch(n){console.error("Error fetching loan data:",n)}}));return function(t){return e.apply(this,arguments)}}();if((0,l.useEffect)((function(){var e;if(null!=(e=o.params)&&e.client){var t=Se(Se({},Te),o.params.client);g(t),t.cid&&(M(t.cid),T(t.cid))}}),[null==(t=o.params)?void 0:t.client]),(0,l.useEffect)((function(){return n.addListener("focus",(function(){null!=u&&u.cid&&(M(u.cid),T(u.cid))}))}),[n,u]),!u)return(0,p.jsx)(s.default,{style:De.container,children:(0,p.jsx)(c.default,{children:"Loading..."})});var P=function(){var e=.35,t=.3,n=.15,o=.1,l=.1,r=u.input,a=e*(r.paymentHistory/100)+t*(1-r.creditUtilization/100)+n*Math.min(r.creditHistoryLength/60,1)+o*(r.creditMix/100)+l*(1-r.newInquiries/100);return Math.round(300+550*a)},O=function(e){return e>=800?"Exceptional":e>=740?"Very Good":e>=670?"Good":e>=580?"Fair":"Poor"};return(0,p.jsxs)(le.default,{style:De.container,showsVerticalScrollIndicator:!1,children:[(0,p.jsxs)(s.default,{style:[De.topbar,B&&De.topbarMobile],children:[(0,p.jsxs)(c.default,{style:[De.logo,B&&De.logoMobile],children:[(0,p.jsx)(c.default,{style:{color:"#0066ff"},children:"Loan"}),"Siya"]}),(0,p.jsx)(c.default,{style:[De.role,B&&De.roleMobile],children:"Loan Officer"})]}),(0,p.jsxs)(s.default,{style:[De.content,B&&De.contentMobile],children:[(0,p.jsxs)(s.default,{style:[De.left,B&&De.leftMobile,B&&{marginBottom:"20%"}],children:[(0,p.jsx)(c.default,{style:[De.sectionTitle,B&&De.sectionTitleMobile],children:"Client Profile"}),(0,p.jsxs)(s.default,{style:De.detailsContainer,children:[(0,p.jsx)(c.default,{style:De.subTitle,children:"Personal Details"}),(0,p.jsxs)(c.default,{children:[(0,p.jsx)(c.default,{style:De.bold,children:"Name:"})," ",u.name]}),(0,p.jsxs)(c.default,{children:[(0,p.jsx)(c.default,{style:De.bold,children:"Age:"})," ",u.age]}),(0,p.jsxs)(c.default,{children:[(0,p.jsx)(c.default,{style:De.bold,children:"CID:"})," ",u.cid]}),(0,p.jsxs)(c.default,{children:[(0,p.jsx)(c.default,{style:De.bold,children:"Email:"})," ",u.email]}),(0,p.jsxs)(c.default,{children:[(0,p.jsx)(c.default,{style:De.bold,children:"Number:"})," ",u.number]}),(0,p.jsxs)(c.default,{children:[(0,p.jsx)(c.default,{style:De.bold,children:"Address:"})," ",u.address]})]}),(0,p.jsx)(c.default,{style:[De.subTitle,{marginTop:B?8:12,marginBottom:B?4:6}],children:"Uploaded Documents"}),(0,p.jsxs)(s.default,{style:De.documentCategory,children:[(0,p.jsx)(c.default,{style:De.categoryText,children:"Application Documents"}),(0,p.jsx)(f.default,{style:De.previewBtn,onPress:(0,i.default)((function*(){try{if(!u.cid)return console.error("No client CID available"),void alert("Error: Client ID not found");var e=yield D.getDocumentDates(u.cid);if(0===e.length)return void alert("No documents found for this client.");var t=e.sort((function(e,t){return t.date.localeCompare(e.date)})),o=[],l=null;for(var r of t){var a=(yield D.getDocumentsByDate(u.cid,r.date)).filter((function(e){var t;return!((null==(t=e.name)?void 0:t.toLowerCase())||"").endsWith(".pdf")}));if(a.length>0){o=a,l=r.date;break}}o.length>0?n.navigate("DocumentPreview",{cid:u.cid,title:"Application Documents",documents:o,latestDate:l}):alert("No application documents found")}catch(i){console.error("Error loading documents:",i),alert("Error loading documents. Please try again.")}})),children:(0,p.jsx)(c.default,{style:De.previewText,children:"View"})})]}),(0,p.jsxs)(s.default,{style:De.documentCategory,children:[(0,p.jsx)(c.default,{style:De.categoryText,children:"Signed Documents"}),(0,p.jsx)(f.default,{style:De.previewBtn,onPress:(0,i.default)((function*(){try{var e=yield D.getDocumentDates(u.cid);if(0===e.length)return void alert("No documents found for this client.");var t=e.sort((function(e,t){return t.date.localeCompare(e.date)})),o=[],l=null;for(var r of t){var a=(yield D.getDocumentsByDate(u.cid,r.date)).filter((function(e){var t;return((null==(t=e.name)?void 0:t.toLowerCase())||"").endsWith(".pdf")}));if(a.length>0){o=a,l=r.date;break}}if(o.length>0){var i=o.map((function(e){return Se(Se({},e),{},{displayName:e.name.includes("promissory-note")?"Promissory Note":"Signed Agreement"})}));n.navigate("DocumentPreview",{cid:u.cid,title:"Signed Documents",documents:i,latestDate:l})}else alert("No signed documents found. Documents will be available after loan approval.")}catch(d){console.error("Error loading documents:",d),alert("Error loading documents. Please try again.")}})),children:(0,p.jsx)(c.default,{style:De.previewText,children:"View"})})]})]}),(0,p.jsxs)(s.default,{style:[De.right,B&&De.rightMobile,B&&{marginTop:"-370px"}],children:[(0,p.jsxs)(s.default,{style:De.detailsContainer,children:[(0,p.jsx)(c.default,{style:De.subTitle,children:"Financial Record"}),(0,p.jsxs)(c.default,{children:["Monthly Income: \u20b1",u.financial.monthlyIncome.toLocaleString()]}),(0,p.jsxs)(c.default,{children:["Monthly Expenses: \u20b1",u.financial.monthlyExpenses.toLocaleString()]}),(0,p.jsxs)(c.default,{children:["Saving and Assets: \u20b1",u.financial.assets.toLocaleString()]}),(0,p.jsxs)(c.default,{children:["Debt to Income Ratio: ",u.financial.dti,"%"]})]}),(0,p.jsxs)(s.default,{style:[De.detailsContainer,{marginTop:16}],children:[(0,p.jsx)(c.default,{style:De.subTitle,children:"Employment or Business info"}),(0,p.jsx)(c.default,{children:u.employer}),(0,p.jsx)(c.default,{children:u.position})]}),(0,p.jsx)(c.default,{style:[De.subTitle,{marginTop:B?8:16,marginBottom:B?4:6}],children:"Loan History"}),(0,p.jsx)(f.default,{style:[De.viewBtn,B&&De.viewBtnMobile],onPress:function(){return n.navigate("LoanHistory",{clientId:u.cid,userRole:"loanofficer",fromPendingDetail:!0})},children:(0,p.jsx)(c.default,{style:{color:"#fff",fontWeight:"600",fontSize:16},children:"View History"})}),(0,p.jsxs)(s.default,{style:[De.loanDetails,B&&De.loanDetailsMobile],children:[(0,p.jsx)(c.default,{style:De.subTitle,children:"Approved by Loan Officer"}),(0,p.jsxs)(c.default,{children:["\u20b1",(null==y?void 0:y.approvedAmount)||"0"]}),(0,p.jsx)(c.default,{style:De.subTitle,children:"Recommended Loan Amount"}),(0,p.jsxs)(c.default,{children:["\u20b1",(null==y?void 0:y.recommendedAmount)||"0"]}),(0,p.jsx)(c.default,{style:De.subTitle,children:"Purpose of Loan"}),(0,p.jsx)(c.default,{children:(null==y?void 0:y.purpose)||"N/A"}),(0,p.jsx)(c.default,{style:De.subTitle,children:"Description of Purpose"}),(0,p.jsx)(c.default,{children:(null==y?void 0:y.description)||"N/A"}),(0,p.jsx)(c.default,{style:De.subTitle,children:"Loan Term (in months)"}),(0,p.jsx)(c.default,{children:(null==y?void 0:y.term)||"N/A"}),(0,p.jsx)(c.default,{style:De.subTitle,children:"Repayment Method"}),(0,p.jsx)(c.default,{children:(null==y?void 0:y.repaymentMethod)||"Monthly"}),(0,p.jsx)(c.default,{style:De.subTitle,children:"Interest Rate"}),(0,p.jsxs)(c.default,{children:[(null==y?void 0:y.interestRate)||"5.0","%"]}),(0,p.jsx)(c.default,{style:De.subTitle,children:"Amount Due"}),(0,p.jsxs)(c.default,{children:["\u20b1",(null==y?void 0:y.amountDue)||"0"]})]}),(0,p.jsxs)(s.default,{style:[De.creditBox,B&&De.creditBoxMobile],children:[(0,p.jsx)(c.default,{style:[De.subTitle,{marginBottom:4}],children:"Credit Score"}),(0,p.jsx)(c.default,{style:De.creditScore,children:(null==y?void 0:y.creditScore)||P()}),(0,p.jsx)(c.default,{style:[De.subTitle,{marginTop:12}],children:"Risk Category"}),(0,p.jsx)(c.default,{style:{color:["Exceptional","Very Good","Good"].includes((null==y?void 0:y.riskCategory)||O(P()))?"#2ecc71":"#e74c3c"},children:(null==y?void 0:y.riskCategory)||O(P())}),(0,p.jsx)(c.default,{style:[De.subTitle,{marginTop:12}],children:"Recommendation"}),(0,p.jsx)(c.default,{style:{color:"APPROVE"===(null==y?void 0:y.recommendation)?"#2ecc71":"#e74c3c"},children:(null==y?void 0:y.recommendation)||(P()>=670?"Approved":"Not Approved")})]}),(0,p.jsx)(f.default,{style:De.backBtn,onPress:function(){return n.goBack()},children:(0,p.jsx)(c.default,{style:De.backText,children:"Back"})})]})]})]})}var De=g.default.create({container:{backgroundColor:"#f6f6f6",flex:1},topbar:{flexDirection:"row",justifyContent:"space-between",backgroundColor:"#ddd",padding:b.default.select({web:20,default:16}),alignItems:"center"},topbarMobile:{padding:12},logo:{fontSize:b.default.select({web:22,default:20}),fontWeight:"bold"},logoMobile:{fontSize:18},role:{fontSize:b.default.select({web:14,default:12})},roleMobile:{fontSize:12},content:{flexDirection:"row",padding:b.default.select({web:20,default:16}),flexWrap:b.default.select({web:"nowrap",default:"wrap"})},contentMobile:{flexDirection:"column",padding:12,gap:0,position:"relative"},left:{flex:b.default.select({web:1.1,default:1}),paddingRight:b.default.select({web:20,default:0}),borderRightWidth:b.default.select({web:1,default:0}),borderColor:"#ccc",minWidth:b.default.select({web:300,default:"100%"}),marginBottom:b.default.select({web:0,default:0})},leftMobile:{width:"100%",paddingRight:0,borderRightWidth:0,marginBottom:"25%",position:"relative",zIndex:1},right:{flex:b.default.select({web:1.3,default:1}),paddingLeft:b.default.select({web:20,default:0}),minWidth:b.default.select({web:300,default:"100%"})},rightMobile:{width:"100%",paddingLeft:0,marginTop:"-40%",position:"relative",zIndex:0},detailsContainer:{backgroundColor:"#fff",padding:b.default.select({web:20,default:16}),borderRadius:8,borderWidth:1,borderColor:"#e0e0e0",marginBottom:16,width:"100%",alignSelf:"stretch"},sectionTitle:{fontWeight:"bold",fontSize:16,marginBottom:10},sectionTitleMobile:{fontSize:16},subTitle:{fontWeight:"bold",marginTop:10,marginBottom:4},bold:{fontWeight:"bold"},documentCategory:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",backgroundColor:"#f5f5f5",padding:16,marginBottom:10,borderRadius:6,borderWidth:1,borderColor:"#e0e0e0"},categoryText:{fontSize:15,color:"#333",fontWeight:"500"},previewBtn:{backgroundColor:"#0066ff",paddingHorizontal:12,paddingVertical:4,borderRadius:6},previewText:{color:"#fff"},viewBtn:{backgroundColor:"#0066ff",paddingHorizontal:32,paddingVertical:12,borderRadius:8,flexDirection:"row",alignItems:"center",gap:8,minWidth:120,justifyContent:"center"},viewBtnMobile:{width:"100%",paddingVertical:14,minHeight:48},loanDetails:{backgroundColor:"#f8f9fa",padding:b.default.select({web:20,default:16}),borderRadius:8,marginTop:20,borderWidth:1,borderColor:"#e0e0e0"},loanDetailsMobile:{padding:12,marginTop:12},creditBox:{backgroundColor:"#f8f9fa",padding:b.default.select({web:20,default:16}),borderRadius:8,marginTop:20,borderWidth:1,borderColor:"#e0e0e0"},creditBoxMobile:{padding:12,marginTop:12},creditScore:{fontSize:32,fontWeight:"bold",color:"#2ecc71",marginBottom:8},backBtn:{backgroundColor:"#ddd",paddingVertical:b.default.select({web:10,default:12}),paddingHorizontal:b.default.select({web:20,default:16}),borderRadius:6,marginTop:20,alignItems:"center",width:"100%"},backText:{fontSize:16,color:"#333"}});function Me(e){var t=e.navigation,n=(0,l.useContext)(k),o=n.users,r=(n.loading,n.updateUser),a=(n.refreshUsers,(0,h.default)().width<768),i=function(e){if(e.roleType)switch(e.roleType){case"LOAN_OFFICER":return"Loan Officer";case"OPS_MANAGER":return"Operations Manager";case"IT_ADMIN":return"IT Administrator";default:return e.role||"Unknown"}return e.role||"Unknown"};return(0,p.jsxs)(s.default,{style:Pe.container,children:[(0,p.jsxs)(s.default,{style:[Pe.topbar,a&&Pe.topbarMobile],children:[(0,p.jsxs)(s.default,{style:[Pe.leftSection,a&&Pe.leftSectionMobile],children:[(0,p.jsxs)(c.default,{style:[Pe.brand,a&&Pe.brandMobile],children:[(0,p.jsx)(c.default,{style:{color:"#0066ff"},children:"Loan"}),"Siya"]}),!a&&(0,p.jsx)(c.default,{style:Pe.title,children:"User Management"})]}),(0,p.jsx)(s.default,{style:Pe.rightSection,children:(0,p.jsx)(f.default,{onPress:function(){return t.navigate("Dashboard")},children:(0,p.jsx)(c.default,{style:[Pe.backButton,a&&Pe.backButtonMobile],children:a?"Back":"Back to Dashboard"})})})]}),(0,p.jsxs)(s.default,{style:[Pe.content,a&&Pe.contentMobile],children:[(0,p.jsxs)(s.default,{style:[Pe.header,a&&Pe.headerMobile],children:[(0,p.jsx)(c.default,{style:[Pe.pageTitle,a&&Pe.pageTitleMobile],children:a?"Users":"Users List"}),(0,p.jsx)(f.default,{style:[Pe.addButton,a&&Pe.addButtonMobile],onPress:function(){return t.navigate("AddEditUser")},children:(0,p.jsx)(c.default,{style:[Pe.addButtonText,a&&Pe.addButtonTextMobile],children:a?"Add":"Add User"})})]}),(0,p.jsx)(le.default,{style:Pe.table,children:a?(0,p.jsx)(s.default,{style:Pe.mobileContainer,children:o.map((function(e){return(0,p.jsxs)(s.default,{style:Pe.mobileCard,children:[(0,p.jsxs)(s.default,{style:Pe.mobileCardHeader,children:[(0,p.jsx)(c.default,{style:Pe.mobileCardName,children:e.fullName}),(0,p.jsx)(c.default,{style:[Pe.mobileCardStatus,"Active"===e.status?Pe.activeStatus:Pe.disabledStatus],children:e.status})]}),(0,p.jsxs)(s.default,{style:Pe.mobileCardContent,children:[(0,p.jsxs)(c.default,{style:Pe.mobileCardLabel,children:["Username: ",(0,p.jsx)(c.default,{style:Pe.mobileCardValue,children:e.username})]}),(0,p.jsxs)(c.default,{style:Pe.mobileCardLabel,children:["Role: ",(0,p.jsx)(c.default,{style:Pe.mobileCardValue,children:i(e)})]})]}),(0,p.jsxs)(s.default,{style:Pe.mobileCardActions,children:[(0,p.jsx)(f.default,{onPress:function(){try{var t="Active"===e.status?"Disabled":"Active";r({id:e.id,status:t})}catch(n){alert("Error updating user: "+n.message)}},style:[Pe.mobileActionButton,"Active"===e.status?Pe.disableButtonMobile:Pe.enableButtonMobile],children:(0,p.jsx)(c.default,{style:Pe.mobileActionButtonText,children:"Active"===e.status?"Disable":"Enable"})}),(0,p.jsx)(f.default,{onPress:function(){var n=JSON.parse(JSON.stringify(e));t.navigate("AddEditUser",{user:n})},style:[Pe.mobileActionButton,Pe.editButtonMobile],children:(0,p.jsx)(c.default,{style:Pe.mobileActionButtonText,children:"Edit"})})]})]},e.id)}))}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(s.default,{style:Pe.tableHeader,children:[(0,p.jsx)(c.default,{style:[Pe.headerCell,{flex:2}],children:"Name"}),(0,p.jsx)(c.default,{style:[Pe.headerCell,{flex:1.5}],children:"Username"}),(0,p.jsx)(c.default,{style:[Pe.headerCell,{flex:1}],children:"Role"}),(0,p.jsx)(c.default,{style:[Pe.headerCell,{flex:1}],children:"Status"}),(0,p.jsx)(c.default,{style:[Pe.headerCell,{flex:1}],children:"Action"})]}),o.map((function(e){return(0,p.jsxs)(s.default,{style:Pe.tableRow,children:[(0,p.jsx)(c.default,{style:[Pe.cell,{flex:2}],children:e.fullName}),(0,p.jsx)(c.default,{style:[Pe.cell,{flex:1.5}],children:e.username}),(0,p.jsx)(c.default,{style:[Pe.cell,{flex:1}],children:i(e)}),(0,p.jsx)(c.default,{style:[Pe.cell,{flex:1},"Active"===e.status?Pe.activeStatus:Pe.disabledStatus],children:e.status}),(0,p.jsxs)(s.default,{style:[Pe.cell,{flex:1,flexDirection:"row",gap:15}],children:[(0,p.jsx)(f.default,{onPress:function(){try{var t="Active"===e.status?"Disabled":"Active";r({id:e.id,status:t})}catch(n){alert("Error updating user: "+n.message)}},style:Pe.actionButtonContainer,children:(0,p.jsx)(c.default,{style:[Pe.actionButton,"Active"===e.status?Pe.disableButton:Pe.enableButton],children:"Active"===e.status?"Disable":"Enable"})}),(0,p.jsx)(f.default,{onPress:function(){var n=JSON.parse(JSON.stringify(e));t.navigate("AddEditUser",{user:n})},style:Pe.actionButtonContainer,children:(0,p.jsx)(c.default,{style:Pe.editButton,children:"Edit"})})]})]},e.id)}))]})})]})]})}var Pe=g.default.create({container:{flex:1,backgroundColor:"#f6f6f6"},topbar:{flexDirection:"row",justifyContent:"space-between",paddingHorizontal:20,paddingVertical:15,backgroundColor:"#ddd",alignItems:"center"},topbarMobile:{paddingHorizontal:15,paddingVertical:12},leftSection:{flexDirection:"row",alignItems:"center",gap:20},leftSectionMobile:{gap:10},rightSection:{flexDirection:"row",alignItems:"center"},brand:{fontSize:22,fontWeight:"bold"},brandMobile:{fontSize:18},title:{fontSize:20,fontWeight:"500"},backButton:{color:"#0066ff",fontSize:16,fontWeight:"500"},backButtonMobile:{fontSize:14},content:{flex:1,padding:20},contentMobile:{padding:15},header:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:20},headerMobile:{marginBottom:15},pageTitle:{fontSize:24,fontWeight:"bold"},pageTitleMobile:{fontSize:20},addButton:{backgroundColor:"#0066ff",paddingVertical:8,paddingHorizontal:20,borderRadius:6},addButtonMobile:{paddingVertical:10,paddingHorizontal:15},addButtonText:{color:"#fff",fontWeight:"500"},addButtonTextMobile:{fontSize:14},table:{flex:1},tableHeader:{flexDirection:"row",backgroundColor:"#e2e2e2",padding:12,borderTopLeftRadius:8,borderTopRightRadius:8},headerCell:{fontWeight:"bold",color:"#333"},tableRow:{flexDirection:"row",backgroundColor:"#fff",padding:12,borderBottomWidth:1,borderBottomColor:"#eee"},cell:{color:"#444"},activeStatus:{color:"#28a745"},disabledStatus:{color:"#dc3545"},editButton:{color:"#0066ff",fontWeight:"500"},actionButton:{fontWeight:"500"},enableButton:{color:"#28a745"},disableButton:{color:"#dc3545"},actionButtonContainer:{backgroundColor:"#f5f5f5",paddingVertical:6,paddingHorizontal:12,borderRadius:4},mobileContainer:{gap:15},mobileCard:{backgroundColor:"#fff",borderRadius:8,padding:15,marginBottom:10,shadowColor:"#000",shadowOffset:{width:0,height:1},shadowOpacity:.1,shadowRadius:2,elevation:2},mobileCardHeader:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:10},mobileCardName:{fontSize:16,fontWeight:"bold",color:"#333",flex:1},mobileCardStatus:{fontSize:14,fontWeight:"500",paddingHorizontal:8,paddingVertical:4,borderRadius:4,backgroundColor:"#f0f0f0"},mobileCardContent:{marginBottom:15},mobileCardLabel:{fontSize:14,color:"#666",marginBottom:5},mobileCardValue:{color:"#333",fontWeight:"500"},mobileCardActions:{flexDirection:"row",gap:10},mobileActionButton:{flex:1,paddingVertical:10,paddingHorizontal:15,borderRadius:6,alignItems:"center"},mobileActionButtonText:{fontSize:14,fontWeight:"500",color:"#fff"},enableButtonMobile:{backgroundColor:"#28a745"},disableButtonMobile:{backgroundColor:"#dc3545"},editButtonMobile:{backgroundColor:"#0066ff"},loadingContainer:{flex:1,justifyContent:"center",alignItems:"center",padding:20},loadingText:{fontSize:16,color:"#666"}}),Oe=n(7366);function Ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ae(Object(n),!0).forEach((function(t){(0,x.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ze(e){var t=e.route,n=e.navigation,o=(t.params||{}).user,r=o?JSON.parse(JSON.stringify(o)):void 0,a=(0,l.useContext)(k),g=a.addUser,b=a.updateUser,m=(0,h.default)().width<768,y=function(e){switch(e){case"Loan Officer":default:return"LOAN_OFFICER";case"Operations Manager":return"OPS_MANAGER";case"IT Administrator":return"IT_ADMIN"}},x=(0,l.useState)({username:(null==r?void 0:r.username)||"",fullName:(null==r?void 0:r.fullName)||"",role:r?function(e){switch(e){case"LOAN_OFFICER":default:return"Loan Officer";case"OPS_MANAGER":return"Operations Manager";case"IT_ADMIN":return"IT Administrator"}}(r.roleType||r.role):"Loan Officer",status:(null==r?void 0:r.status)||"Active",password:"",confirmPassword:"",newPassword:"",confirmNewPassword:""}),w=(0,d.default)(x,2),j=w[0],v=w[1],C=function(){var e=(0,i.default)((function*(){var e=ke(ke({},j),{},{username:j.username.trim(),fullName:j.fullName.trim()});if(e.username&&e.fullName)if(e.username.length<3)alert("Username must be at least 3 characters long");else if(e.fullName.length<2)alert("Full name must be at least 2 characters long");else if(r||e.password&&e.confirmPassword)if(r||e.password===e.confirmPassword)if(!r&&e.password.length<6)alert("Password must be at least 6 characters long");else{if(r&&e.newPassword){if(!e.confirmNewPassword)return void alert("Please confirm the new password");if(e.newPassword!==e.confirmNewPassword)return void alert("New passwords do not match");if(e.newPassword.length<6)return void alert("New password must be at least 6 characters long")}var t={username:e.username,fullName:e.fullName,role:y(e.role),status:e.status,password:r?e.newPassword||void 0:e.password};try{r?(yield b(ke(ke({},t),{},{id:r.id})),alert("User updated successfully!")):(yield g(t),alert("User added successfully!")),n.setParams({user:void 0}),n.goBack()}catch(o){return void alert("Error: "+o.message)}}else alert("Passwords do not match");else alert("Password is required for new users");else alert("Please fill in all required fields (Username and Full Name)")}));return function(){return e.apply(this,arguments)}}();return(0,p.jsxs)(s.default,{style:Le.container,children:[(0,p.jsxs)(s.default,{style:[Le.topbar,m&&Le.topbarMobile],children:[(0,p.jsxs)(s.default,{style:[Le.leftSection,m&&Le.leftSectionMobile],children:[(0,p.jsxs)(c.default,{style:[Le.brand,m&&Le.brandMobile],children:[(0,p.jsx)(c.default,{style:{color:"#0066ff"},children:"Loan"}),"Siya"]}),!m&&(0,p.jsx)(c.default,{style:Le.title,children:r?"Edit User":"Add User"})]}),(0,p.jsx)(s.default,{style:Le.rightSection,children:(0,p.jsx)(f.default,{onPress:function(){return n.goBack()},children:(0,p.jsx)(c.default,{style:[Le.backButton,m&&Le.backButtonMobile],children:m?"Back":"Back to List"})})})]}),(0,p.jsxs)(le.default,{style:[Le.content,m&&Le.contentMobile],showsVerticalScrollIndicator:!1,children:[m&&(0,p.jsx)(c.default,{style:Le.mobileTitle,children:r?"Edit User":"Add User"}),(0,p.jsxs)(s.default,{style:[Le.form,m&&Le.formMobile],children:[(0,p.jsx)(c.default,{style:[Le.label,m&&Le.labelMobile],children:"Full Name"}),(0,p.jsx)(u.default,{style:[Le.input,m&&Le.inputMobile],value:j.fullName,onChangeText:function(e){return v(ke(ke({},j),{},{fullName:e}))},placeholder:"Enter full name"}),(0,p.jsx)(c.default,{style:[Le.label,m&&Le.labelMobile],children:"Username"}),(0,p.jsx)(u.default,{style:[Le.input,m&&Le.inputMobile],value:j.username,onChangeText:function(e){return v(ke(ke({},j),{},{username:e}))},placeholder:"Enter username",editable:!r}),(0,p.jsx)(c.default,{style:[Le.label,m&&Le.labelMobile],children:"Role"}),(0,p.jsx)(s.default,{style:[Le.pickerContainer,m&&Le.pickerContainerMobile],children:(0,p.jsxs)(Oe.Picker,{selectedValue:j.role,onValueChange:function(e){return v(ke(ke({},j),{},{role:e}))},children:[(0,p.jsx)(Oe.Picker.Item,{label:"Loan Officer",value:"Loan Officer"}),(0,p.jsx)(Oe.Picker.Item,{label:"Operations Manager",value:"Operations Manager"}),r&&"IT_ADMIN"===r.roleType&&(0,p.jsx)(Oe.Picker.Item,{label:"IT Administrator",value:"IT Administrator"})]})}),r&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(c.default,{style:[Le.label,m&&Le.labelMobile],children:"Status"}),(0,p.jsx)(s.default,{style:[Le.pickerContainer,m&&Le.pickerContainerMobile],children:(0,p.jsxs)(Oe.Picker,{selectedValue:j.status,onValueChange:function(e){return v(ke(ke({},j),{},{status:e}))},children:[(0,p.jsx)(Oe.Picker.Item,{label:"Active",value:"Active"}),(0,p.jsx)(Oe.Picker.Item,{label:"Disabled",value:"Disabled"})]})}),(0,p.jsxs)(s.default,{style:[Le.passwordSection,m&&Le.passwordSectionMobile],children:[(0,p.jsx)(c.default,{style:[Le.sectionTitle,m&&Le.sectionTitleMobile],children:"Change Password"}),(0,p.jsx)(c.default,{style:[Le.label,m&&Le.labelMobile],children:"New Password"}),(0,p.jsx)(u.default,{style:[Le.input,m&&Le.inputMobile],secureTextEntry:!0,value:j.newPassword,onChangeText:function(e){return v(ke(ke({},j),{},{newPassword:e}))},placeholder:"Enter new password (optional)"}),(0,p.jsx)(c.default,{style:[Le.label,m&&Le.labelMobile],children:"Confirm New Password"}),(0,p.jsx)(u.default,{style:[Le.input,m&&Le.inputMobile],secureTextEntry:!0,value:j.confirmNewPassword,onChangeText:function(e){return v(ke(ke({},j),{},{confirmNewPassword:e}))},placeholder:"Confirm new password"})]})]}),!r&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(c.default,{style:[Le.label,m&&Le.labelMobile],children:"Password"}),(0,p.jsx)(u.default,{style:[Le.input,m&&Le.inputMobile],secureTextEntry:!0,value:j.password,onChangeText:function(e){return v(ke(ke({},j),{},{password:e}))},placeholder:"Enter password"}),(0,p.jsx)(c.default,{style:[Le.label,m&&Le.labelMobile],children:"Confirm Password"}),(0,p.jsx)(u.default,{style:[Le.input,m&&Le.inputMobile],secureTextEntry:!0,value:j.confirmPassword,onChangeText:function(e){return v(ke(ke({},j),{},{confirmPassword:e}))},placeholder:"Confirm password"})]}),(0,p.jsx)(f.default,{style:[Le.saveButton,m&&Le.saveButtonMobile],onPress:C,children:(0,p.jsx)(c.default,{style:[Le.saveButtonText,m&&Le.saveButtonTextMobile],children:"Save User"})})]})]})]})}var Le=g.default.create({container:{flex:1,backgroundColor:"#f6f6f6"},topbar:{flexDirection:"row",justifyContent:"space-between",paddingHorizontal:20,paddingVertical:15,backgroundColor:"#ddd",alignItems:"center"},topbarMobile:{paddingHorizontal:15,paddingVertical:12},leftSection:{flexDirection:"row",alignItems:"center",gap:20},leftSectionMobile:{gap:10},rightSection:{flexDirection:"row",alignItems:"center"},brand:{fontSize:22,fontWeight:"bold"},brandMobile:{fontSize:18},title:{fontSize:20,fontWeight:"500"},backButton:{color:"#0066ff",fontSize:16,fontWeight:"500"},backButtonMobile:{fontSize:14},content:{flex:1,padding:20,overflow:"auto"},contentMobile:{padding:15},mobileTitle:{fontSize:22,fontWeight:"bold",color:"#333",textAlign:"center",marginBottom:20},form:{backgroundColor:"#fff",padding:20,borderRadius:8,maxWidth:500,width:"100%",alignSelf:"center",overflow:"visible",minHeight:"min-content"},formMobile:{padding:15,maxWidth:"100%",borderRadius:12},label:{fontSize:16,marginBottom:8,color:"#333"},labelMobile:{fontSize:15,marginBottom:6},input:{backgroundColor:"#f5f5f5",padding:12,borderRadius:6,marginBottom:16,fontSize:16},inputMobile:{padding:14,fontSize:16,marginBottom:18},pickerContainer:{backgroundColor:"#f5f5f5",borderRadius:6,marginBottom:16,overflow:"hidden"},pickerContainerMobile:{marginBottom:18},saveButton:{backgroundColor:"#0066ff",padding:15,borderRadius:6,alignItems:"center",marginTop:10},saveButtonMobile:{padding:16,borderRadius:8,marginTop:20},saveButtonText:{color:"#fff",fontSize:16,fontWeight:"600"},saveButtonTextMobile:{fontSize:17},passwordSection:{marginTop:16,marginBottom:16,padding:12,backgroundColor:"#f8f9fa",borderRadius:6,borderWidth:1,borderColor:"#e9ecef"},passwordSectionMobile:{padding:15,marginTop:20,marginBottom:20},sectionTitle:{fontSize:18,fontWeight:"600",marginBottom:16,color:"#333"},sectionTitleMobile:{fontSize:17,marginBottom:12}});function Re(e){var t=e.navigation;return(0,p.jsx)(te,{navigation:t,userRole:"ops",dashboardRoute:"OpsDashboard"})}function Ie(e){var t=e.navigation,n=e.route;return(0,p.jsx)(pe,{navigation:t,route:n,userRole:"ops"})}function We(e){var t=e.navigation,n=G().loans,o=(0,l.useState)(""),r=(0,d.default)(o,2),a=r[0],i=r[1],g=(0,h.default)().width<768,b=n.filter((function(e){return e.name.toLowerCase().includes(a.toLowerCase())||e.cid.includes(a)})),m=function(e){var t;return null!=(t=e.loans)&&t.loanHistory&&e.loans.loanHistory.length>0?(0,H.default)(e.loans.loanHistory).sort((function(e,t){return new Date(t.dateApplied)-new Date(e.dateApplied)}))[0].dateApplied:"No date"};return(0,p.jsxs)(s.default,{style:Ee.container,children:[(0,p.jsxs)(s.default,{style:[Ee.headerRow,g&&Ee.headerRowMobile],children:[(0,p.jsx)(c.default,{style:[Ee.title,g&&Ee.titleMobile],children:"List of Pending Loan Approval"}),(0,p.jsx)(f.default,{style:[Ee.dashboardBtn,g&&Ee.dashboardBtnMobile],onPress:function(){return t.replace("OpsDashboard")},children:(0,p.jsx)(c.default,{style:[Ee.btnText,g&&Ee.btnTextMobile],children:"Go to Dashboard"})})]}),(0,p.jsx)(s.default,{style:[Ee.searchBar,g&&Ee.searchBarMobile],children:(0,p.jsx)(u.default,{style:[Ee.searchInput,g&&Ee.searchInputMobile],placeholder:"Search by name or CID",value:a,onChangeText:i})}),!g&&(0,p.jsxs)(s.default,{style:Ee.tableHeader,children:[(0,p.jsx)(c.default,{style:[Ee.headerCell,{flex:1,textAlign:"center"}],children:"CID"}),(0,p.jsx)(c.default,{style:[Ee.headerCell,{flex:3,textAlign:"center"}],children:"Full Name"}),(0,p.jsx)(c.default,{style:[Ee.headerCell,{flex:2,textAlign:"center"}],children:"Loan Status"}),(0,p.jsx)(c.default,{style:[Ee.headerCell,{flex:3,textAlign:"center"}],children:"Date Applied"}),(0,p.jsx)(c.default,{style:[Ee.headerCell,{flex:1}]})]}),(0,p.jsx)(Q.default,{data:b,keyExtractor:function(e){return e.cid},renderItem:function(e){var n=e.item;return(0,p.jsx)(f.default,{style:[Ee.row,g&&Ee.rowMobile],onPress:function(){return g&&t.navigate("OpsPendingLoanDetail",{client:n,backScreen:"OpsPendingList"})},children:g?(0,p.jsxs)(s.default,{style:Ee.mobileContent,children:[(0,p.jsx)(c.default,{style:Ee.mobileName,children:n.name}),(0,p.jsxs)(c.default,{style:Ee.mobileCid,children:["CID: ",n.cid]}),(0,p.jsxs)(s.default,{style:Ee.mobileStatusRow,children:[(0,p.jsx)(c.default,{style:[Ee.mobileStatus,n.status&&"approved"===n.status.toLowerCase()&&Ee.approvedStatus,n.status&&"declined"===n.status.toLowerCase()&&Ee.declinedStatus,(!n.status||"pending"===n.status.toLowerCase())&&Ee.pendingStatus],children:n.status?n.status.charAt(0).toUpperCase()+n.status.slice(1).toLowerCase():"Pending"}),(0,p.jsx)(c.default,{style:Ee.mobileDate,children:m(n)})]})]}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(c.default,{style:[Ee.cell,{flex:1,textAlign:"center"}],children:n.cid}),(0,p.jsx)(c.default,{style:[Ee.cell,{flex:3,textAlign:"center"}],children:n.name}),(0,p.jsx)(c.default,{style:[Ee.cell,{flex:2,textAlign:"center"},n.status&&"approved"===n.status.toLowerCase()&&Ee.approvedStatus,n.status&&"declined"===n.status.toLowerCase()&&Ee.declinedStatus,(!n.status||"pending"===n.status.toLowerCase())&&Ee.pendingStatus],children:n.status?n.status.charAt(0).toUpperCase()+n.status.slice(1).toLowerCase():"Pending"}),(0,p.jsx)(c.default,{style:[Ee.cell,{flex:3,textAlign:"center"}],children:m(n)}),(0,p.jsx)(s.default,{style:{flex:1,alignItems:"center"},children:(0,p.jsx)(f.default,{style:Ee.viewBtn,onPress:function(){t.navigate("OpsPendingLoanDetail",{client:n,backScreen:"OpsPendingList"})},children:(0,p.jsx)(c.default,{style:Ee.viewBtnText,children:"View"})})})]})})},contentContainerStyle:Ee.listContainer})]})}var Ee=g.default.create({container:{padding:b.default.select({web:20,default:16}),backgroundColor:"#f6f6f6",flex:1},headerRow:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:b.default.select({web:20,default:16})},headerRowMobile:{marginBottom:12},title:{fontSize:b.default.select({web:22,default:20}),fontWeight:"bold"},titleMobile:{fontSize:18},dashboardBtn:{backgroundColor:"#007bff",paddingVertical:b.default.select({web:10,default:8}),paddingHorizontal:b.default.select({web:16,default:12}),borderRadius:8},dashboardBtnMobile:{paddingVertical:8,paddingHorizontal:10},btnText:{color:"#fff",fontWeight:"600",fontSize:b.default.select({web:16,default:14})},btnTextMobile:{fontSize:12},searchBar:{flexDirection:"row",marginBottom:b.default.select({web:16,default:12})},searchBarMobile:{marginBottom:10},searchInput:{backgroundColor:"#fff",borderRadius:8,padding:b.default.select({web:12,default:10}),flex:1,fontSize:b.default.select({web:16,default:14}),borderWidth:1,borderColor:"#ddd"},searchInputMobile:{padding:8,fontSize:14},tableHeader:{flexDirection:"row",backgroundColor:"#e9ecef",paddingVertical:12,paddingHorizontal:8,marginBottom:4,borderRadius:8},headerCell:{fontWeight:"bold",fontSize:16,color:"#495057"},row:{flexDirection:"row",backgroundColor:"#fff",paddingVertical:b.default.select({web:12,default:10}),paddingHorizontal:b.default.select({web:8,default:6}),marginBottom:8,borderRadius:8,alignItems:"center",borderWidth:1,borderColor:"#e9ecef"},rowMobile:{padding:12},cell:{fontSize:b.default.select({web:16,default:14}),paddingHorizontal:6,color:"#212529"},mobileContent:{flex:1},mobileName:{fontSize:16,fontWeight:"500",marginBottom:4,color:"#212529"},mobileCid:{fontSize:14,color:"#6c757d",marginBottom:6},mobileStatusRow:{flexDirection:"row",justifyContent:"space-between",alignItems:"center"},mobileStatus:{fontSize:14,fontWeight:"500"},mobileDate:{fontSize:12,color:"#6c757d"},approvedStatus:{color:"#2ecc71",fontWeight:"bold"},pendingStatus:{color:"#000000",fontWeight:"bold"},declinedStatus:{color:"#e74c3c",fontWeight:"bold"},viewBtn:{backgroundColor:"#e9ecef",paddingVertical:8,paddingHorizontal:16,borderRadius:6},viewBtnText:{color:"#495057",fontSize:14,fontWeight:"500"},listContainer:{flexGrow:1}}),Ne=n(45),He=["documents"];function Ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ve(Object(n),!0).forEach((function(t){(0,x.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ue={name:"N/A",age:0,cid:"",email:"N/A",number:"N/A",address:"N/A",input:{paymentHistory:0,creditUtilization:0,creditHistoryLength:0,creditMix:0,newInquiries:0},financial:{monthlyIncome:0,monthlyExpenses:0,assets:0,dti:0},employer:"N/A",position:"N/A",loans:{approved:{amount:0,status:"None"},pending:{amount:0,status:"None"},loanHistory:[]},loanBalance:{amount:0,dueDate:"N/A"},documents:{applicationDocs:B.APPLICATION_DOCS,signedDocuments:[]}};function _e(e){var t,n,o,r,a=e.navigation,g=e.route,b=G(),y=b.updateLoan,x=b.updateLoanAmount,w=(0,l.useContext)(m).currentUser,j=(0,h.default)().width<768,v=(0,l.useState)(null),C=(0,d.default)(v,2),S=C[0],T=C[1],B=(0,l.useState)(null),M=(0,d.default)(B,2),P=M[0],O=M[1],A=(0,l.useState)(!1),k=(0,d.default)(A,2),z=k[0],L=k[1],R=(0,l.useState)(""),I=(0,d.default)(R,2),W=I[0],E=I[1],N=(0,l.useState)(""),V=(0,d.default)(N,2),F=V[0],U=V[1],_=(0,l.useState)(""),J=(0,d.default)(_,2),q=J[0],K=J[1],Y=(0,l.useState)(null),Q=(0,d.default)(Y,2),X=(Q[0],Q[1]),Z=function(){var e=(0,i.default)((function*(e){try{var t=yield fetch("http://localhost:5600/client-loan-data/"+e);if(!t.ok)throw new Error("Failed to fetch loan data");var n=yield t.json();O(n)}catch(o){console.error("Error fetching loan data:",o),U("Failed to fetch loan data")}}));return function(t){return e.apply(this,arguments)}}();if((0,l.useEffect)((function(){var e,t;if((null==S||null==(e=S.loans)||null==(t=e.loanHistory)?void 0:t.length)>0){var n=(0,H.default)(S.loans.loanHistory).sort((function(e,t){return new Date(t.dateApplied)-new Date(e.dateApplied)}))[0];X(n)}}),[S]),(0,l.useEffect)((function(){var e;if(console.log("Route params:",g.params),null!=(e=g.params)&&e.client){var t,n;console.log("Initializing client with:",g.params.client);var o=Fe(Fe(Fe({},Ue),g.params.client),{},{documents:{applicationDocs:(null==(t=g.params.client.documents)?void 0:t.applicationDocs)||Ue.documents.applicationDocs,signedDocuments:(null==(n=g.params.client.documents)?void 0:n.signedDocuments)||[]}});console.log("Setting client with CID:",o.cid),T(o),o.cid&&Z(o.cid)}}),[null==(t=g.params)?void 0:t.client]),!S)return(0,p.jsx)(s.default,{style:Je.container,children:(0,p.jsx)(c.default,{children:"Loading..."})});var $=function(){var e=(0,i.default)((function*(){try{U(""),console.log("Declining loan for CID:",S.cid);try{if(!(yield fetch("http://localhost:5600/clients")).ok)throw new Error("API server is not responding properly")}catch(t){throw new Error("API server is not running. Please start the credit-scoring-api server first.")}var e=yield D.processLoanDecision(S.cid,"declined");console.log("API Response:",e),yield y(S.cid,{status:"Declined",decidedAt:(new Date).toISOString()}),console.log("Local state updated"),K("Loan application declined"),setTimeout((function(){a.replace("OpsPendingList")}),1e3)}catch(t){console.error("Error declining loan:",t),U(t.message||"Failed to decline loan"),setTimeout((function(){return U("")}),3e3)}}));return function(){return e.apply(this,arguments)}}(),ee=(function(){var e=(0,i.default)((function*(){try{U(""),console.log("Approving loan for CID:",S.cid);try{if(!(yield fetch("http://localhost:5600/clients")).ok)throw new Error("API server is not responding properly")}catch(o){throw new Error("API server is not running. Please start the credit-scoring-api server first.")}var e=(null==P?void 0:P.approvedAmount)||"0",t=(S.documents,(0,Ne.default)(S,He)),n=yield D.processLoanDecision(S.cid,"approved",Fe({approvedAmount:null==P?void 0:P.approvedAmount},t));console.log("API Response:",n),yield y(S.cid,{status:"Approved",decidedAt:(new Date).toISOString(),approvedAmount:e}),console.log("Local state updated"),K("Loan application approved"),setTimeout((function(){a.replace("OpsPendingList")}),1e3)}catch(o){console.error("Error approving loan:",o),U(o.message||"Failed to approve loan"),setTimeout((function(){return U("")}),3e3)}}))}(),function(){var e=(0,i.default)((function*(){try{var e,t=parseInt(W);if(!t||t<=0)return void U("Please enter a valid amount");var n=(null==P?void 0:P.approvedAmount)||0;if(t>n)return void U("Amount cannot exceed approved amount of \u20b1"+n.toLocaleString());if(null!=(e=S.loans)&&e.loanHistory&&S.loans.loanHistory.length>0){var o=(0,H.default)(S.loans.loanHistory).sort((function(e,t){return new Date(t.dateApplied)-new Date(e.dateApplied)}))[0],l=t+.05*t,r=Fe(Fe({},o),{},{amount:t,amountDue:{total:l}}),a=Fe(Fe({},S),{},{loans:Fe(Fe({},S.loans),{},{loanHistory:S.loans.loanHistory.map((function(e){return e.dateApplied===o.dateApplied?r:e}))})});yield x(S.cid,t),X(r),T(a),yield Z(S.cid),L(!1),K("Loan amount updated successfully")}}catch(F){U("Failed to update loan amount"),console.error("Error updating loan amount:",F)}}));return function(){return e.apply(this,arguments)}}()),te=function(){var e=.35,t=.3,n=.15,o=.1,l=.1,r=S.input,a=e*(r.paymentHistory/100)+t*(1-r.creditUtilization/100)+n*Math.min(r.creditHistoryLength/60,1)+o*(r.creditMix/100)+l*(1-r.newInquiries/100);return Math.round(300+550*a)},ne=function(e){return e>=800?"Exceptional":e>=740?"Very Good":e>=670?"Good":e>=580?"Fair":"Poor"};return(0,p.jsxs)(le.default,{style:Je.container,showsVerticalScrollIndicator:!1,children:[(0,p.jsxs)(s.default,{style:[Je.topbar,j&&Je.topbarMobile],children:[(0,p.jsxs)(c.default,{style:[Je.logo,j&&Je.logoMobile],children:[(0,p.jsx)(c.default,{style:{color:"#0066ff"},children:"Loan"}),"Siya"]}),(0,p.jsx)(c.default,{style:[Je.role,j&&Je.roleMobile],children:"ops"===(null==w?void 0:w.role)?"Operations Manager":(null==w?void 0:w.username)||"Operations Manager"})]}),(0,p.jsxs)(s.default,{style:[Je.content,j&&Je.contentMobile],children:[(0,p.jsxs)(s.default,{style:[Je.left,j&&Je.leftMobile,j&&{marginBottom:"25%"}],children:[(0,p.jsx)(c.default,{style:[Je.sectionTitle,j&&Je.sectionTitleMobile],children:"Client Profile"}),(0,p.jsxs)(s.default,{style:Je.detailsContainer,children:[(0,p.jsx)(c.default,{style:Je.subTitle,children:"Personal Details"}),(0,p.jsxs)(c.default,{children:[(0,p.jsx)(c.default,{style:Je.bold,children:"Name:"})," ",S.name]}),(0,p.jsxs)(c.default,{children:[(0,p.jsx)(c.default,{style:Je.bold,children:"Age:"})," ",S.age]}),(0,p.jsxs)(c.default,{children:[(0,p.jsx)(c.default,{style:Je.bold,children:"CID:"})," ",S.cid]}),(0,p.jsxs)(c.default,{children:[(0,p.jsx)(c.default,{style:Je.bold,children:"Email:"})," ",S.email]}),(0,p.jsxs)(c.default,{children:[(0,p.jsx)(c.default,{style:Je.bold,children:"Number:"})," ",S.number]}),(0,p.jsxs)(c.default,{children:[(0,p.jsx)(c.default,{style:Je.bold,children:"Address:"})," ",S.address]})]}),(0,p.jsx)(c.default,{style:[Je.subTitle,{marginTop:j?8:12,marginBottom:j?4:6}],children:"Uploaded Documents"}),(0,p.jsxs)(s.default,{style:Je.documentCategory,children:[(0,p.jsx)(c.default,{style:Je.categoryText,children:"Application Documents"}),(0,p.jsx)(f.default,{style:Je.previewBtn,onPress:(0,i.default)((function*(){try{if(!S.cid)return console.error("No client CID available"),void alert("Error: Client ID not found");var e=yield D.getDocumentDates(S.cid);if(0===e.length)return void alert("No documents found for this client.");var t=e.sort((function(e,t){return t.date.localeCompare(e.date)})),n=[],o=null;for(var l of t){var r=(yield D.getDocumentsByDate(S.cid,l.date)).filter((function(e){var t;return!((null==(t=e.name)?void 0:t.toLowerCase())||"").endsWith(".pdf")}));if(r.length>0){n=r,o=l.date;break}}n.length>0?a.navigate("DocumentPreview",{cid:S.cid,title:"Application Documents",documents:n,latestDate:o}):alert("No application documents found")}catch(F){console.error("Error loading documents:",F),alert("Error loading documents. Please try again.")}})),children:(0,p.jsx)(c.default,{style:Je.previewText,children:"View"})})]}),(0,p.jsxs)(s.default,{style:[Je.documentCategory,{marginBottom:j?4:10}],children:[(0,p.jsx)(c.default,{style:Je.categoryText,children:"Signed Documents"}),(0,p.jsx)(f.default,{style:Je.previewBtn,onPress:(0,i.default)((function*(){try{var e=yield D.getDocumentDates(S.cid);if(0===e.length)return void alert("No documents found for this client.");var t=e.sort((function(e,t){return t.date.localeCompare(e.date)})),n=[],o=null;for(var l of t){var r=(yield D.getDocumentsByDate(S.cid,l.date)).filter((function(e){var t;return((null==(t=e.name)?void 0:t.toLowerCase())||"").endsWith(".pdf")}));if(r.length>0){n=r,o=l.date;break}}if(n.length>0){var i=n.map((function(e){return Fe(Fe({},e),{},{displayName:e.name.includes("promissory-note")?"Promissory Note":"Signed Agreement"})}));a.navigate("DocumentPreview",{cid:S.cid,title:"Signed Documents",documents:i,latestDate:o})}else alert("No signed documents found. Documents will be available after loan approval.")}catch(F){console.error("Error loading documents:",F),alert("Error loading documents. Please try again.")}})),children:(0,p.jsx)(c.default,{style:Je.previewText,children:"View"})})]})]}),(0,p.jsxs)(s.default,{style:[Je.right,j&&Je.rightMobile,j&&{marginTop:"-450px"}],children:[(0,p.jsxs)(s.default,{style:Je.detailsContainer,children:[(0,p.jsx)(c.default,{style:Je.subTitle,children:"Financial Record"}),(0,p.jsxs)(c.default,{children:["Monthly Income: \u20b1",S.financial.monthlyIncome.toLocaleString()]}),(0,p.jsxs)(c.default,{children:["Monthly Expenses: \u20b1",S.financial.monthlyExpenses.toLocaleString()]}),(0,p.jsxs)(c.default,{children:["Saving and Assets: \u20b1",S.financial.assets.toLocaleString()]}),(0,p.jsxs)(c.default,{children:["Debt to Income Ratio: ",S.financial.dti,"%"]})]}),(0,p.jsxs)(s.default,{style:[Je.detailsContainer,{marginTop:16}],children:[(0,p.jsx)(c.default,{style:Je.subTitle,children:"Employment or Business info"}),(0,p.jsx)(c.default,{children:S.employer}),(0,p.jsx)(c.default,{children:S.position})]}),(0,p.jsx)(c.default,{style:[Je.subTitle,{marginTop:j?8:16}],children:"Loan History"}),(0,p.jsx)(f.default,{style:Je.viewBtn,onPress:function(){return a.navigate("LoanHistory",{clientId:S.cid,userRole:"ops",fromPendingDetail:!0})},children:(0,p.jsx)(c.default,{style:{color:"#fff",fontWeight:"600",fontSize:16},children:"View History"})}),(0,p.jsxs)(s.default,{style:[Je.loanDetails,j&&{marginTop:8}],children:[(0,p.jsx)(c.default,{style:Je.subTitle,children:"Approved by Loan Officer"}),(0,p.jsxs)(c.default,{children:["\u20b1",(null==P||null==(n=P.approvedAmount)?void 0:n.toLocaleString())||"0"]}),(0,p.jsx)(c.default,{style:Je.subTitle,children:"Recommended Loan Amount (Based on Credit Score)"}),(0,p.jsxs)(c.default,{children:["\u20b1",(null==P||null==(o=P.recommendedAmount)?void 0:o.toLocaleString())||"0"]}),(0,p.jsx)(c.default,{style:Je.subTitle,children:"Purpose of Loan"}),(0,p.jsx)(c.default,{children:(null==P?void 0:P.purpose)||"N/A"}),(0,p.jsx)(c.default,{style:Je.subTitle,children:"Description of Purpose"}),(0,p.jsx)(c.default,{children:(null==P?void 0:P.description)||"N/A"}),(0,p.jsx)(c.default,{style:Je.subTitle,children:"Loan Term (in months)"}),(0,p.jsx)(c.default,{children:(null==P?void 0:P.term)||"N/A"}),(0,p.jsx)(c.default,{style:Je.subTitle,children:"Repayment Method"}),(0,p.jsx)(c.default,{children:(null==P?void 0:P.repaymentMethod)||"Monthly"}),(0,p.jsx)(c.default,{style:Je.subTitle,children:"Interest Rate"}),(0,p.jsxs)(c.default,{children:[(null==P?void 0:P.interestRate)||"5.0","%"]}),(0,p.jsx)(c.default,{style:Je.subTitle,children:"Amount Due"}),(0,p.jsxs)(c.default,{children:["\u20b1",(null==P?void 0:P.amountDue)||"0"]})]}),(0,p.jsxs)(s.default,{style:Je.creditBox,children:[(0,p.jsx)(c.default,{style:[Je.subTitle,{marginBottom:4}],children:"Credit Score"}),(0,p.jsx)(c.default,{style:Je.creditScore,children:(null==P?void 0:P.creditScore)||te()}),(0,p.jsx)(c.default,{style:[Je.subTitle,{marginTop:12}],children:"Risk Category"}),(0,p.jsx)(c.default,{style:{color:["Exceptional","Very Good","Good"].includes((null==P?void 0:P.riskCategory)||ne(te()))?"#2ecc71":"#e74c3c"},children:(null==P?void 0:P.riskCategory)||ne(te())}),(0,p.jsx)(c.default,{style:[Je.subTitle,{marginTop:12}],children:"Recommendation"}),(0,p.jsx)(c.default,{style:{color:"APPROVE"===(null==P?void 0:P.recommendation)?"#2ecc71":"#e74c3c"},children:(null==P?void 0:P.recommendation)||(te()>=670?"Approved":"Not Approved")})]}),(0,p.jsxs)(s.default,{style:[Je.actionRow,j&&Je.actionRowMobile],children:[(0,p.jsx)(f.default,{style:[Je.backBtn,j&&Je.btnMobile],onPress:function(){return a.goBack()},children:(0,p.jsx)(c.default,{children:"\u2190 Back"})}),(0,p.jsx)(f.default,{style:[Je.editBtn,j&&Je.btnMobile],onPress:function(){var e,t=(null==P||null==(e=P.approvedAmount)?void 0:e.toString())||"0";E(t),L(!0)},children:(0,p.jsx)(c.default,{children:"Edit"})}),(0,p.jsx)(f.default,{style:[Je.declineBtn,j&&Je.btnMobile],onPress:$,children:(0,p.jsx)(c.default,{style:{color:"#fff"},children:"Decline"})}),(0,p.jsx)(f.default,{style:[Je.approveBtn,j&&Je.btnMobile],onPress:function(){return a.navigate("SignatureAgreement",{client:S,loanData:P})},children:(0,p.jsx)(c.default,{style:{color:"#fff"},children:"Sign Agreement"})})]})]})]}),(0,p.jsx)(re.default,{visible:z,transparent:!0,animationType:"fade",children:(0,p.jsx)(s.default,{style:Je.modalOverlay,children:(0,p.jsxs)(s.default,{style:[Je.modalContent,j&&Je.modalContentMobile],children:[(0,p.jsx)(c.default,{style:[Je.modalTitle,j&&Je.modalTitleMobile],children:"Edit Loan Amount"}),(0,p.jsxs)(c.default,{style:[Je.modalSubtitle,j&&Je.modalSubtitleMobile],children:["Maximum amount: \u20b1",(null==P||null==(r=P.approvedAmount)?void 0:r.toLocaleString())||"0"]}),(0,p.jsx)(u.default,{style:[Je.amountInput,j&&Je.amountInputMobile],value:W,onChangeText:function(e){E(e.replace(/[^0-9]/g,"")),U("")},keyboardType:"numeric",placeholder:"Enter amount",placeholderTextColor:"#999"}),F?(0,p.jsx)(c.default,{style:[Je.errorText,j&&Je.errorTextMobile],children:F}):null,(0,p.jsxs)(s.default,{style:[Je.modalButtons,j&&Je.modalButtonsMobile],children:[(0,p.jsx)(f.default,{style:[Je.cancelBtn,j&&Je.cancelBtnMobile],onPress:function(){L(!1),U("")},children:(0,p.jsx)(c.default,{style:[Je.modalButtonText,j&&Je.modalButtonTextMobile],children:"Cancel"})}),(0,p.jsx)(f.default,{style:[Je.saveBtn,j&&Je.saveBtnMobile],onPress:ee,children:(0,p.jsx)(c.default,{style:[Je.modalButtonTextWhite,j&&Je.modalButtonTextWhiteMobile],children:"Save Changes"})})]})]})})}),q?(0,p.jsx)(s.default,{style:Je.successMessage,children:(0,p.jsx)(c.default,{style:Je.successText,children:q})}):null,F?(0,p.jsx)(s.default,{style:Je.errorMessage,children:(0,p.jsx)(c.default,{style:Je.errorText,children:F})}):null]})}var Ge,Je=g.default.create({documentCategory:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",backgroundColor:"#f5f5f5",padding:16,marginBottom:10,borderRadius:6,borderWidth:1,borderColor:"#e0e0e0"},categoryText:{fontSize:15,color:"#333",fontWeight:"500"},previewBtn:{backgroundColor:"#0066ff",paddingHorizontal:12,paddingVertical:4,borderRadius:6},previewText:{color:"#fff"},modalOverlay:{flex:1,backgroundColor:"rgba(0,0,0,0.5)",justifyContent:"center",alignItems:"center",padding:20},modalContent:{backgroundColor:"white",padding:b.default.select({web:24,default:20}),borderRadius:8,width:b.default.select({web:"80%",default:"90%"}),maxWidth:500,maxHeight:"80%"},modalContentMobile:{padding:16,width:"95%",margin:10},modalTitle:{fontSize:18,fontWeight:"bold",marginBottom:10,textAlign:"center"},modalTitleMobile:{fontSize:16},modalSubtitle:{marginBottom:15,color:"#666",textAlign:"center"},modalSubtitleMobile:{fontSize:14,marginBottom:12},amountInput:{borderWidth:1,borderColor:"#ddd",borderRadius:6,padding:12,marginBottom:15,fontSize:16},amountInputMobile:{padding:15,fontSize:16,minHeight:48},modalButtons:{flexDirection:"row",justifyContent:"space-between",gap:12},modalButtonsMobile:{flexDirection:"column",gap:10},cancelBtn:{backgroundColor:"#ddd",padding:12,borderRadius:6,flex:1,alignItems:"center",minHeight:44,justifyContent:"center"},cancelBtnMobile:{width:"100%",detailRow:{marginBottom:8},detailLabel:{fontWeight:"bold",fontSize:14,color:"#333",marginBottom:2},detailLabelMobile:{fontSize:13},detailValue:{fontSize:14,color:"#555",flexWrap:"wrap"},detailValueMobile:{fontSize:14,lineHeight:20},personalDetailsGrid:{gap:8},personalDetailsGridMobile:{gap:6},financialGrid:{gap:8},employmentGrid:{gap:8},loanDetails:{backgroundColor:"#f8f9fa",padding:16,borderRadius:8,marginTop:16,borderWidth:1,borderColor:"#e0e0e0"},loanDetailsMobile:{padding:12,marginTop:12},loanDetailRow:{marginBottom:12},loanDetailValue:{fontSize:14,color:"#555",marginTop:4,fontWeight:"500"},loanDetailValueMobile:{fontSize:14,lineHeight:20},loanHistorySection:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginTop:16,marginBottom:8},loanHistorySectionMobile:{flexDirection:"column",alignItems:"flex-start",gap:8},viewBtn:{backgroundColor:"#e9ecef",paddingHorizontal:16,paddingVertical:8,borderRadius:6,alignSelf:"flex-start",minHeight:36,justifyContent:"center"},viewBtnMobile:{paddingHorizontal:24,paddingVertical:14,minHeight:48,alignSelf:"stretch",backgroundColor:"#0066ff",flexDirection:"row",alignItems:"center",justifyContent:"center",gap:8},viewBtnText:{fontSize:14,color:"#333",fontWeight:"500"},viewBtnTextMobile:{fontSize:14,textAlign:"center"},sectionTitleMobile:{fontSize:16},subTitleMobile:{fontSize:14},detailsContainerMobile:{padding:12,marginBottom:12},creditBoxMobile:{padding:12,marginTop:12},creditScoreMobile:{fontSize:28,marginBottom:6},riskCategoryMobile:{fontSize:14,fontWeight:"600"},recommendationMobile:{fontSize:14,fontWeight:"600"},actionRowMobile:{flexDirection:"column",gap:10,marginTop:16},backBtnMobile:{width:"100%",paddingVertical:12,minHeight:48,justifyContent:"center"},editBtnMobile:{width:"100%",paddingVertical:12,minHeight:48,justifyContent:"center",backgroundColor:"#6c757d"},declineBtnMobile:{width:"100%",paddingVertical:12,minHeight:48,justifyContent:"center"},approveBtnMobile:{width:"100%",paddingVertical:12,minHeight:48,justifyContent:"center"},buttonText:{fontSize:14,fontWeight:"500",textAlign:"center"},buttonTextMobile:{fontSize:16},buttonTextWhite:{color:"#fff",fontSize:14,fontWeight:"500",textAlign:"center"},buttonTextWhiteMobile:{fontSize:16},errorTextMobile:{fontSize:14,textAlign:"center"},minHeight:48},saveBtn:{backgroundColor:"#007bff",padding:12,borderRadius:6,flex:1,alignItems:"center",minHeight:44,justifyContent:"center"},saveBtnMobile:{width:"100%",minHeight:48},modalButtonText:{fontSize:14,fontWeight:"500"},modalButtonTextMobile:{fontSize:16},modalButtonTextWhite:{color:"#fff",fontSize:14,fontWeight:"500"},modalButtonTextWhiteMobile:{fontSize:16},documentButton:{backgroundColor:"#ffffff",padding:b.default.select({web:16,default:14}),borderRadius:8,marginBottom:12,borderWidth:1,borderColor:"#e0e0e0",elevation:1,shadowColor:"#000",shadowOffset:{width:0,height:1},shadowOpacity:.1,shadowRadius:2},documentButtonText:{fontSize:b.default.select({web:16,default:15}),color:"#333",fontWeight:"500",textAlign:"center"},closeButton:{backgroundColor:"#f8f9fa",padding:b.default.select({web:16,default:14}),borderRadius:8,marginTop:16,borderWidth:1,borderColor:"#dee2e6"},closeButtonText:{color:"#333",fontSize:b.default.select({web:16,default:15}),fontWeight:"500",textAlign:"center"},errorText:{color:"#e74c3c",marginBottom:10},successMessage:{position:"absolute",top:20,right:20,backgroundColor:"#2ecc71",padding:10,borderRadius:6},successText:{color:"white",fontWeight:"bold"},errorMessage:{position:"absolute",top:20,right:20,backgroundColor:"#e74c3c",padding:10,borderRadius:6},container:{backgroundColor:"#f6f6f6",flex:1},topbar:{flexDirection:"row",justifyContent:"space-between",backgroundColor:"#ddd",padding:b.default.select({web:20,default:16}),alignItems:"center"},topbarMobile:{padding:12},logo:{fontSize:b.default.select({web:22,default:20}),fontWeight:"bold"},logoMobile:{fontSize:18},role:{fontSize:b.default.select({web:14,default:12})},roleMobile:{fontSize:12},content:{flexDirection:"row",padding:b.default.select({web:20,default:16}),flexWrap:b.default.select({web:"nowrap",default:"wrap"})},contentMobile:{flexDirection:"column",padding:12,gap:0},left:{flex:b.default.select({web:1.1,default:1}),paddingRight:b.default.select({web:20,default:0}),borderRightWidth:b.default.select({web:1,default:0}),borderColor:"#ccc",minWidth:b.default.select({web:300,default:"100%"}),marginBottom:b.default.select({web:0,default:0})},leftMobile:{width:"100%",paddingRight:0,borderRightWidth:0,marginBottom:0},right:{flex:b.default.select({web:1.3,default:1}),paddingLeft:b.default.select({web:20,default:0}),minWidth:b.default.select({web:300,default:"100%"})},rightMobile:{width:"100%",paddingLeft:0,marginTop:0},detailsContainer:{backgroundColor:"#fff",padding:b.default.select({web:20,default:16}),borderRadius:8,borderWidth:1,borderColor:"#e0e0e0",marginBottom:16,width:"100%",alignSelf:"stretch"},sectionTitle:{fontWeight:"bold",fontSize:16,marginBottom:10},subTitle:{fontWeight:"bold",marginTop:10,marginBottom:6},bold:{fontWeight:"bold"},documentRow:{flexDirection:"row",justifyContent:"space-between",backgroundColor:"#eaeaea",paddingVertical:4,paddingHorizontal:8,marginBottom:4,borderRadius:4},docText:{fontSize:13,color:"#333"},viewBtn:{backgroundColor:"#0066ff",paddingHorizontal:32,paddingVertical:12,borderRadius:8,flexDirection:"row",alignItems:"center",gap:8,minWidth:120,justifyContent:"center"},creditBox:{backgroundColor:"#f8f9fa",padding:b.default.select({web:20,default:16}),borderRadius:8,marginTop:20,borderWidth:1,borderColor:"#e0e0e0"},creditScore:{fontSize:32,fontWeight:"bold",color:"#2ecc71",marginBottom:8},loanBox:{backgroundColor:"#f0f0f0",padding:12,marginTop:20,borderRadius:8},actionRow:{flexDirection:"row",gap:b.default.select({web:12,default:8}),marginTop:20,flexWrap:"wrap",alignItems:"center",width:"100%"},actionRowMobile:{justifyContent:"space-between",gap:8,flexDirection:b.default.select({web:"row",default:"column"})},btnMobile:{width:"100%",marginVertical:4,paddingVertical:12,alignItems:"center"},backBtn:{backgroundColor:"#ddd",paddingVertical:b.default.select({web:8,default:6}),paddingHorizontal:b.default.select({web:16,default:12}),borderRadius:6},editBtn:{backgroundColor:"#bbb",paddingVertical:b.default.select({web:8,default:6}),paddingHorizontal:b.default.select({web:16,default:12}),borderRadius:6},declineBtn:{backgroundColor:"#e74c3c",paddingVertical:b.default.select({web:8,default:6}),paddingHorizontal:b.default.select({web:16,default:12}),borderRadius:6},approveBtn:{backgroundColor:"#2ecc71",paddingVertical:b.default.select({web:8,default:6}),paddingHorizontal:b.default.select({web:16,default:12}),borderRadius:6}}),qe=n(1690);function Ke(e){var t,n,o=e.navigation,r=e.route,a=(0,h.default)().width<768,i=(0,l.useRef)(),u=(0,l.useState)(""),g=(0,d.default)(u,2),y=g[0],x=g[1],w=(0,l.useState)(!1),j=(0,d.default)(w,2),v=j[0],C=j[1],S=(0,l.useContext)(m).currentUser,T=r.params,B=T.client,D=T.loanData,M=function(e){console.log("Signature captured"),x(e),C(!0)},P={style:{border:"none",borderRadius:"6px",backgroundColor:"#fff",width:"100%",height:"100%",display:"block"},className:"signature-canvas"};return(0,p.jsxs)(s.default,{style:Ye.container,children:[(0,p.jsxs)(s.default,{style:[Ye.header,a&&Ye.headerMobile],children:[(0,p.jsx)(f.default,{style:Ye.backBtn,onPress:function(){return o.goBack()},children:(0,p.jsx)(c.default,{style:Ye.backText,children:"\u2190 Back"})}),(0,p.jsxs)(s.default,{style:Ye.headerContent,children:[(0,p.jsxs)(c.default,{style:[Ye.title,a&&Ye.titleMobile],children:[(0,p.jsx)(c.default,{style:{color:"#0066ff"},children:"Loan"}),"Siya - Agreement Signature"]}),(0,p.jsxs)(c.default,{style:[Ye.subtitle,a&&Ye.subtitleMobile],children:["Client: ",B.name," | Amount: \u20b1",(null==D||null==(t=D.approvedAmount)?void 0:t.toLocaleString())||"0"]})]})]}),(0,p.jsxs)(s.default,{style:[Ye.agreementSummary,a&&Ye.agreementSummaryMobile],children:[(0,p.jsx)(c.default,{style:[Ye.summaryTitle,a&&Ye.summaryTitleMobile],children:"Loan Agreement Summary"}),(0,p.jsxs)(s.default,{style:Ye.summaryRow,children:[(0,p.jsx)(c.default,{style:Ye.summaryLabel,children:"Client Name:"}),(0,p.jsx)(c.default,{style:Ye.summaryValue,children:B.name})]}),(0,p.jsxs)(s.default,{style:Ye.summaryRow,children:[(0,p.jsx)(c.default,{style:Ye.summaryLabel,children:"Loan Amount:"}),(0,p.jsxs)(c.default,{style:Ye.summaryValue,children:["\u20b1",(null==D||null==(n=D.approvedAmount)?void 0:n.toLocaleString())||"0"]})]}),(0,p.jsxs)(s.default,{style:Ye.summaryRow,children:[(0,p.jsx)(c.default,{style:Ye.summaryLabel,children:"Interest Rate:"}),(0,p.jsxs)(c.default,{style:Ye.summaryValue,children:[(null==D?void 0:D.interestRate)||"5.0","%"]})]}),(0,p.jsxs)(s.default,{style:Ye.summaryRow,children:[(0,p.jsx)(c.default,{style:Ye.summaryLabel,children:"Term:"}),(0,p.jsxs)(c.default,{style:Ye.summaryValue,children:[(null==D?void 0:D.term)||"N/A"," months"]})]}),(0,p.jsxs)(s.default,{style:Ye.summaryRow,children:[(0,p.jsx)(c.default,{style:Ye.summaryLabel,children:"Repayment Method:"}),(0,p.jsx)(c.default,{style:Ye.summaryValue,children:(null==D?void 0:D.repaymentMethod)||"Monthly"})]})]}),(0,p.jsxs)(s.default,{style:[Ye.instructionsContainer,a&&Ye.instructionsContainerMobile],children:[(0,p.jsx)(c.default,{style:[Ye.instructionsTitle,a&&Ye.instructionsTitleMobile],children:"Digital Signature Required"}),(0,p.jsx)(c.default,{style:[Ye.instructionsText,a&&Ye.instructionsTextMobile],children:"As the Operations Manager, please sign below to approve this loan agreement. Your signature will be embedded in the promissory note document."})]}),(0,p.jsxs)(s.default,{style:[Ye.signatureContainer,a&&Ye.signatureContainerMobile],children:[(0,p.jsx)(c.default,{style:[Ye.signatureLabel,a&&Ye.signatureLabelMobile],children:"Operations Manager Signature:"}),(0,p.jsx)(s.default,{style:[Ye.signatureCanvas,a&&Ye.signatureCanvasMobile],children:"web"===b.default.OS?(0,p.jsxs)("div",{style:{width:"100%",height:"100%",position:"relative"},children:[(0,p.jsx)(Ge,{ref:i,canvasProps:P,penColor:"#000000",backgroundColor:"#ffffff",dotSize:1.5,minWidth:.8,maxWidth:2.5,throttle:12,velocityFilterWeight:.8,onEnd:function(){}}),(0,p.jsx)("div",{style:{position:"absolute",bottom:"10px",right:"10px"},children:(0,p.jsx)("button",{onClick:function(){if(i.current&&!i.current.isEmpty()){var e=i.current.toDataURL("image/png");M(e)}},style:{backgroundColor:"#2ecc71",color:"white",border:"none",borderRadius:"4px",padding:"6px 12px",fontSize:"12px",cursor:"pointer"},children:"Save"})})]}):(0,p.jsx)(Ge,{ref:i,onOK:M,onEmpty:function(){console.log("Signature is empty"),qe.default.alert("Empty Signature","Please provide a signature before proceeding.")},descriptionText:"",clearText:"Clear",confirmText:"Save",autoClear:!1,imageType:"image/png",penColor:"#000000",backgroundColor:"#ffffff",minWidth:1,maxWidth:3,webStyle:"\n                .m-signature-pad {\n                  position: relative;\n                  font-size: 10px;\n                  width: 100%;\n                  height: 100%;\n                  border: 2px solid #ddd;\n                  border-radius: 8px;\n                  background-color: #fff;\n                }\n                .m-signature-pad--body {\n                  position: relative;\n                  overflow: hidden;\n                  width: 100%;\n                  height: 100%;\n                }\n                .m-signature-pad--body canvas {\n                  position: relative;\n                  left: 0;\n                  top: 0;\n                  width: 100%;\n                  height: 100%;\n                  touch-action: none;\n                  background-color: #fff;\n                }\n                .m-signature-pad--footer {\n                  position: absolute;\n                  left: 20px;\n                  right: 20px;\n                  bottom: 20px;\n                  height: 40px;\n                }\n                .m-signature-pad--footer .clear,\n                .m-signature-pad--footer .save {\n                  float: left;\n                  margin: 0 5px 5px 0;\n                  background: #0066ff;\n                  color: #fff;\n                  border: none;\n                  border-radius: 4px;\n                  padding: 8px 12px;\n                  cursor: pointer;\n                  font-size: 12px;\n                }\n                .m-signature-pad--footer .clear {\n                  background: #e74c3c;\n                }\n              "})}),v&&(0,p.jsx)(c.default,{style:[Ye.signatureStatus,a&&Ye.signatureStatusMobile],children:"\u2713 Signature captured successfully"})]}),(0,p.jsxs)(s.default,{style:[Ye.actionButtons,a&&Ye.actionButtonsMobile],children:[(0,p.jsx)(f.default,{style:[Ye.clearButton,a&&Ye.buttonMobile],onPress:function(){console.log("Clearing signature"),"web"===b.default.OS?i.current.clear():i.current.clearSignature(),x(""),C(!1)},children:(0,p.jsx)(c.default,{style:[Ye.clearButtonText,a&&Ye.buttonTextMobile],children:"Clear Signature"})}),(0,p.jsx)(f.default,{style:[Ye.confirmButton,a&&Ye.buttonMobile,!v&&Ye.disabledButton],onPress:function(){v?o.navigate("SignedAgreementPreview",{client:B,loanData:D,signature:y,signerName:(null==S?void 0:S.username)||"Operations Manager"}):qe.default.alert("No Signature","Please provide a signature before proceeding.")},disabled:!v,children:(0,p.jsx)(c.default,{style:[Ye.confirmButtonText,a&&Ye.buttonTextMobile,!v&&Ye.disabledButtonText],children:"Preview Agreement"})})]})]})}"web"===b.default.OS&&n(2607),Ge="web"===b.default.OS?n(96).default:n(5138).default;var Ye=g.default.create({container:{flex:1,backgroundColor:"#f6f6f6"},header:{flexDirection:"row",alignItems:"center",backgroundColor:"#fff",padding:b.default.select({web:20,default:16}),borderBottomWidth:1,borderBottomColor:"#e0e0e0",shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.1,shadowRadius:4,elevation:3},headerMobile:{padding:12,flexDirection:"column",alignItems:"flex-start"},backBtn:{marginRight:b.default.select({web:20,default:12}),padding:b.default.select({web:8,default:6})},backText:{fontSize:b.default.select({web:16,default:14}),color:"#0066ff",fontWeight:"500"},headerContent:{flex:1},title:{fontSize:b.default.select({web:22,default:18}),fontWeight:"bold",marginBottom:4},titleMobile:{fontSize:16,marginTop:8},subtitle:{fontSize:b.default.select({web:14,default:12}),color:"#666"},subtitleMobile:{fontSize:12},agreementSummary:{backgroundColor:"#fff",margin:b.default.select({web:20,default:16}),padding:b.default.select({web:20,default:16}),borderRadius:8,shadowColor:"#000",shadowOffset:{width:0,height:1},shadowOpacity:.1,shadowRadius:2,elevation:2},agreementSummaryMobile:{margin:12,padding:12},summaryTitle:{fontSize:b.default.select({web:18,default:16}),fontWeight:"bold",marginBottom:b.default.select({web:16,default:12}),color:"#333"},summaryTitleMobile:{fontSize:14,marginBottom:10},summaryRow:{flexDirection:"row",justifyContent:"space-between",marginBottom:b.default.select({web:8,default:6})},summaryLabel:{fontSize:b.default.select({web:14,default:13}),color:"#666",fontWeight:"500"},summaryValue:{fontSize:b.default.select({web:14,default:13}),color:"#333",fontWeight:"600"},instructionsContainer:{backgroundColor:"#fff",marginHorizontal:b.default.select({web:20,default:16}),marginBottom:b.default.select({web:20,default:16}),padding:b.default.select({web:20,default:16}),borderRadius:8,borderLeftWidth:4,borderLeftColor:"#0066ff"},instructionsContainerMobile:{marginHorizontal:12,marginBottom:12,padding:12},instructionsTitle:{fontSize:b.default.select({web:16,default:14}),fontWeight:"bold",color:"#0066ff",marginBottom:b.default.select({web:8,default:6})},instructionsTitleMobile:{fontSize:14},instructionsText:{fontSize:b.default.select({web:14,default:13}),color:"#555",lineHeight:b.default.select({web:20,default:18})},instructionsTextMobile:{fontSize:12,lineHeight:16},signatureContainer:{backgroundColor:"#fff",marginHorizontal:b.default.select({web:20,default:16}),marginBottom:b.default.select({web:20,default:16}),padding:b.default.select({web:20,default:16}),borderRadius:8,shadowColor:"#000",shadowOffset:{width:0,height:1},shadowOpacity:.1,shadowRadius:2,elevation:2},signatureContainerMobile:{marginHorizontal:12,marginBottom:12,padding:12},signatureLabel:{fontSize:b.default.select({web:16,default:14}),fontWeight:"bold",color:"#333",marginBottom:b.default.select({web:12,default:8})},signatureLabelMobile:{fontSize:14},signatureCanvas:{height:b.default.select({web:300,default:200}),borderWidth:2,borderColor:"#ddd",borderRadius:8,backgroundColor:"#fff",overflow:"hidden",position:"relative"},signatureCanvasMobile:{height:180},signatureStatus:{marginTop:b.default.select({web:12,default:8}),fontSize:b.default.select({web:14,default:12}),color:"#2ecc71",fontWeight:"600",textAlign:"center"},signatureStatusMobile:{fontSize:12},actionButtons:{flexDirection:"row",justifyContent:"space-between",paddingHorizontal:b.default.select({web:20,default:16}),paddingBottom:b.default.select({web:20,default:16}),gap:b.default.select({web:16,default:12})},actionButtonsMobile:{flexDirection:"column",paddingHorizontal:12,gap:10},clearButton:{backgroundColor:"#e74c3c",paddingVertical:b.default.select({web:12,default:10}),paddingHorizontal:b.default.select({web:24,default:20}),borderRadius:8,flex:b.default.select({web:1,default:0}),alignItems:"center",justifyContent:"center",minHeight:b.default.select({web:44,default:48})},saveButton:{backgroundColor:"#3498db",paddingVertical:b.default.select({web:12,default:10}),paddingHorizontal:b.default.select({web:24,default:20}),borderRadius:8,flex:b.default.select({web:1,default:0}),alignItems:"center",justifyContent:"center",minHeight:b.default.select({web:44,default:48})},confirmButton:{backgroundColor:"#2ecc71",paddingVertical:b.default.select({web:12,default:10}),paddingHorizontal:b.default.select({web:24,default:20}),borderRadius:8,flex:b.default.select({web:1,default:0}),alignItems:"center",justifyContent:"center",minHeight:b.default.select({web:44,default:48})},disabledButton:{backgroundColor:"#bdc3c7"},buttonMobile:{width:"100%",minHeight:48},clearButtonText:{color:"#fff",fontSize:b.default.select({web:16,default:14}),fontWeight:"600"},saveButtonText:{color:"#fff",fontSize:b.default.select({web:16,default:14}),fontWeight:"600"},confirmButtonText:{color:"#fff",fontSize:b.default.select({web:16,default:14}),fontWeight:"600"},disabledButtonText:{color:"#95a5a6"},buttonTextMobile:{fontSize:16}}),Qe=["documents"];function Xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Ze(e){var t,n=e.navigation,o=e.route,r=(0,h.default)().width<768,a=(0,l.useState)(!1),u=(0,d.default)(a,2),g=u[0],y=u[1],w=(0,l.useState)(null),j=(0,d.default)(w,2),C=j[0],S=j[1],T=(0,l.useState)(""),B=(0,d.default)(T,2),M=B[0],P=B[1],O=(0,l.useState)(!1),A=(0,d.default)(O,2),k=A[0],z=A[1],L=(0,l.useState)(!1),R=(0,d.default)(L,2),I=R[0],W=R[1],E=(0,l.useContext)(m).currentUser,N=G().updateLoan,H=o.params,V=H.client,F=H.loanData,U=H.signature,_=H.signerName;(0,l.useEffect)((function(){J()}),[]);var J=function(){var e=(0,i.default)((function*(){try{y(!0),P("");var e=yield fetch(v+"/generate-promissory-note",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({clientData:{name:V.name,address:V.address,cid:V.cid},loanData:{approvedAmount:(null==F?void 0:F.approvedAmount)||0,interestRate:(null==F?void 0:F.interestRate)||5,term:(null==F?void 0:F.term)||12,repaymentMethod:(null==F?void 0:F.repaymentMethod)||"Monthly"},signature:U,signerName:_||(null==E?void 0:E.username)||"Operations Manager"})});if(!e.ok)throw new Error("Failed to generate PDF");var t=yield e.blob(),n=URL.createObjectURL(t);S(n)}catch(o){console.error("Error generating PDF:",o),P("Failed to generate PDF preview. Please try again.")}finally{y(!1)}}));return function(){return e.apply(this,arguments)}}(),q=function(){var e=(0,i.default)((function*(){try{if(y(!0),P(""),console.log("Starting loan approval process..."),console.log("Client CID:",V.cid),console.log("Loan Data:",F),console.log("Signature present:",!!U),console.log("Signer name:",_),!(yield fetch(v+"/clients")).ok)throw new Error("API server is not responding properly");console.log("API health check passed");V.documents;var e=(0,Ne.default)(V,Qe),t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xe(Object(n),!0).forEach((function(t){(0,x.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({approvedAmount:null==F?void 0:F.approvedAmount,signature:U,signerName:_||(null==E?void 0:E.username)||"Operations Manager"},e);console.log("Sending approval data to API...");var n=yield D.processLoanDecision(V.cid,"approved",t);console.log("API Response:",n),console.log("Updating local state..."),yield N(V.cid,{status:"Approved",decidedAt:(new Date).toISOString(),approvedAmount:null==F?void 0:F.approvedAmount,signedBy:_||(null==E?void 0:E.username)||"Operations Manager",signedAt:(new Date).toISOString()}),console.log("Local state updated successfully"),y(!1),console.log("About to show success alert..."),setTimeout((function(){console.log("Showing success dialog now..."),W(!0)}),100)}catch(o){console.error("Error approving loan:",o),y(!1),P(o.message||"Failed to approve loan"),qe.default.alert("Error",o.message||"Failed to approve loan. Please try again.",[{text:"OK"}])}}));return function(){return e.apply(this,arguments)}}(),K=function(){C&&URL.revokeObjectURL(C),n.goBack()};return g?(0,p.jsxs)(s.default,{style:[$e.container,$e.centerContent],children:[(0,p.jsx)(X.default,{size:"large",color:"#0066ff"}),(0,p.jsx)(c.default,{style:[$e.loadingText,r&&$e.loadingTextMobile],children:C?"Processing loan approval...":"Generating PDF preview..."})]}):(0,p.jsxs)(s.default,{style:$e.container,children:[(0,p.jsxs)(s.default,{style:[$e.header,r&&$e.headerMobile],children:[(0,p.jsx)(f.default,{style:$e.backBtn,onPress:K,children:(0,p.jsx)(c.default,{style:$e.backText,children:"\u2190 Back"})}),(0,p.jsxs)(s.default,{style:$e.headerContent,children:[(0,p.jsxs)(c.default,{style:[$e.title,r&&$e.titleMobile],children:[(0,p.jsx)(c.default,{style:{color:"#0066ff"},children:"Loan"}),"Siya - Agreement Preview"]}),(0,p.jsx)(c.default,{style:[$e.subtitle,r&&$e.subtitleMobile],children:"Review and approve the signed loan agreement"})]})]}),(0,p.jsxs)(s.default,{style:[$e.agreementDetails,r&&$e.agreementDetailsMobile],children:[(0,p.jsx)(c.default,{style:[$e.detailsTitle,r&&$e.detailsTitleMobile],children:"Agreement Summary"}),(0,p.jsxs)(s.default,{style:$e.detailRow,children:[(0,p.jsx)(c.default,{style:$e.detailLabel,children:"Client:"}),(0,p.jsx)(c.default,{style:$e.detailValue,children:V.name})]}),(0,p.jsxs)(s.default,{style:$e.detailRow,children:[(0,p.jsx)(c.default,{style:$e.detailLabel,children:"Amount:"}),(0,p.jsxs)(c.default,{style:$e.detailValue,children:["\u20b1",(null==F||null==(t=F.approvedAmount)?void 0:t.toLocaleString())||"0"]})]}),(0,p.jsxs)(s.default,{style:$e.detailRow,children:[(0,p.jsx)(c.default,{style:$e.detailLabel,children:"Signed By:"}),(0,p.jsx)(c.default,{style:$e.detailValue,children:_||(null==E?void 0:E.username)||"Operations Manager"})]}),(0,p.jsxs)(s.default,{style:$e.detailRow,children:[(0,p.jsx)(c.default,{style:$e.detailLabel,children:"Date:"}),(0,p.jsx)(c.default,{style:$e.detailValue,children:(new Date).toLocaleDateString()})]})]}),(0,p.jsxs)(s.default,{style:[$e.pdfContainer,r&&$e.pdfContainerMobile],children:[(0,p.jsx)(c.default,{style:[$e.pdfTitle,r&&$e.pdfTitleMobile],children:"Signed Promissory Note Preview"}),M?(0,p.jsxs)(s.default,{style:$e.errorContainer,children:[(0,p.jsx)(c.default,{style:[$e.errorText,r&&$e.errorTextMobile],children:M}),(0,p.jsx)(f.default,{style:$e.retryBtn,onPress:J,children:(0,p.jsx)(c.default,{style:$e.retryText,children:"Retry"})})]}):C?(0,p.jsx)(s.default,{style:[$e.pdfPreview,r&&$e.pdfPreviewMobile],children:"web"===b.default.OS?r?(0,p.jsxs)(s.default,{style:$e.mobilePdfContainer,children:[(0,p.jsx)(c.default,{style:$e.mobilePdfText,children:"\u2713 PDF Generated Successfully"}),(0,p.jsx)(c.default,{style:$e.mobilePdfSubtext,children:"Due to mobile browser limitations, please click below to view the signed agreement in a new tab."}),(0,p.jsx)(f.default,{style:$e.viewPdfBtn,onPress:function(){return window.open(C,"_blank")},children:(0,p.jsx)(c.default,{style:$e.viewPdfText,children:"Open Signed Agreement"})})]}):(0,p.jsx)("iframe",{src:C,style:{width:"100%",height:"100%",border:"none",borderRadius:"8px"},title:"Signed Agreement Preview"}):(0,p.jsxs)(s.default,{style:$e.pdfPlaceholder,children:[(0,p.jsx)(c.default,{style:$e.pdfPlaceholderText,children:"PDF Preview Available"}),(0,p.jsx)(f.default,{style:$e.viewPdfBtn,onPress:function(){"web"===b.default.OS&&window.open(C,"_blank")},children:(0,p.jsx)(c.default,{style:$e.viewPdfText,children:"View PDF"})})]})}):(0,p.jsx)(s.default,{style:$e.pdfPlaceholder,children:(0,p.jsx)(c.default,{style:$e.pdfPlaceholderText,children:"Loading PDF preview..."})})]}),(0,p.jsxs)(s.default,{style:[$e.actionButtons,r&&$e.actionButtonsMobile],children:[(0,p.jsx)(f.default,{style:[$e.backToSignBtn,r&&$e.buttonMobile],onPress:K,children:(0,p.jsx)(c.default,{style:[$e.backToSignText,r&&$e.buttonTextMobile],children:"Back to Signature"})}),(0,p.jsx)(f.default,{style:[$e.approveBtn,r&&$e.buttonMobile],onPress:function(){console.log("handleApprove called"),z(!0)},disabled:g||!C,children:(0,p.jsx)(c.default,{style:[$e.approveText,r&&$e.buttonTextMobile],children:"Approve & Complete"})})]}),k&&(0,p.jsx)(s.default,{style:$e.confirmOverlay,children:(0,p.jsxs)(s.default,{style:[$e.confirmDialog,r&&$e.confirmDialogMobile],children:[(0,p.jsx)(c.default,{style:[$e.confirmTitle,r&&$e.confirmTitleMobile],children:"Confirm Approval"}),(0,p.jsx)(c.default,{style:[$e.confirmMessage,r&&$e.confirmMessageMobile],children:"This will approve the loan and generate the signed agreement. This action cannot be undone."}),(0,p.jsxs)(s.default,{style:[$e.confirmButtons,r&&$e.confirmButtonsMobile],children:[(0,p.jsx)(f.default,{style:[$e.confirmCancelBtn,r&&$e.confirmButtonMobile],onPress:function(){console.log("User cancelled approval"),z(!1)},children:(0,p.jsx)(c.default,{style:$e.confirmCancelText,children:"Cancel"})}),(0,p.jsx)(f.default,{style:[$e.confirmApproveBtn,r&&$e.confirmButtonMobile],onPress:function(){console.log("User confirmed approval"),z(!1),console.log("About to start processApproval..."),q()},children:(0,p.jsx)(c.default,{style:$e.confirmApproveText,children:"Approve"})})]})]})}),I&&(0,p.jsx)(s.default,{style:$e.confirmOverlay,children:(0,p.jsxs)(s.default,{style:[$e.confirmDialog,r&&$e.confirmDialogMobile],children:[(0,p.jsx)(c.default,{style:[$e.successTitle,r&&$e.confirmTitleMobile],children:"Success"}),(0,p.jsx)(c.default,{style:[$e.confirmMessage,r&&$e.confirmMessageMobile],children:"Loan has been approved and signed agreement has been generated."}),(0,p.jsx)(s.default,{style:[$e.confirmButtons,r&&$e.confirmButtonsMobile],children:(0,p.jsx)(f.default,{style:[$e.successOkBtn,r&&$e.confirmButtonMobile],onPress:function(){console.log("Success dialog OK button pressed"),console.log("Navigating back to OpsPendingList..."),W(!1);try{console.log("Attempting navigation reset..."),n.reset({index:0,routes:[{name:"OpsPendingList"}]}),console.log("Navigation reset successful")}catch(e){console.error("Reset navigation failed, trying replace:",e);try{n.replace("OpsPendingList"),console.log("Navigation replace successful")}catch(t){console.error("Replace navigation failed, trying navigate:",t),n.navigate("OpsPendingList"),console.log("Navigation navigate attempted")}}},children:(0,p.jsx)(c.default,{style:$e.confirmApproveText,children:"OK"})})})]})})]})}var $e=g.default.create({container:{flex:1,backgroundColor:"#f6f6f6"},centerContent:{justifyContent:"center",alignItems:"center"},header:{flexDirection:"row",alignItems:"center",backgroundColor:"#fff",padding:b.default.select({web:20,default:16}),borderBottomWidth:1,borderBottomColor:"#e0e0e0",shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.1,shadowRadius:4,elevation:3},headerMobile:{padding:12,flexDirection:"column",alignItems:"flex-start"},backBtn:{marginRight:b.default.select({web:20,default:12}),padding:b.default.select({web:8,default:6})},backText:{fontSize:b.default.select({web:16,default:14}),color:"#0066ff",fontWeight:"500"},headerContent:{flex:1},title:{fontSize:b.default.select({web:22,default:18}),fontWeight:"bold",marginBottom:4},titleMobile:{fontSize:16,marginTop:8},subtitle:{fontSize:b.default.select({web:14,default:12}),color:"#666"},subtitleMobile:{fontSize:12},agreementDetails:{backgroundColor:"#fff",margin:b.default.select({web:20,default:16}),padding:b.default.select({web:20,default:16}),borderRadius:8,shadowColor:"#000",shadowOffset:{width:0,height:1},shadowOpacity:.1,shadowRadius:2,elevation:2},agreementDetailsMobile:{margin:12,padding:12},detailsTitle:{fontSize:b.default.select({web:18,default:16}),fontWeight:"bold",marginBottom:b.default.select({web:16,default:12}),color:"#333"},detailsTitleMobile:{fontSize:14,marginBottom:10},detailRow:{flexDirection:"row",justifyContent:"space-between",marginBottom:b.default.select({web:8,default:6})},detailLabel:{fontSize:b.default.select({web:14,default:13}),color:"#666",fontWeight:"500"},detailValue:{fontSize:b.default.select({web:14,default:13}),color:"#333",fontWeight:"600"},pdfContainer:{backgroundColor:"#fff",marginHorizontal:b.default.select({web:20,default:16}),marginBottom:b.default.select({web:20,default:16}),padding:b.default.select({web:20,default:16}),borderRadius:8,shadowColor:"#000",shadowOffset:{width:0,height:1},shadowOpacity:.1,shadowRadius:2,elevation:2,flex:1},pdfContainerMobile:{marginHorizontal:12,marginBottom:12,padding:12},pdfTitle:{fontSize:b.default.select({web:16,default:14}),fontWeight:"bold",color:"#333",marginBottom:b.default.select({web:12,default:8})},pdfTitleMobile:{fontSize:14},pdfPreview:{flex:1,backgroundColor:"#f9f9f9",borderRadius:8,borderWidth:1,borderColor:"#e0e0e0",overflow:"hidden"},pdfPreviewMobile:{minHeight:300},pdfPlaceholder:{flex:1,justifyContent:"center",alignItems:"center",backgroundColor:"#f9f9f9",borderRadius:8,borderWidth:1,borderColor:"#e0e0e0",minHeight:b.default.select({web:400,default:200})},pdfPlaceholderText:{fontSize:b.default.select({web:16,default:14}),color:"#666",marginBottom:12},mobilePdfContainer:{flex:1,justifyContent:"center",alignItems:"center",backgroundColor:"#f9f9f9",borderRadius:8,borderWidth:1,borderColor:"#e0e0e0",padding:20,minHeight:300},mobilePdfText:{fontSize:18,fontWeight:"bold",color:"#2ecc71",marginBottom:12,textAlign:"center"},mobilePdfSubtext:{fontSize:14,color:"#666",marginBottom:20,textAlign:"center",lineHeight:20},viewPdfBtn:{backgroundColor:"#0066ff",paddingVertical:12,paddingHorizontal:20,borderRadius:8,minHeight:44,justifyContent:"center",alignItems:"center"},viewPdfText:{color:"#fff",fontSize:16,fontWeight:"600"},errorContainer:{flex:1,justifyContent:"center",alignItems:"center",backgroundColor:"#f9f9f9",borderRadius:8,borderWidth:1,borderColor:"#e0e0e0",minHeight:b.default.select({web:400,default:200})},errorText:{color:"#e74c3c",fontSize:b.default.select({web:16,default:14}),marginBottom:12,textAlign:"center"},errorTextMobile:{fontSize:14},retryBtn:{backgroundColor:"#e74c3c",paddingVertical:8,paddingHorizontal:16,borderRadius:6},retryText:{color:"#fff",fontSize:14,fontWeight:"600"},loadingText:{marginTop:12,fontSize:b.default.select({web:16,default:14}),color:"#666",textAlign:"center"},loadingTextMobile:{fontSize:14},actionButtons:{flexDirection:"row",justifyContent:"space-between",paddingHorizontal:b.default.select({web:20,default:16}),paddingBottom:b.default.select({web:20,default:16}),gap:b.default.select({web:16,default:12})},actionButtonsMobile:{flexDirection:"column",paddingHorizontal:12,gap:10},backToSignBtn:{backgroundColor:"#6c757d",paddingVertical:b.default.select({web:12,default:10}),paddingHorizontal:b.default.select({web:24,default:20}),borderRadius:8,flex:b.default.select({web:1,default:0}),alignItems:"center",justifyContent:"center",minHeight:b.default.select({web:44,default:48})},approveBtn:{backgroundColor:"#2ecc71",paddingVertical:b.default.select({web:12,default:10}),paddingHorizontal:b.default.select({web:24,default:20}),borderRadius:8,flex:b.default.select({web:1,default:0}),alignItems:"center",justifyContent:"center",minHeight:b.default.select({web:44,default:48})},buttonMobile:{width:"100%",minHeight:48},backToSignText:{color:"#fff",fontSize:b.default.select({web:16,default:14}),fontWeight:"600"},approveText:{color:"#fff",fontSize:b.default.select({web:16,default:14}),fontWeight:"600"},buttonTextMobile:{fontSize:16},confirmOverlay:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",justifyContent:"center",alignItems:"center",zIndex:1e3},confirmDialog:{backgroundColor:"#fff",padding:24,borderRadius:12,width:"80%",maxWidth:400,shadowColor:"#000",shadowOffset:{width:0,height:4},shadowOpacity:.25,shadowRadius:8,elevation:8},confirmDialogMobile:{width:"90%",padding:20},confirmTitle:{fontSize:18,fontWeight:"bold",color:"#333",marginBottom:12,textAlign:"center"},confirmTitleMobile:{fontSize:16},confirmMessage:{fontSize:14,color:"#666",lineHeight:20,textAlign:"center",marginBottom:20},confirmMessageMobile:{fontSize:14,marginBottom:16},confirmButtons:{flexDirection:"row",justifyContent:"space-between",gap:12},confirmButtonsMobile:{flexDirection:"column",gap:10},confirmCancelBtn:{backgroundColor:"#6c757d",paddingVertical:12,paddingHorizontal:24,borderRadius:8,flex:1,alignItems:"center",justifyContent:"center",minHeight:44},confirmApproveBtn:{backgroundColor:"#2ecc71",paddingVertical:12,paddingHorizontal:24,borderRadius:8,flex:1,alignItems:"center",justifyContent:"center",minHeight:44},confirmButtonMobile:{width:"100%",minHeight:48},confirmCancelText:{color:"#fff",fontSize:16,fontWeight:"600"},confirmApproveText:{color:"#fff",fontSize:16,fontWeight:"600"},successTitle:{fontSize:18,fontWeight:"bold",color:"#2ecc71",marginBottom:12,textAlign:"center"},successOkBtn:{backgroundColor:"#2ecc71",paddingVertical:12,paddingHorizontal:24,borderRadius:8,flex:1,alignItems:"center",justifyContent:"center",minHeight:44}});function et(e){var t=e.navigation,n=G(),o=n.notifications,r=n.markNotificationsAsRead,a=n.loans,i=n.refreshClientData,u=(0,l.useState)(!1),g=(0,d.default)(u,2),h=g[0],b=g[1];(0,l.useEffect)((function(){r()}),[]),(0,l.useEffect)((function(){return t.addListener("focus",(function(){console.log("LoanOfficerNotifications focused - refreshing data"),b(!0),Promise.all(a.map((function(e){return i(e.cid)}))).catch((function(e){return console.error("Error refreshing client data:",e)})).finally((function(){return b(!1)}))}))}),[t,a]);return(0,p.jsxs)(s.default,{style:tt.container,children:[(0,p.jsxs)(s.default,{style:tt.headerRow,children:[(0,p.jsx)(c.default,{style:tt.header,children:"Hello Loan Officer!"}),(0,p.jsx)(f.default,{style:tt.dashboardBtn,onPress:function(){return t.navigate("LoanOfficerDashboard")},children:(0,p.jsx)(c.default,{style:tt.btnText,children:"Go to Dashboard"})})]}),(0,p.jsx)(c.default,{style:tt.subHeader,children:"Notifications"}),h&&(0,p.jsx)(s.default,{style:tt.refreshingContainer,children:(0,p.jsx)(c.default,{style:tt.refreshingText,children:"Refreshing..."})}),(0,p.jsx)(Q.default,{data:o,keyExtractor:function(e){return e.id.toString()},renderItem:function(e){var t=e.item,n="Approved"===t.status;return(0,p.jsxs)(s.default,{style:tt.item,children:["status_change"===t.type?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(c.default,{style:[tt.icon,{color:n?"green":"red"}],children:n?"\u2705":"\u274c"}),(0,p.jsxs)(c.default,{style:tt.message,children:["CID ",(0,p.jsx)(c.default,{style:tt.bold,children:t.cid})," LOAN REQUEST HAS BEEN"," ",(0,p.jsx)(c.default,{style:[tt.status,{color:n?"green":"red"}],children:t.status.toUpperCase()})," ","BY THE OPERATIONAL MANAGER"]})]}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(c.default,{style:[tt.icon,{color:"#007bff"}],children:"\ud83d\udcb0"}),(0,p.jsxs)(c.default,{style:tt.message,children:["Loan amount for client"," ",(0,p.jsx)(c.default,{style:tt.bold,children:t.clientName})," (CID: ",t.cid,") has been updated to"," ",(0,p.jsxs)(c.default,{style:tt.bold,children:["\u20b1",t.amount.toLocaleString()]})]})]}),(0,p.jsx)(c.default,{style:tt.timestamp,children:new Date(t.timestamp).toLocaleString()})]})},ItemSeparatorComponent:function(){return(0,p.jsx)(s.default,{style:tt.separator})}})]})}var tt=g.default.create({container:{padding:24,backgroundColor:"#f6f6f6",flex:1},headerRow:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:16},header:{fontSize:24,fontWeight:"bold"},dashboardBtn:{backgroundColor:"#007bff",paddingVertical:8,paddingHorizontal:14,borderRadius:6},btnText:{color:"#fff",fontWeight:"600",fontSize:14},subHeader:{fontSize:18,fontWeight:"600",marginBottom:16},item:{flexDirection:"row",alignItems:"flex-start",paddingVertical:6},icon:{fontSize:18,marginRight:10,marginTop:2},message:{flex:1,fontSize:14,fontWeight:"500"},bold:{fontWeight:"bold"},status:{fontWeight:"bold",textTransform:"uppercase"},separator:{borderBottomWidth:1,borderColor:"#ccc",marginVertical:6},timestamp:{fontSize:12,color:"#666",marginTop:4,fontStyle:"italic"},refreshingContainer:{padding:10,backgroundColor:"#f0f0f0",alignItems:"center"},refreshingText:{color:"#666",fontSize:14}});function nt(e){var t,n,o,r,a=e.route,g=e.navigation,b=(0,l.useState)(""),m=(0,d.default)(b,2),y=m[0],x=m[1],w=(0,l.useState)(null),j=(0,d.default)(w,2),v=j[0],C=j[1],S=null==(t=a.params)?void 0:t.clientId,T=null==(n=a.params)?void 0:n.userRole,B=null==(o=a.params)?void 0:o.fromPendingDetail,D=G().loans.find((function(e){return e.cid===S})),M=(null==D||null==(r=D.loans)?void 0:r.loanHistory)||[];(0,l.useEffect)((function(){var e=function(){var e=(0,i.default)((function*(){if(S)try{var e=yield fetch("http://localhost:5600/client-loan-data/"+S);if(e.ok){var t=yield e.json();C(t)}}catch(n){console.error("Error fetching loan terms:",n)}}));return function(){return e.apply(this,arguments)}}();e()}),[S]);var P=M.filter((function(e){return e.dateApplied.toLowerCase().includes(y.toLowerCase())||e.purpose.toLowerCase().includes(y.toLowerCase())||e.status.toLowerCase().includes(y.toLowerCase())})).sort((function(e,t){var n=new Date(e.dateApplied);return new Date(t.dateApplied)-n})),O=(0,h.default)().width<768;return(0,p.jsxs)(s.default,{style:[ot.container,O&&ot.containerMobile],children:[(0,p.jsxs)(s.default,{style:[ot.headerRow,O&&ot.headerRowMobile],children:[(0,p.jsxs)(c.default,{style:[ot.title,O&&ot.titleMobile],children:["Loan History of Client ",S]}),(0,p.jsxs)(s.default,{style:[ot.buttonContainer,O&&ot.buttonContainerMobile],children:[(0,p.jsx)(f.default,{style:[ot.btn,ot.backBtn,O&&ot.btnMobile],onPress:function(){if(B)g.goBack();else{var e="ops"===T?"OpsClientProfile":"ClientProfile";g.navigate(e,{client:{cid:S}})}},children:(0,p.jsx)(c.default,{style:ot.btnText,children:"Back to Profile"})}),(0,p.jsx)(f.default,{style:[ot.btn,ot.dashboardBtn,O&&ot.btnMobile],onPress:function(){var e="ops"===T?"OpsDashboard":"LoanOfficerDashboard";g.navigate(e)},children:(0,p.jsx)(c.default,{style:ot.btnText,children:"Go to Dashboard"})})]})]}),(0,p.jsx)(s.default,{style:[ot.searchBar,O&&ot.searchBarMobile],children:(0,p.jsx)(u.default,{style:[ot.searchInput,O&&ot.searchInputMobile],placeholder:"Search",value:y,onChangeText:x})}),!O&&(0,p.jsxs)(s.default,{style:ot.tableHeader,children:[(0,p.jsx)(c.default,{style:[ot.headerCell,{flex:2}],children:"Date Applied"}),(0,p.jsx)(c.default,{style:[ot.headerCell,{flex:2}],children:"Amount"}),(0,p.jsx)(c.default,{style:[ot.headerCell,{flex:3}],children:"Purpose"}),(0,p.jsx)(c.default,{style:[ot.headerCell,{flex:2}],children:"Status"}),(0,p.jsx)(c.default,{style:[ot.headerCell,{flex:2}],children:"Due Date"}),(0,p.jsx)(c.default,{style:[ot.headerCell,{flex:1}],children:"Paid?"})]}),(0,p.jsx)(Q.default,{data:P,keyExtractor:function(e,t){return t.toString()},renderItem:function(e){var t=e.item,n="Approved"===t.status,o="Declined"===t.status,l=t.dueDate||"N/A";return n&&v&&(l=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"monthly";if(!e||!t)return"N/A";var o=new Date(e);if("daily"===n.toLowerCase()){var l=30*t,r=new Date(o);return r.setDate(r.getDate()+l),r.toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})}if("weekly"===n.toLowerCase()){var a=Math.ceil(4.33*t),i=new Date(o);return i.setDate(i.getDate()+7*a),i.toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})}var d=new Date(o);return d.setMonth(d.getMonth()+parseInt(t)),d.toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})}(t.dateApplied,v.term,v.repaymentMethod)),O?(0,p.jsxs)(s.default,{style:ot.cardContainer,children:[(0,p.jsxs)(s.default,{style:ot.cardRow,children:[(0,p.jsx)(c.default,{style:ot.cardLabel,children:"Date Applied:"}),(0,p.jsx)(c.default,{style:ot.cardValue,children:t.dateApplied})]}),(0,p.jsxs)(s.default,{style:ot.cardRow,children:[(0,p.jsx)(c.default,{style:ot.cardLabel,children:"Amount:"}),(0,p.jsxs)(c.default,{style:ot.cardValue,children:["\u20b1",t.amount.toLocaleString()]})]}),(0,p.jsxs)(s.default,{style:ot.cardRow,children:[(0,p.jsx)(c.default,{style:ot.cardLabel,children:"Purpose:"}),(0,p.jsx)(c.default,{style:ot.cardValue,children:t.purpose})]}),(0,p.jsxs)(s.default,{style:ot.cardRow,children:[(0,p.jsx)(c.default,{style:ot.cardLabel,children:"Status:"}),(0,p.jsx)(c.default,{style:[ot.cardValue,{color:n?"green":o?"red":"black"}],children:t.status})]}),(0,p.jsxs)(s.default,{style:ot.cardRow,children:[(0,p.jsx)(c.default,{style:ot.cardLabel,children:"Due Date:"}),(0,p.jsx)(c.default,{style:ot.cardValue,children:l})]}),(0,p.jsxs)(s.default,{style:ot.cardRow,children:[(0,p.jsx)(c.default,{style:ot.cardLabel,children:"Paid:"}),(0,p.jsx)(c.default,{style:ot.cardValue,children:t.paid?"Yes":"No"})]})]}):(0,p.jsxs)(s.default,{style:ot.row,children:[(0,p.jsx)(c.default,{style:[ot.cell,{flex:2}],children:t.dateApplied}),(0,p.jsxs)(c.default,{style:[ot.cell,{flex:2}],children:["\u20b1",t.amount.toLocaleString()]}),(0,p.jsx)(c.default,{style:[ot.cell,{flex:3}],children:t.purpose}),(0,p.jsx)(c.default,{style:[ot.cell,{flex:2,color:n?"green":o?"red":"black"}],children:t.status}),(0,p.jsx)(c.default,{style:[ot.cell,{flex:2}],children:l}),(0,p.jsx)(c.default,{style:[ot.cell,{flex:1}],children:t.paid?"Yes":"No"})]})},ItemSeparatorComponent:function(){return(0,p.jsx)(s.default,{style:ot.separator})}})]})}var ot=g.default.create({container:{padding:24,backgroundColor:"#f6f6f6",flex:1},containerMobile:{padding:16},headerRow:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:16},headerRowMobile:{flexDirection:"column",alignItems:"stretch",gap:16},title:{fontSize:20,fontWeight:"bold"},titleMobile:{fontSize:18,textAlign:"center"},buttonContainer:{flexDirection:"row",gap:8},buttonContainerMobile:{flexDirection:"column",gap:8},btn:{paddingVertical:8,paddingHorizontal:16,borderRadius:6},btnMobile:{paddingVertical:12,alignItems:"center"},backBtn:{backgroundColor:"#6c757d"},dashboardBtn:{backgroundColor:"#007bff"},btnText:{color:"#fff",fontWeight:"600",textAlign:"center"},searchBar:{marginBottom:12},searchBarMobile:{marginBottom:16},searchInput:{backgroundColor:"#ddd",borderRadius:6,padding:10},searchInputMobile:{padding:12},tableHeader:{flexDirection:"row",backgroundColor:"#dcdcdc",paddingVertical:10,paddingHorizontal:6,marginBottom:4},headerCell:{fontWeight:"bold",fontSize:14},row:{flexDirection:"row",alignItems:"center",paddingVertical:10},cell:{fontSize:13,paddingHorizontal:6},separator:{height:1,backgroundColor:"#ddd"},cardContainer:{backgroundColor:"white",borderRadius:8,padding:16,marginBottom:12,elevation:2,shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.1,shadowRadius:4},cardRow:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:8},cardLabel:{fontSize:14,fontWeight:"600",color:"#666",flex:1},cardValue:{fontSize:14,flex:2,textAlign:"right"}}),lt=n(484);function rt(e){var t=e.navigation,n=e.route,o=(0,l.useState)(!1),r=(0,d.default)(o,2),a=r[0],u=(r[1],(0,l.useState)(null)),g=(0,d.default)(u,2),h=g[0],b=(g[1],n.params),m=b.cid,y=b.title,x=b.documents,w=b.latestDate;return a?(0,p.jsxs)(s.default,{style:[at.container,at.centerContent],children:[(0,p.jsx)(X.default,{size:"large",color:"#0066ff"}),(0,p.jsx)(c.default,{style:at.loadingText,children:"Loading documents..."})]}):h?(0,p.jsxs)(s.default,{style:[at.container,at.centerContent],children:[(0,p.jsx)(c.default,{style:at.errorText,children:h}),(0,p.jsx)(f.default,{style:at.retryBtn,onPress:function(){return t.goBack()},children:(0,p.jsx)(c.default,{style:at.retryText,children:"Retry"})})]}):(0,p.jsxs)(s.default,{style:at.container,children:[(0,p.jsxs)(s.default,{style:at.header,children:[(0,p.jsx)(f.default,{style:at.backBtn,onPress:function(){return t.goBack()},children:(0,p.jsx)(c.default,{children:"\u2190 Back"})}),(0,p.jsxs)(s.default,{style:at.headerContent,children:[(0,p.jsx)(c.default,{style:at.title,children:y}),(0,p.jsx)(c.default,{style:at.subtitle,children:w})]})]}),(0,p.jsx)(le.default,{style:at.content,children:(0,p.jsx)(s.default,{style:at.grid,children:x.map((function(e){return function(e){var t=e.name.toLowerCase().endsWith(".pdf");return(0,p.jsxs)(f.default,{style:at.documentCard,onPress:(0,i.default)((function*(){try{var t=yield D.viewDocumentByFilename(m,e.name,w),n=t.url;t.type,window.open(n,"_blank"),setTimeout((function(){return URL.revokeObjectURL(n)}),1e3)}catch(h){console.error("Error viewing document:",h),alert("Error viewing document. Please try again.")}})),children:[(0,p.jsx)(s.default,{style:at.previewContainer,children:t?(0,p.jsx)(s.default,{style:at.pdfPreview,children:(0,p.jsx)(c.default,{style:at.pdfIcon,children:"PDF"})}):(0,p.jsx)(lt.default,{source:{uri:v+"/documents/"+m+"/thumbnail/"+e.name+"?date="+encodeURIComponent(w)},style:at.imagePreview,resizeMode:"contain"})}),(0,p.jsx)(c.default,{style:at.documentName,children:e.displayName})]},e.name)}(e)}))})})]})}var at=g.default.create({container:{flex:1,backgroundColor:"#f6f6f6"},header:{flexDirection:"row",alignItems:"center",padding:16,backgroundColor:"#fff",borderBottomWidth:1,borderBottomColor:"#eee"},backBtn:{marginRight:16},title:{fontSize:18,fontWeight:"bold"},content:{flex:1,padding:16},grid:{flexDirection:"row",flexWrap:"wrap",gap:16,justifyContent:"space-between",paddingBottom:20},headerContent:{flex:1,marginLeft:16},subtitle:{fontSize:12,color:"#666",marginTop:4},documentCard:{width:"48%",backgroundColor:"#fff",borderRadius:8,overflow:"hidden",shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.1,shadowRadius:4,elevation:3},previewContainer:{width:"100%",height:150,backgroundColor:"#f5f5f5",justifyContent:"center",alignItems:"center"},imagePreview:{width:"100%",height:"100%"},pdfPreview:{width:"100%",height:"100%",justifyContent:"center",alignItems:"center",backgroundColor:"#e0e0e0"},pdfIcon:{fontSize:24,fontWeight:"bold",color:"#666"},documentName:{padding:12,fontSize:14,textAlign:"center"},centerContent:{justifyContent:"center",alignItems:"center"},loadingText:{marginTop:10,fontSize:16,color:"#666"},errorText:{color:"#dc3545",fontSize:16,marginBottom:15},retryBtn:{backgroundColor:"#0066ff",paddingVertical:8,paddingHorizontal:20,borderRadius:6},retryText:{color:"#fff",fontWeight:"bold"}}),it=(0,a.default)();(0,o.default)((function(){return(0,p.jsx)(y,{children:(0,p.jsx)(z,{children:(0,p.jsx)(_,{children:(0,p.jsx)(r.default,{children:(0,p.jsxs)(it.Navigator,{initialRouteName:"Login",screenOptions:{headerShown:!1},children:[(0,p.jsx)(it.Screen,{name:"Login",component:M}),(0,p.jsx)(it.Screen,{name:"ForgotPassword",component:O}),(0,p.jsx)(it.Screen,{name:"Dashboard",component:E}),(0,p.jsx)(it.Screen,{name:"OpsDashboard",component:J}),(0,p.jsx)(it.Screen,{name:"UserManagement",component:Me}),(0,p.jsx)(it.Screen,{name:"AddEditUser",component:ze}),(0,p.jsx)(it.Screen,{name:"LoanOfficerDashboard",component:K}),(0,p.jsx)(it.Screen,{name:"ClientList",component:oe}),(0,p.jsx)(it.Screen,{name:"ClientProfile",component:ye}),(0,p.jsx)(it.Screen,{name:"TotalLoanList",component:je}),(0,p.jsx)(it.Screen,{name:"PendingLoanDetail",component:Be}),(0,p.jsx)(it.Screen,{name:"OpsClientList",component:Re}),(0,p.jsx)(it.Screen,{name:"OpsClientProfile",component:Ie}),(0,p.jsx)(it.Screen,{name:"OpsPendingList",component:We}),(0,p.jsx)(it.Screen,{name:"OpsPendingLoanDetail",component:_e}),(0,p.jsx)(it.Screen,{name:"SignatureAgreement",component:Ke}),(0,p.jsx)(it.Screen,{name:"SignedAgreementPreview",component:Ze}),(0,p.jsx)(it.Screen,{name:"LoanOfficerNotifications",component:et}),(0,p.jsx)(it.Screen,{name:"LoanHistory",component:nt}),(0,p.jsx)(it.Screen,{name:"DocumentPreview",component:rt,options:function(e){e.route;return{headerShown:!1}}})]})})})})})}))}},t={};function n(o){var l=t[o];if(void 0!==l)return l.exports;var r=t[o]={exports:{}};return e[o].call(r.exports,r,r.exports,n),r.exports}n.m=e,(()=>{var e=[];n.O=(t,o,l,r)=>{if(!o){var a=1/0;for(c=0;c<e.length;c++){for(var[o,l,r]=e[c],i=!0,d=0;d<o.length;d++)(!1&r||a>=r)&&Object.keys(n.O).every((e=>n.O[e](o[d])))?o.splice(d--,1):(i=!1,r<a&&(a=r));if(i){e.splice(c--,1);var s=l();void 0!==s&&(t=s)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[o,l,r]}})(),n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(o,l){if(1&l&&(o=this(o)),8&l)return o;if("object"===typeof o&&o){if(4&l&&o.__esModule)return o;if(16&l&&"function"===typeof o.then)return o}var r=Object.create(null);n.r(r);var a={};e=e||[null,t({}),t([]),t(t)];for(var i=2&l&&o;"object"==typeof i&&!~e.indexOf(i);i=t(i))Object.getOwnPropertyNames(i).forEach((e=>a[e]=()=>o[e]));return a.default=()=>o,n.d(r,a),r}})(),n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={792:0};n.O.j=t=>0===e[t];var t=(t,o)=>{var l,r,[a,i,d]=o,s=0;if(a.some((t=>0!==e[t]))){for(l in i)n.o(i,l)&&(n.m[l]=i[l]);if(d)var c=d(n)}for(t&&t(o);s<a.length;s++)r=a[s],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(c)},o=self.webpackChunkweb=self.webpackChunkweb||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var o=n.O(void 0,[767],(()=>n(4454)));o=n.O(o)})();
//# sourceMappingURL=main.7a7b8bb1.js.map