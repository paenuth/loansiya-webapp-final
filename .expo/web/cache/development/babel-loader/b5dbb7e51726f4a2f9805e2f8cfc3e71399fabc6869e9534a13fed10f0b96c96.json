{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport Constants from 'expo-constants';\nvar getApiUrl = function getApiUrl() {\n  var _Constants$expoConfig, _Constants$expoConfig2, _Constants$expoConfig3, _Constants$expoConfig4;\n  console.log('Environment debug info:', {\n    NODE_ENV: process.env.NODE_ENV,\n    REACT_APP_API_URL: process.env.REACT_APP_API_URL,\n    expoConfig: (_Constants$expoConfig = Constants.expoConfig) == null ? void 0 : (_Constants$expoConfig2 = _Constants$expoConfig.extra) == null ? void 0 : _Constants$expoConfig2.REACT_APP_API_URL,\n    isProduction: process.env.NODE_ENV === 'production'\n  });\n  if (process.env.NODE_ENV === 'production' && process.env.REACT_APP_API_URL) {\n    console.log('Using production env var:', process.env.REACT_APP_API_URL);\n    return process.env.REACT_APP_API_URL;\n  }\n  if ((_Constants$expoConfig3 = Constants.expoConfig) != null && (_Constants$expoConfig4 = _Constants$expoConfig3.extra) != null && _Constants$expoConfig4.REACT_APP_API_URL) {\n    console.log('Using Expo config:', Constants.expoConfig.extra.REACT_APP_API_URL);\n    return Constants.expoConfig.extra.REACT_APP_API_URL;\n  }\n  if (process.env.REACT_APP_API_URL) {\n    console.log('Using env var fallback:', process.env.REACT_APP_API_URL);\n    return process.env.REACT_APP_API_URL;\n  }\n  console.log('Using localhost fallback');\n  return 'http://localhost:5600';\n};\nexport var API_BASE_URL = getApiUrl();\nexport var authAPI = {\n  login: function () {\n    var _login = _asyncToGenerator(function* (username, password) {\n      try {\n        var response = yield fetch(API_BASE_URL + \"/officers/login\", {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            username: username,\n            password: password\n          })\n        });\n        if (!response.ok) {\n          var error = yield response.json();\n          throw new Error(error.message || 'Login failed');\n        }\n        var data = yield response.json();\n        if (!data.success) {\n          throw new Error(data.message || 'Login failed');\n        }\n        return {\n          user: {\n            username: data.officer.username,\n            fullName: data.officer.fullName,\n            role: data.officer.role,\n            status: data.officer.status\n          }\n        };\n      } catch (error) {\n        console.error('Login Error:', error);\n        throw error;\n      }\n    });\n    function login(_x, _x2) {\n      return _login.apply(this, arguments);\n    }\n    return login;\n  }()\n};\nexport var userAPI = {\n  getAllUsers: function () {\n    var _getAllUsers = _asyncToGenerator(function* () {\n      try {\n        var response = yield fetch(API_BASE_URL + \"/users\");\n        if (!response.ok) {\n          throw new Error('Failed to fetch users');\n        }\n        return response.json();\n      } catch (error) {\n        console.error('API Error:', error);\n        throw error;\n      }\n    });\n    function getAllUsers() {\n      return _getAllUsers.apply(this, arguments);\n    }\n    return getAllUsers;\n  }(),\n  updateUserStatus: function () {\n    var _updateUserStatus = _asyncToGenerator(function* (username, status) {\n      try {\n        var response = yield fetch(API_BASE_URL + \"/users/\" + username + \"/status\", {\n          method: 'PUT',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            status: status\n          })\n        });\n        if (!response.ok) {\n          throw new Error('Failed to update user status');\n        }\n        return response.json();\n      } catch (error) {\n        console.error('API Error:', error);\n        throw error;\n      }\n    });\n    function updateUserStatus(_x3, _x4) {\n      return _updateUserStatus.apply(this, arguments);\n    }\n    return updateUserStatus;\n  }(),\n  addUser: function () {\n    var _addUser = _asyncToGenerator(function* (userData) {\n      try {\n        var response = yield fetch(API_BASE_URL + \"/users\", {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify(userData)\n        });\n        if (!response.ok) {\n          var error = yield response.json();\n          throw new Error(error.error || 'Failed to add user');\n        }\n        return response.json();\n      } catch (error) {\n        console.error('API Error:', error);\n        throw error;\n      }\n    });\n    function addUser(_x5) {\n      return _addUser.apply(this, arguments);\n    }\n    return addUser;\n  }(),\n  updateUser: function () {\n    var _updateUser = _asyncToGenerator(function* (username, userData) {\n      try {\n        var response = yield fetch(API_BASE_URL + \"/users/\" + username, {\n          method: 'PUT',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify(userData)\n        });\n        if (!response.ok) {\n          var error = yield response.json();\n          throw new Error(error.error || 'Failed to update user');\n        }\n        return response.json();\n      } catch (error) {\n        console.error('API Error:', error);\n        throw error;\n      }\n    });\n    function updateUser(_x6, _x7) {\n      return _updateUser.apply(this, arguments);\n    }\n    return updateUser;\n  }()\n};\nvar DOCUMENT_TYPE_MAP = {\n  'Valid Id': 'validid',\n  'ORCR': 'orcr',\n  'Land Title': 'landtitle',\n  'Deeds of Assignment': 'deed',\n  'Promissory Note': 'promissory-note'\n};\nexport var DOCUMENT_CATEGORIES = {\n  APPLICATION_DOCS: ['Valid Id', 'ORCR', 'Land Title', 'Deeds of Assignment'],\n  SIGNED_DOCS: ['Promissory Note', 'Signed Agreement']\n};\nexport var clientAPI = {\n  getAllClients: function () {\n    var _getAllClients = _asyncToGenerator(function* () {\n      try {\n        console.log('Fetching clients from:', API_BASE_URL);\n        var response = yield fetch(API_BASE_URL + \"/clients\");\n        if (!response.ok) {\n          throw new Error('Failed to fetch clients');\n        }\n        return response.json();\n      } catch (error) {\n        console.error('API Error:', error);\n        throw error;\n      }\n    });\n    function getAllClients() {\n      return _getAllClients.apply(this, arguments);\n    }\n    return getAllClients;\n  }(),\n  getClientById: function () {\n    var _getClientById = _asyncToGenerator(function* (cid) {\n      try {\n        var response = yield fetch(API_BASE_URL + \"/client/\" + cid);\n        if (!response.ok) {\n          throw new Error('Failed to fetch client');\n        }\n        return response.json();\n      } catch (error) {\n        console.error('API Error:', error);\n        throw error;\n      }\n    });\n    function getClientById(_x8) {\n      return _getClientById.apply(this, arguments);\n    }\n    return getClientById;\n  }(),\n  getClientScore: function () {\n    var _getClientScore = _asyncToGenerator(function* (cid) {\n      try {\n        var response = yield fetch(API_BASE_URL + \"/score/\" + cid, {\n          method: 'POST'\n        });\n        if (!response.ok) {\n          throw new Error('Failed to fetch client score');\n        }\n        return response.json();\n      } catch (error) {\n        console.error('API Error:', error);\n        throw error;\n      }\n    });\n    function getClientScore(_x9) {\n      return _getClientScore.apply(this, arguments);\n    }\n    return getClientScore;\n  }(),\n  processMetrics: function () {\n    var _processMetrics = _asyncToGenerator(function* (cid) {\n      try {\n        var response = yield fetch(API_BASE_URL + \"/metrics/\" + cid, {\n          method: 'POST'\n        });\n        if (!response.ok) {\n          throw new Error('Failed to process metrics');\n        }\n        return response.json();\n      } catch (error) {\n        console.error('API Error:', error);\n        throw error;\n      }\n    });\n    function processMetrics(_x0) {\n      return _processMetrics.apply(this, arguments);\n    }\n    return processMetrics;\n  }(),\n  processLoanDecision: function () {\n    var _processLoanDecision = _asyncToGenerator(function* (cid, decision) {\n      var additionalData = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      try {\n        var response = yield fetch(API_BASE_URL + \"/loan/\" + cid + \"/decision\", {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify(_objectSpread({\n            decision: decision\n          }, additionalData))\n        });\n        if (!response.ok) {\n          throw new Error('Failed to process loan decision');\n        }\n        return response.json();\n      } catch (error) {\n        console.error('API Error:', error);\n        throw error;\n      }\n    });\n    function processLoanDecision(_x1, _x10) {\n      return _processLoanDecision.apply(this, arguments);\n    }\n    return processLoanDecision;\n  }(),\n  fetchClientLoanData: function () {\n    var _fetchClientLoanData = _asyncToGenerator(function* (cid) {\n      try {\n        var response = yield fetch(API_BASE_URL + \"/client-loan-data/\" + cid);\n        if (!response.ok) {\n          throw new Error('Failed to fetch loan data');\n        }\n        return response.json();\n      } catch (error) {\n        console.error('API Error:', error);\n        throw error;\n      }\n    });\n    function fetchClientLoanData(_x11) {\n      return _fetchClientLoanData.apply(this, arguments);\n    }\n    return fetchClientLoanData;\n  }(),\n  updateLoanAmount: function () {\n    var _updateLoanAmount = _asyncToGenerator(function* (cid, amount) {\n      try {\n        var response = yield fetch(API_BASE_URL + \"/loan/\" + cid + \"/amount\", {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            amount: amount\n          })\n        });\n        if (!response.ok) {\n          throw new Error('Failed to update loan amount');\n        }\n        return response.json();\n      } catch (error) {\n        console.error('API Error:', error);\n        throw error;\n      }\n    });\n    function updateLoanAmount(_x12, _x13) {\n      return _updateLoanAmount.apply(this, arguments);\n    }\n    return updateLoanAmount;\n  }(),\n  notifications: {\n    getNotifications: function () {\n      var _getNotifications = _asyncToGenerator(function* () {\n        var role = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'loan_officer';\n        try {\n          var response = yield fetch(API_BASE_URL + \"/notifications?role=\" + encodeURIComponent(role));\n          if (!response.ok) {\n            throw new Error('Failed to fetch notifications');\n          }\n          return response.json();\n        } catch (error) {\n          console.error('API Error:', error);\n          throw error;\n        }\n      });\n      function getNotifications() {\n        return _getNotifications.apply(this, arguments);\n      }\n      return getNotifications;\n    }(),\n    createNotification: function () {\n      var _createNotification = _asyncToGenerator(function* (notification) {\n        try {\n          var response = yield fetch(API_BASE_URL + \"/notifications\", {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(notification)\n          });\n          if (!response.ok) {\n            throw new Error('Failed to create notification');\n          }\n          return response.json();\n        } catch (error) {\n          console.error('API Error:', error);\n          throw error;\n        }\n      });\n      function createNotification(_x14) {\n        return _createNotification.apply(this, arguments);\n      }\n      return createNotification;\n    }(),\n    markAsRead: function () {\n      var _markAsRead = _asyncToGenerator(function* (notificationIds) {\n        var role = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'loan_officer';\n        try {\n          var response = yield fetch(API_BASE_URL + \"/notifications/mark-read\", {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n              notificationIds: notificationIds,\n              role: role\n            })\n          });\n          if (!response.ok) {\n            throw new Error('Failed to mark notifications as read');\n          }\n          return response.json();\n        } catch (error) {\n          console.error('API Error:', error);\n          throw error;\n        }\n      });\n      function markAsRead(_x15) {\n        return _markAsRead.apply(this, arguments);\n      }\n      return markAsRead;\n    }()\n  },\n  viewDocumentByFilename: function () {\n    var _viewDocumentByFilename = _asyncToGenerator(function* (cid, filename) {\n      var date = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n      try {\n        var paddedCid = cid.toString().padStart(3, '0');\n        console.log('Fetching document file:', filename, 'for CID:', paddedCid, 'date:', date);\n        var url = API_BASE_URL + \"/documents/\" + paddedCid + \"/file/\" + encodeURIComponent(filename);\n        if (date) {\n          url += \"?date=\" + encodeURIComponent(date);\n        }\n        var response = yield fetch(url);\n        if (!response.ok) {\n          var errorData = yield response.json();\n          throw new Error(errorData.error || 'Failed to fetch document');\n        }\n        var contentType = response.headers.get('content-type');\n        var blob = yield response.blob();\n        var objectUrl = URL.createObjectURL(new Blob([blob], {\n          type: contentType\n        }));\n        return {\n          url: objectUrl,\n          type: contentType\n        };\n      } catch (error) {\n        console.error('API Error:', error);\n        throw error;\n      }\n    });\n    function viewDocumentByFilename(_x16, _x17) {\n      return _viewDocumentByFilename.apply(this, arguments);\n    }\n    return viewDocumentByFilename;\n  }(),\n  viewDocument: function () {\n    var _viewDocument = _asyncToGenerator(function* (cid, documentType) {\n      try {\n        var paddedCid = cid.toString().padStart(3, '0');\n        var internalType = DOCUMENT_TYPE_MAP[documentType];\n        if (!internalType) {\n          throw new Error(\"Invalid document type: \" + documentType);\n        }\n        var encodedType = encodeURIComponent(internalType);\n        console.log('Fetching document:', documentType, 'as', internalType, 'for CID:', paddedCid);\n        var response = yield fetch(API_BASE_URL + \"/documents/\" + paddedCid + \"/\" + encodedType);\n        if (!response.ok) {\n          var errorData = yield response.json();\n          throw new Error(errorData.error || 'Failed to fetch document');\n        }\n        var contentType = response.headers.get('content-type');\n        var blob = yield response.blob();\n        var objectUrl = URL.createObjectURL(new Blob([blob], {\n          type: contentType\n        }));\n        return {\n          url: objectUrl,\n          type: contentType\n        };\n      } catch (error) {\n        console.error('API Error:', error);\n        throw error;\n      }\n    });\n    function viewDocument(_x18, _x19) {\n      return _viewDocument.apply(this, arguments);\n    }\n    return viewDocument;\n  }(),\n  getLatestDocuments: function () {\n    var _getLatestDocuments = _asyncToGenerator(function* (cid) {\n      try {\n        var paddedCid = cid.toString().padStart(3, '0');\n        console.log('Getting documents for padded CID:', paddedCid);\n        var response = yield fetch(API_BASE_URL + \"/documents/\" + paddedCid + \"/all\");\n        if (!response.ok) {\n          var errorData = yield response.json();\n          throw new Error(errorData.error || 'Failed to fetch documents');\n        }\n        var data = yield response.json();\n        return data.documents;\n      } catch (error) {\n        console.error('API Error:', error);\n        throw error;\n      }\n    });\n    function getLatestDocuments(_x20) {\n      return _getLatestDocuments.apply(this, arguments);\n    }\n    return getLatestDocuments;\n  }(),\n  getDocumentDates: function () {\n    var _getDocumentDates = _asyncToGenerator(function* (cid) {\n      try {\n        var paddedCid = cid.toString().padStart(3, '0');\n        console.log('Getting document dates for padded CID:', paddedCid);\n        var response = yield fetch(API_BASE_URL + \"/documents/\" + paddedCid + \"/dates\");\n        if (!response.ok) {\n          var errorData = yield response.json();\n          throw new Error(errorData.error || 'Failed to fetch document dates');\n        }\n        var data = yield response.json();\n        return data.dates;\n      } catch (error) {\n        console.error('API Error:', error);\n        throw error;\n      }\n    });\n    function getDocumentDates(_x21) {\n      return _getDocumentDates.apply(this, arguments);\n    }\n    return getDocumentDates;\n  }(),\n  getDocumentsByDate: function () {\n    var _getDocumentsByDate = _asyncToGenerator(function* (cid, date) {\n      try {\n        var paddedCid = cid.toString().padStart(3, '0');\n        console.log('Getting documents for padded CID:', paddedCid, 'date:', date);\n        var response = yield fetch(API_BASE_URL + \"/documents/\" + paddedCid + \"/date/\" + date);\n        if (!response.ok) {\n          var errorData = yield response.json();\n          throw new Error(errorData.error || 'Failed to fetch documents');\n        }\n        var data = yield response.json();\n        return data.documents;\n      } catch (error) {\n        console.error('API Error:', error);\n        throw error;\n      }\n    });\n    function getDocumentsByDate(_x22, _x23) {\n      return _getDocumentsByDate.apply(this, arguments);\n    }\n    return getDocumentsByDate;\n  }()\n};","map":{"version":3,"names":["Constants","getApiUrl","_Constants$expoConfig","_Constants$expoConfig2","_Constants$expoConfig3","_Constants$expoConfig4","console","log","NODE_ENV","process","env","REACT_APP_API_URL","expoConfig","extra","isProduction","API_BASE_URL","authAPI","login","_login","_asyncToGenerator","username","password","response","fetch","method","headers","body","JSON","stringify","ok","error","json","Error","message","data","success","user","officer","fullName","role","status","_x","_x2","apply","arguments","userAPI","getAllUsers","_getAllUsers","updateUserStatus","_updateUserStatus","_x3","_x4","addUser","_addUser","userData","_x5","updateUser","_updateUser","_x6","_x7","DOCUMENT_TYPE_MAP","DOCUMENT_CATEGORIES","APPLICATION_DOCS","SIGNED_DOCS","clientAPI","getAllClients","_getAllClients","getClientById","_getClientById","cid","_x8","getClientScore","_getClientScore","_x9","processMetrics","_processMetrics","_x0","processLoanDecision","_processLoanDecision","decision","additionalData","length","undefined","_objectSpread","_x1","_x10","fetchClientLoanData","_fetchClientLoanData","_x11","updateLoanAmount","_updateLoanAmount","amount","_x12","_x13","notifications","getNotifications","_getNotifications","encodeURIComponent","createNotification","_createNotification","notification","_x14","markAsRead","_markAsRead","notificationIds","_x15","viewDocumentByFilename","_viewDocumentByFilename","filename","date","paddedCid","toString","padStart","url","errorData","contentType","get","blob","objectUrl","URL","createObjectURL","Blob","type","_x16","_x17","viewDocument","_viewDocument","documentType","internalType","encodedType","_x18","_x19","getLatestDocuments","_getLatestDocuments","documents","_x20","getDocumentDates","_getDocumentDates","dates","_x21","getDocumentsByDate","_getDocumentsByDate","_x22","_x23"],"sources":["C:/Users/ajohn/loansiya-webapp1.3.4/src/services/api.js"],"sourcesContent":["import Constants from 'expo-constants';\r\n\r\n// Get API URL with multiple fallback strategies for different environments\r\nconst getApiUrl = () => {\r\n  // Debug logging\r\n  console.log('Environment debug info:', {\r\n    NODE_ENV: process.env.NODE_ENV,\r\n    REACT_APP_API_URL: process.env.REACT_APP_API_URL,\r\n    expoConfig: Constants.expoConfig?.extra?.REACT_APP_API_URL,\r\n    isProduction: process.env.NODE_ENV === 'production'\r\n  });\r\n  \r\n  // For production builds, prioritize environment variables\r\n  if (process.env.NODE_ENV === 'production' && process.env.REACT_APP_API_URL) {\r\n    console.log('Using production env var:', process.env.REACT_APP_API_URL);\r\n    return process.env.REACT_APP_API_URL;\r\n  }\r\n  \r\n  // For Expo builds, use Constants\r\n  if (Constants.expoConfig?.extra?.REACT_APP_API_URL) {\r\n    console.log('Using Expo config:', Constants.expoConfig.extra.REACT_APP_API_URL);\r\n    return Constants.expoConfig.extra.REACT_APP_API_URL;\r\n  }\r\n  \r\n  // Fallback to environment variable\r\n  if (process.env.REACT_APP_API_URL) {\r\n    console.log('Using env var fallback:', process.env.REACT_APP_API_URL);\r\n    return process.env.REACT_APP_API_URL;\r\n  }\r\n  \r\n  // Development fallback\r\n  console.log('Using localhost fallback');\r\n  return 'http://localhost:5600';\r\n};\r\n\r\nexport const API_BASE_URL = getApiUrl();\r\n\r\n// Authentication API endpoints\r\nexport const authAPI = {\r\n  login: async (username, password) => {\r\n    try {\r\n      const response = await fetch(`${API_BASE_URL}/officers/login`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({ username, password })\r\n      });\r\n      \r\n      if (!response.ok) {\r\n        const error = await response.json();\r\n        throw new Error(error.message || 'Login failed');\r\n      }\r\n      \r\n      const data = await response.json();\r\n      if (!data.success) {\r\n        throw new Error(data.message || 'Login failed');\r\n      }\r\n\r\n      // Map the officer data to the expected user format\r\n      return {\r\n        user: {\r\n          username: data.officer.username,\r\n          fullName: data.officer.fullName,\r\n          role: data.officer.role, // Use the role directly from backend\r\n          status: data.officer.status\r\n        }\r\n      };\r\n    } catch (error) {\r\n      console.error('Login Error:', error);\r\n      throw error;\r\n    }\r\n  }\r\n};\r\n\r\n// User Management API endpoints\r\nexport const userAPI = {\r\n  // Get all users\r\n  getAllUsers: async () => {\r\n    try {\r\n      const response = await fetch(`${API_BASE_URL}/users`);\r\n      if (!response.ok) {\r\n        throw new Error('Failed to fetch users');\r\n      }\r\n      return response.json();\r\n    } catch (error) {\r\n      console.error('API Error:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  // Update user status\r\n  updateUserStatus: async (username, status) => {\r\n    try {\r\n      const response = await fetch(`${API_BASE_URL}/users/${username}/status`, {\r\n        method: 'PUT',\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({ status })\r\n      });\r\n      if (!response.ok) {\r\n        throw new Error('Failed to update user status');\r\n      }\r\n      return response.json();\r\n    } catch (error) {\r\n      console.error('API Error:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  // Add new user\r\n  addUser: async (userData) => {\r\n    try {\r\n      const response = await fetch(`${API_BASE_URL}/users`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify(userData)\r\n      });\r\n      if (!response.ok) {\r\n        const error = await response.json();\r\n        throw new Error(error.error || 'Failed to add user');\r\n      }\r\n      return response.json();\r\n    } catch (error) {\r\n      console.error('API Error:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  // Update user\r\n  updateUser: async (username, userData) => {\r\n    try {\r\n      const response = await fetch(`${API_BASE_URL}/users/${username}`, {\r\n        method: 'PUT',\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify(userData)\r\n      });\r\n      if (!response.ok) {\r\n        const error = await response.json();\r\n        throw new Error(error.error || 'Failed to update user');\r\n      }\r\n      return response.json();\r\n    } catch (error) {\r\n      console.error('API Error:', error);\r\n      throw error;\r\n    }\r\n  }\r\n};\r\n\r\n// Document type mapping for API requests\r\nconst DOCUMENT_TYPE_MAP = {\r\n  'Valid Id': 'validid',\r\n  'ORCR': 'orcr',\r\n  'Land Title': 'landtitle',\r\n  'Deeds of Assignment': 'deed',\r\n  'Promissory Note': 'promissory-note'\r\n};\r\n\r\n// Document categories\r\nexport const DOCUMENT_CATEGORIES = {\r\n  APPLICATION_DOCS: ['Valid Id', 'ORCR', 'Land Title', 'Deeds of Assignment'],\r\n  SIGNED_DOCS: ['Promissory Note', 'Signed Agreement']\r\n};\r\n\r\nexport const clientAPI = {\r\n  // Get all clients from the Credit Scoring API\r\n  getAllClients: async () => {\r\n    try {\r\n      console.log('Fetching clients from:', API_BASE_URL);\r\n      const response = await fetch(`${API_BASE_URL}/clients`);\r\n      if (!response.ok) {\r\n        throw new Error('Failed to fetch clients');\r\n      }\r\n      return response.json();\r\n    } catch (error) {\r\n      console.error('API Error:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  // Get single client by CID\r\n  getClientById: async (cid) => {\r\n    try {\r\n      const response = await fetch(`${API_BASE_URL}/client/${cid}`);\r\n      if (!response.ok) {\r\n        throw new Error('Failed to fetch client');\r\n      }\r\n      return response.json();\r\n    } catch (error) {\r\n      console.error('API Error:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  // Get client score data\r\n  getClientScore: async (cid) => {\r\n    try {\r\n      const response = await fetch(`${API_BASE_URL}/score/${cid}`, {\r\n        method: 'POST'\r\n      });\r\n      if (!response.ok) {\r\n        throw new Error('Failed to fetch client score');\r\n      }\r\n      return response.json();\r\n    } catch (error) {\r\n      console.error('API Error:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  // Process client metrics\r\n  processMetrics: async (cid) => {\r\n    try {\r\n      const response = await fetch(`${API_BASE_URL}/metrics/${cid}`, {\r\n        method: 'POST'\r\n      });\r\n      if (!response.ok) {\r\n        throw new Error('Failed to process metrics');\r\n      }\r\n      return response.json();\r\n    } catch (error) {\r\n      console.error('API Error:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  // Process loan decision (approve/decline)\r\n  processLoanDecision: async (cid, decision, additionalData = {}) => {\r\n    try {\r\n      const response = await fetch(`${API_BASE_URL}/loan/${cid}/decision`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({ decision, ...additionalData })\r\n      });\r\n      if (!response.ok) {\r\n        throw new Error('Failed to process loan decision');\r\n      }\r\n      return response.json();\r\n    } catch (error) {\r\n      console.error('API Error:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  // Fetch client loan data\r\n  fetchClientLoanData: async (cid) => {\r\n    try {\r\n      const response = await fetch(`${API_BASE_URL}/client-loan-data/${cid}`);\r\n      if (!response.ok) {\r\n        throw new Error('Failed to fetch loan data');\r\n      }\r\n      return response.json();\r\n    } catch (error) {\r\n      console.error('API Error:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  // Update loan amount\r\n  updateLoanAmount: async (cid, amount) => {\r\n    try {\r\n      const response = await fetch(`${API_BASE_URL}/loan/${cid}/amount`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({ amount })\r\n      });\r\n      if (!response.ok) {\r\n        throw new Error('Failed to update loan amount');\r\n      }\r\n      return response.json();\r\n    } catch (error) {\r\n      console.error('API Error:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  // Notification endpoints\r\n  notifications: {\r\n    // Get notifications for the current user\r\n    getNotifications: async (role = 'loan_officer') => {\r\n      try {\r\n        const response = await fetch(`${API_BASE_URL}/notifications?role=${encodeURIComponent(role)}`);\r\n        if (!response.ok) {\r\n          throw new Error('Failed to fetch notifications');\r\n        }\r\n        return response.json();\r\n      } catch (error) {\r\n        console.error('API Error:', error);\r\n        throw error;\r\n      }\r\n    },\r\n\r\n    // Create a new notification\r\n    createNotification: async (notification) => {\r\n      try {\r\n        const response = await fetch(`${API_BASE_URL}/notifications`, {\r\n          method: 'POST',\r\n          headers: {\r\n            'Content-Type': 'application/json'\r\n          },\r\n          body: JSON.stringify(notification)\r\n        });\r\n        if (!response.ok) {\r\n          throw new Error('Failed to create notification');\r\n        }\r\n        return response.json();\r\n      } catch (error) {\r\n        console.error('API Error:', error);\r\n        throw error;\r\n      }\r\n    },\r\n\r\n    // Mark notifications as read\r\n    markAsRead: async (notificationIds, role = 'loan_officer') => {\r\n      try {\r\n        const response = await fetch(`${API_BASE_URL}/notifications/mark-read`, {\r\n          method: 'POST',\r\n          headers: {\r\n            'Content-Type': 'application/json'\r\n          },\r\n          body: JSON.stringify({ notificationIds, role })\r\n        });\r\n        if (!response.ok) {\r\n          throw new Error('Failed to mark notifications as read');\r\n        }\r\n        return response.json();\r\n      } catch (error) {\r\n        console.error('API Error:', error);\r\n        throw error;\r\n      }\r\n    }\r\n  },\r\n\r\n  // View client document by specific filename\r\n  viewDocumentByFilename: async (cid, filename, date = null) => {\r\n    try {\r\n      // Pad CID with leading zeros\r\n      const paddedCid = cid.toString().padStart(3, '0');\r\n\r\n      // Use the new endpoint that takes specific filename\r\n      console.log('Fetching document file:', filename, 'for CID:', paddedCid, 'date:', date);\r\n      \r\n      // Build URL with optional date parameter\r\n      let url = `${API_BASE_URL}/documents/${paddedCid}/file/${encodeURIComponent(filename)}`;\r\n      if (date) {\r\n        url += `?date=${encodeURIComponent(date)}`;\r\n      }\r\n      \r\n      const response = await fetch(url);\r\n      \r\n      if (!response.ok) {\r\n        const errorData = await response.json();\r\n        throw new Error(errorData.error || 'Failed to fetch document');\r\n      }\r\n      \r\n      // Get content type from response headers\r\n      const contentType = response.headers.get('content-type');\r\n      const blob = await response.blob();\r\n      \r\n      // Create object URL for preview\r\n      const objectUrl = URL.createObjectURL(new Blob([blob], { type: contentType }));\r\n      return {\r\n        url: objectUrl,\r\n        type: contentType\r\n      };\r\n    } catch (error) {\r\n      console.error('API Error:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  // View client document with preview support (legacy - uses document type)\r\n  viewDocument: async (cid, documentType) => {\r\n    try {\r\n      // Pad CID with leading zeros\r\n      const paddedCid = cid.toString().padStart(3, '0');\r\n\r\n      // Map document type to internal type\r\n      const internalType = DOCUMENT_TYPE_MAP[documentType];\r\n      if (!internalType) {\r\n        throw new Error(`Invalid document type: ${documentType}`);\r\n      }\r\n\r\n      // Encode the internal type for URL safety\r\n      const encodedType = encodeURIComponent(internalType);\r\n      console.log('Fetching document:', documentType, 'as', internalType, 'for CID:', paddedCid);\r\n      const response = await fetch(`${API_BASE_URL}/documents/${paddedCid}/${encodedType}`);\r\n      \r\n      if (!response.ok) {\r\n        const errorData = await response.json();\r\n        throw new Error(errorData.error || 'Failed to fetch document');\r\n      }\r\n      \r\n      // Get content type from response headers\r\n      const contentType = response.headers.get('content-type');\r\n      const blob = await response.blob();\r\n      \r\n      // Create object URL for preview\r\n      const objectUrl = URL.createObjectURL(new Blob([blob], { type: contentType }));\r\n      return {\r\n        url: objectUrl,\r\n        type: contentType\r\n      };\r\n    } catch (error) {\r\n      console.error('API Error:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  // Get all documents from latest folder\r\n  getLatestDocuments: async (cid) => {\r\n    try {\r\n      // Pad CID with leading zeros to match GCS folder structure (e.g., '1' -> '001')\r\n      const paddedCid = cid.toString().padStart(3, '0');\r\n      console.log('Getting documents for padded CID:', paddedCid);\r\n      const response = await fetch(`${API_BASE_URL}/documents/${paddedCid}/all`);\r\n      \r\n      if (!response.ok) {\r\n        const errorData = await response.json();\r\n        throw new Error(errorData.error || 'Failed to fetch documents');\r\n      }\r\n\r\n      const data = await response.json();\r\n      return data.documents;\r\n    } catch (error) {\r\n      console.error('API Error:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  // Get all document dates for a client\r\n  getDocumentDates: async (cid) => {\r\n    try {\r\n      // Pad CID with leading zeros to match GCS folder structure\r\n      const paddedCid = cid.toString().padStart(3, '0');\r\n      console.log('Getting document dates for padded CID:', paddedCid);\r\n      const response = await fetch(`${API_BASE_URL}/documents/${paddedCid}/dates`);\r\n      \r\n      if (!response.ok) {\r\n        const errorData = await response.json();\r\n        throw new Error(errorData.error || 'Failed to fetch document dates');\r\n      }\r\n\r\n      const data = await response.json();\r\n      return data.dates;\r\n    } catch (error) {\r\n      console.error('API Error:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  // Get documents from specific date folder\r\n  getDocumentsByDate: async (cid, date) => {\r\n    try {\r\n      // Pad CID with leading zeros\r\n      const paddedCid = cid.toString().padStart(3, '0');\r\n      console.log('Getting documents for padded CID:', paddedCid, 'date:', date);\r\n      const response = await fetch(`${API_BASE_URL}/documents/${paddedCid}/date/${date}`);\r\n      \r\n      if (!response.ok) {\r\n        const errorData = await response.json();\r\n        throw new Error(errorData.error || 'Failed to fetch documents');\r\n      }\r\n\r\n      const data = await response.json();\r\n      return data.documents;\r\n    } catch (error) {\r\n      console.error('API Error:', error);\r\n      throw error;\r\n    }\r\n  }\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}