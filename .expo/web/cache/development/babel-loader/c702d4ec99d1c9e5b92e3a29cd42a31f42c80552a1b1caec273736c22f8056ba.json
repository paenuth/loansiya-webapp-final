{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport React, { createContext, useState, useContext } from 'react';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nvar LoanContext = createContext();\nvar initialNotifications = [];\nvar initialLoans = [{\n  cid: \"001\",\n  name: \"John Doe\",\n  age: 26,\n  email: \"johndoe@gmail.com\",\n  number: \"+639123456789\",\n  address: \"123 Mabini Street, Metro Manila, 1100, Philippines\",\n  input: {\n    cid: \"001\",\n    paymentHistory: 50,\n    creditUtilization: 83,\n    creditHistoryLength: 30,\n    creditMix: 50,\n    newInquiries: 50\n  },\n  financial: {\n    monthlyIncome: 60000,\n    monthlyExpenses: 25000,\n    assets: 150000,\n    dti: 30\n  },\n  employer: \"ABC Corporation\",\n  position: \"Software Developer\",\n  loans: {\n    approved: {\n      amount: 20000,\n      status: \"PAID\"\n    },\n    pending: {\n      amount: 0,\n      status: \"None\"\n    },\n    loanHistory: [{\n      amount: 20000,\n      dateApplied: \"March 01, 2023\",\n      status: \"Approved\",\n      purpose: \"Medical Emergency\",\n      dueDate: \"August 01, 2023\",\n      paid: true\n    }, {\n      amount: 50000,\n      dateApplied: \"November 10, 2023\",\n      status: \"Approved\",\n      purpose: \"Business Expansion\",\n      dueDate: \"July 15, 2025\",\n      paid: false\n    }]\n  },\n  loanBalance: {\n    amount: 0,\n    dueDate: \"N/A\"\n  },\n  status: \"Pending\"\n}, {\n  cid: \"002\",\n  name: \"Maria Santos\",\n  age: 34,\n  email: \"maria.santos@email.com\",\n  number: \"+639456789123\",\n  address: \"45 Kalayaan Ave, Quezon City, 1102, Philippines\",\n  input: {\n    cid: \"002\",\n    paymentHistory: 100,\n    creditUtilization: 0,\n    creditHistoryLength: 45,\n    creditMix: 60,\n    newInquiries: 30\n  },\n  financial: {\n    monthlyIncome: 80000,\n    monthlyExpenses: 30000,\n    assets: 300000,\n    dti: 25\n  },\n  employer: \"Smart Solutions Inc.\",\n  position: \"Project Manager\",\n  loans: {\n    approved: {\n      amount: 75000,\n      status: \"PAID\"\n    },\n    pending: {\n      amount: 0,\n      status: \"None\"\n    },\n    loanHistory: [{\n      amount: 30000,\n      dateApplied: \"January 05, 2022\",\n      status: \"Approved\",\n      purpose: \"Car Maintenance\",\n      dueDate: \"June 05, 2022\",\n      paid: true\n    }, {\n      amount: 75000,\n      dateApplied: \"September 15, 2023\",\n      status: \"Approved\",\n      purpose: \"Home Renovation\",\n      dueDate: \"March 15, 2024\",\n      paid: true\n    }]\n  },\n  loanBalance: {\n    amount: 0,\n    dueDate: \"N/A\"\n  },\n  status: \"Pending\"\n}, {\n  cid: \"003\",\n  name: \"Carlos Tan\",\n  age: 29,\n  email: \"carlos.tan@email.com\",\n  number: \"+639321456987\",\n  address: \"78 Rizal Avenue, Lucena City, Quezon, 4301, Philippines\",\n  input: {\n    cid: \"003\",\n    paymentHistory: 100,\n    creditUtilization: 0,\n    creditHistoryLength: 25,\n    creditMix: 30,\n    newInquiries: 60\n  },\n  financial: {\n    monthlyIncome: 45000,\n    monthlyExpenses: 15000,\n    assets: 100000,\n    dti: 33\n  },\n  employer: \"CT Freelance Services\",\n  position: \"Graphic Designer\",\n  loans: {\n    approved: {\n      amount: 15000,\n      status: \"PAID\"\n    },\n    pending: {\n      amount: 0,\n      status: \"None\"\n    },\n    loanHistory: [{\n      amount: 15000,\n      dateApplied: \"February 01, 2023\",\n      status: \"Approved\",\n      purpose: \"Laptop Upgrade\",\n      dueDate: \"July 01, 2023\",\n      paid: true\n    }, {\n      amount: 20000,\n      dateApplied: \"October 01, 2023\",\n      status: \"Declined\",\n      purpose: \"Studio Equipment\",\n      dueDate: null,\n      paid: false\n    }]\n  },\n  loanBalance: {\n    amount: 0,\n    dueDate: \"N/A\"\n  },\n  status: \"Pending\"\n}, {\n  cid: \"004\",\n  name: \"Alicia Ramos\",\n  age: 42,\n  email: \"alicia.ramos@email.com\",\n  number: \"+639874512369\",\n  address: \"56 Mabuhay Lane, Taguig City, 1630, Philippines\",\n  input: {\n    cid: \"004\",\n    paymentHistory: 50,\n    creditUtilization: 67,\n    creditHistoryLength: 40,\n    creditMix: 60,\n    newInquiries: 40\n  },\n  financial: {\n    monthlyIncome: 120000,\n    monthlyExpenses: 50000,\n    assets: 600000,\n    dti: 20\n  },\n  employer: \"Metro Bank\",\n  position: \"Branch Manager\",\n  loans: {\n    approved: {\n      amount: 100000,\n      status: \"ONGOING\"\n    },\n    pending: {\n      amount: 0,\n      status: \"None\"\n    },\n    loanHistory: [{\n      amount: 50000,\n      dateApplied: \"July 01, 2022\",\n      status: \"Approved\",\n      purpose: \"Tuition\",\n      dueDate: \"December 01, 2022\",\n      paid: true\n    }, {\n      amount: 100000,\n      dateApplied: \"March 20, 2024\",\n      status: \"Approved\",\n      purpose: \"Property Tax Payment\",\n      dueDate: \"August 30, 2025\",\n      paid: false\n    }]\n  },\n  loanBalance: {\n    amount: 100000,\n    dueDate: \"August 30, 2025\"\n  },\n  status: \"Pending\"\n}, {\n  cid: \"005\",\n  name: \"Juan Dela Cruz\",\n  age: 35,\n  email: \"juan.delacruz@email.com\",\n  number: \"+639981234567\",\n  address: \"99 Kalye Mahirap, Tondo, Manila, 1013, Philippines\",\n  input: {\n    cid: \"005\",\n    paymentHistory: 50,\n    creditUtilization: 95,\n    creditHistoryLength: 6,\n    creditMix: 10,\n    newInquiries: 80\n  },\n  financial: {\n    monthlyIncome: 25000,\n    monthlyExpenses: 22000,\n    assets: 20000,\n    dti: 88\n  },\n  employer: \"None\",\n  position: \"Freelancer\",\n  loans: {\n    approved: {\n      amount: 10000,\n      status: \"ONGOING\"\n    },\n    pending: {\n      amount: 0,\n      status: \"None\"\n    },\n    loanHistory: [{\n      amount: 8000,\n      dateApplied: \"January 15, 2022\",\n      status: \"Approved\",\n      purpose: \"Medical Emergency\",\n      dueDate: \"June 15, 2022\",\n      paid: false\n    }, {\n      amount: 10000,\n      dateApplied: \"October 01, 2023\",\n      status: \"Approved\",\n      purpose: \"Home Repairs\",\n      dueDate: \"April 01, 2024\",\n      paid: false\n    }]\n  },\n  loanBalance: {\n    amount: 10000,\n    dueDate: \"April 01, 2024\"\n  },\n  status: \"Pending\"\n}];\nexport function LoanProvider(_ref) {\n  var children = _ref.children;\n  var _useState = useState(initialLoans),\n    _useState2 = _slicedToArray(_useState, 2),\n    loans = _useState2[0],\n    setLoans = _useState2[1];\n  var _useState3 = useState(initialNotifications),\n    _useState4 = _slicedToArray(_useState3, 2),\n    notifications = _useState4[0],\n    setNotifications = _useState4[1];\n  var _useState5 = useState(0),\n    _useState6 = _slicedToArray(_useState5, 2),\n    unreadCount = _useState6[0],\n    setUnreadCount = _useState6[1];\n  var addNotification = function addNotification(notification) {\n    setNotifications(function (prev) {\n      return [_objectSpread({\n        id: Date.now(),\n        timestamp: new Date().toISOString(),\n        read: false\n      }, notification)].concat(_toConsumableArray(prev));\n    });\n    setUnreadCount(function (prev) {\n      return prev + 1;\n    });\n  };\n  var markNotificationsAsRead = function markNotificationsAsRead() {\n    setNotifications(function (prev) {\n      return prev.map(function (notif) {\n        return _objectSpread(_objectSpread({}, notif), {}, {\n          read: true\n        });\n      });\n    });\n    setUnreadCount(0);\n  };\n  var clearNotifications = function clearNotifications() {\n    setNotifications([]);\n    setUnreadCount(0);\n  };\n  var updateLoan = function updateLoan(cid, updates) {\n    setLoans(function (prevLoans) {\n      return prevLoans.map(function (loan) {\n        return loan.cid === cid ? _objectSpread(_objectSpread({}, loan), updates) : loan;\n      });\n    });\n    if (updates.status === 'Approved' || updates.status === 'Declined') {\n      var _loan = loans.find(function (l) {\n        return l.cid === cid;\n      });\n      addNotification({\n        cid: cid,\n        clientName: _loan.name,\n        type: 'status_change',\n        status: updates.status,\n        message: \"Loan request for client \" + _loan.name + \" has been \" + updates.status.toLowerCase() + \" by Operations Manager\"\n      });\n    }\n  };\n  var updateLoanAmount = function updateLoanAmount(cid, newAmount) {\n    var loan = loans.find(function (l) {\n      return l.cid === cid;\n    });\n    setLoans(function (prevLoans) {\n      return prevLoans.map(function (loan) {\n        if (loan.cid === cid) {\n          var updatedHistory = _toConsumableArray(loan.loans.loanHistory);\n          var latestRequestIndex = updatedHistory.findIndex(function (loan, _, arr) {\n            return new Date(loan.dateApplied).getTime() === Math.max.apply(Math, _toConsumableArray(arr.map(function (l) {\n              return new Date(l.dateApplied).getTime();\n            })));\n          });\n          if (latestRequestIndex !== -1) {\n            updatedHistory[latestRequestIndex] = _objectSpread(_objectSpread({}, updatedHistory[latestRequestIndex]), {}, {\n              amount: newAmount\n            });\n          }\n          return _objectSpread(_objectSpread({}, loan), {}, {\n            loans: _objectSpread(_objectSpread({}, loan.loans), {}, {\n              loanHistory: updatedHistory\n            })\n          });\n        }\n        return loan;\n      });\n    });\n  };\n  if (loan) {\n    addNotification({\n      cid: cid,\n      clientName: loan.name,\n      type: 'amount_change',\n      amount: newAmount,\n      message: \"Loan amount for client \" + loan.name + \" has been updated to \\u20B1\" + newAmount.toLocaleString() + \" by Operations Manager\"\n    });\n  }\n  return _jsx(LoanContext.Provider, {\n    value: {\n      loans: loans,\n      updateLoan: updateLoan,\n      updateLoanAmount: updateLoanAmount,\n      notifications: notifications,\n      unreadCount: unreadCount,\n      markNotificationsAsRead: markNotificationsAsRead,\n      clearNotifications: clearNotifications\n    },\n    children: children\n  });\n}\nexport function useLoan() {\n  var context = useContext(LoanContext);\n  if (!context) {\n    throw new Error('useLoan must be used within a LoanProvider');\n  }\n  return context;\n}","map":{"version":3,"names":["React","createContext","useState","useContext","jsx","_jsx","LoanContext","initialNotifications","initialLoans","cid","name","age","email","number","address","input","paymentHistory","creditUtilization","creditHistoryLength","creditMix","newInquiries","financial","monthlyIncome","monthlyExpenses","assets","dti","employer","position","loans","approved","amount","status","pending","loanHistory","dateApplied","purpose","dueDate","paid","loanBalance","LoanProvider","_ref","children","_useState","_useState2","_slicedToArray","setLoans","_useState3","_useState4","notifications","setNotifications","_useState5","_useState6","unreadCount","setUnreadCount","addNotification","notification","prev","_objectSpread","id","Date","now","timestamp","toISOString","read","concat","_toConsumableArray","markNotificationsAsRead","map","notif","clearNotifications","updateLoan","updates","prevLoans","loan","find","l","clientName","type","message","toLowerCase","updateLoanAmount","newAmount","updatedHistory","latestRequestIndex","findIndex","_","arr","getTime","Math","max","apply","toLocaleString","Provider","value","useLoan","context","Error"],"sources":["C:/Users/ajohn/loansiya-webapp1.1.0/src/contexts/LoanContext.js"],"sourcesContent":["import React, { createContext, useState, useContext } from 'react';\r\n\r\nconst LoanContext = createContext();\r\n\r\nconst initialNotifications = [];\r\n\r\nconst initialLoans = [\r\n  {\r\n    cid: \"001\",\r\n    name: \"John Doe\",\r\n    age: 26,\r\n    email: \"johndoe@gmail.com\",\r\n    number: \"+639123456789\",\r\n    address: \"123 Mabini Street, Metro Manila, 1100, Philippines\",\r\n    input: {\r\n      cid: \"001\",\r\n      paymentHistory: 50,\r\n      creditUtilization: 83,\r\n      creditHistoryLength: 30,\r\n      creditMix: 50,\r\n      newInquiries: 50\r\n    },\r\n    financial: {\r\n      monthlyIncome: 60000,\r\n      monthlyExpenses: 25000,\r\n      assets: 150000,\r\n      dti: 30\r\n    },\r\n    employer: \"ABC Corporation\",\r\n    position: \"Software Developer\",\r\n    loans: {\r\n      approved: {\r\n        amount: 20000,\r\n        status: \"PAID\"\r\n      },\r\n      pending: {\r\n        amount: 0,\r\n        status: \"None\"\r\n      },\r\n      loanHistory: [\r\n        {\r\n          amount: 20000,\r\n          dateApplied: \"March 01, 2023\",\r\n          status: \"Approved\",\r\n          purpose: \"Medical Emergency\",\r\n          dueDate: \"August 01, 2023\",\r\n          paid: true\r\n        },\r\n        {\r\n          amount: 50000,\r\n          dateApplied: \"November 10, 2023\",\r\n          status: \"Approved\",\r\n          purpose: \"Business Expansion\",\r\n          dueDate: \"July 15, 2025\",\r\n          paid: false\r\n        }\r\n      ]\r\n    },\r\n    loanBalance: {\r\n      amount: 0,\r\n      dueDate: \"N/A\"\r\n    },\r\n    status: \"Pending\" // Added for UI state\r\n  },\r\n  {\r\n    cid: \"002\",\r\n    name: \"Maria Santos\",\r\n    age: 34,\r\n    email: \"maria.santos@email.com\",\r\n    number: \"+639456789123\",\r\n    address: \"45 Kalayaan Ave, Quezon City, 1102, Philippines\",\r\n    input: {\r\n      cid: \"002\",\r\n      paymentHistory: 100,\r\n      creditUtilization: 0,\r\n      creditHistoryLength: 45,\r\n      creditMix: 60,\r\n      newInquiries: 30\r\n    },\r\n    financial: {\r\n      monthlyIncome: 80000,\r\n      monthlyExpenses: 30000,\r\n      assets: 300000,\r\n      dti: 25\r\n    },\r\n    employer: \"Smart Solutions Inc.\",\r\n    position: \"Project Manager\",\r\n    loans: {\r\n      approved: {\r\n        amount: 75000,\r\n        status: \"PAID\"\r\n      },\r\n      pending: {\r\n        amount: 0,\r\n        status: \"None\"\r\n      },\r\n      loanHistory: [\r\n        {\r\n          amount: 30000,\r\n          dateApplied: \"January 05, 2022\",\r\n          status: \"Approved\",\r\n          purpose: \"Car Maintenance\",\r\n          dueDate: \"June 05, 2022\",\r\n          paid: true\r\n        },\r\n        {\r\n          amount: 75000,\r\n          dateApplied: \"September 15, 2023\",\r\n          status: \"Approved\",\r\n          purpose: \"Home Renovation\",\r\n          dueDate: \"March 15, 2024\",\r\n          paid: true\r\n        }\r\n      ]\r\n    },\r\n    loanBalance: {\r\n      amount: 0,\r\n      dueDate: \"N/A\"\r\n    },\r\n    status: \"Pending\" // Added for UI state\r\n  },\r\n  {\r\n    cid: \"003\",\r\n    name: \"Carlos Tan\",\r\n    age: 29,\r\n    email: \"carlos.tan@email.com\",\r\n    number: \"+639321456987\",\r\n    address: \"78 Rizal Avenue, Lucena City, Quezon, 4301, Philippines\",\r\n    input: {\r\n      cid: \"003\",\r\n      paymentHistory: 100,\r\n      creditUtilization: 0,\r\n      creditHistoryLength: 25,\r\n      creditMix: 30,\r\n      newInquiries: 60\r\n    },\r\n    financial: {\r\n      monthlyIncome: 45000,\r\n      monthlyExpenses: 15000,\r\n      assets: 100000,\r\n      dti: 33\r\n    },\r\n    employer: \"CT Freelance Services\",\r\n    position: \"Graphic Designer\",\r\n    loans: {\r\n      approved: {\r\n        amount: 15000,\r\n        status: \"PAID\"\r\n      },\r\n      pending: {\r\n        amount: 0,\r\n        status: \"None\"\r\n      },\r\n      loanHistory: [\r\n        {\r\n          amount: 15000,\r\n          dateApplied: \"February 01, 2023\",\r\n          status: \"Approved\",\r\n          purpose: \"Laptop Upgrade\",\r\n          dueDate: \"July 01, 2023\",\r\n          paid: true\r\n        },\r\n        {\r\n          amount: 20000,\r\n          dateApplied: \"October 01, 2023\",\r\n          status: \"Declined\",\r\n          purpose: \"Studio Equipment\",\r\n          dueDate: null,\r\n          paid: false\r\n        }\r\n      ]\r\n    },\r\n    loanBalance: {\r\n      amount: 0,\r\n      dueDate: \"N/A\"\r\n    },\r\n    status: \"Pending\" // Added for UI state\r\n  },\r\n  {\r\n    cid: \"004\",\r\n    name: \"Alicia Ramos\",\r\n    age: 42,\r\n    email: \"alicia.ramos@email.com\",\r\n    number: \"+639874512369\",\r\n    address: \"56 Mabuhay Lane, Taguig City, 1630, Philippines\",\r\n    input: {\r\n      cid: \"004\",\r\n      paymentHistory: 50,\r\n      creditUtilization: 67,\r\n      creditHistoryLength: 40,\r\n      creditMix: 60,\r\n      newInquiries: 40\r\n    },\r\n    financial: {\r\n      monthlyIncome: 120000,\r\n      monthlyExpenses: 50000,\r\n      assets: 600000,\r\n      dti: 20\r\n    },\r\n    employer: \"Metro Bank\",\r\n    position: \"Branch Manager\",\r\n    loans: {\r\n      approved: {\r\n        amount: 100000,\r\n        status: \"ONGOING\"\r\n      },\r\n      pending: {\r\n        amount: 0,\r\n        status: \"None\"\r\n      },\r\n      loanHistory: [\r\n        {\r\n          amount: 50000,\r\n          dateApplied: \"July 01, 2022\",\r\n          status: \"Approved\",\r\n          purpose: \"Tuition\",\r\n          dueDate: \"December 01, 2022\",\r\n          paid: true\r\n        },\r\n        {\r\n          amount: 100000,\r\n          dateApplied: \"March 20, 2024\",\r\n          status: \"Approved\",\r\n          purpose: \"Property Tax Payment\",\r\n          dueDate: \"August 30, 2025\",\r\n          paid: false\r\n        }\r\n      ]\r\n    },\r\n    loanBalance: {\r\n      amount: 100000,\r\n      dueDate: \"August 30, 2025\"\r\n    },\r\n    status: \"Pending\" // Added for UI state\r\n  },\r\n  {\r\n    cid: \"005\",\r\n    name: \"Juan Dela Cruz\",\r\n    age: 35,\r\n    email: \"juan.delacruz@email.com\",\r\n    number: \"+639981234567\",\r\n    address: \"99 Kalye Mahirap, Tondo, Manila, 1013, Philippines\",\r\n    input: {\r\n      cid: \"005\",\r\n      paymentHistory: 50,\r\n      creditUtilization: 95,\r\n      creditHistoryLength: 6,\r\n      creditMix: 10,\r\n      newInquiries: 80\r\n    },\r\n    financial: {\r\n      monthlyIncome: 25000,\r\n      monthlyExpenses: 22000,\r\n      assets: 20000,\r\n      dti: 88\r\n    },\r\n    employer: \"None\",\r\n    position: \"Freelancer\",\r\n    loans: {\r\n      approved: {\r\n        amount: 10000,\r\n        status: \"ONGOING\"\r\n      },\r\n      pending: {\r\n        amount: 0,\r\n        status: \"None\"\r\n      },\r\n      loanHistory: [\r\n        {\r\n          amount: 8000,\r\n          dateApplied: \"January 15, 2022\",\r\n          status: \"Approved\",\r\n          purpose: \"Medical Emergency\",\r\n          dueDate: \"June 15, 2022\",\r\n          paid: false\r\n        },\r\n        {\r\n          amount: 10000,\r\n          dateApplied: \"October 01, 2023\",\r\n          status: \"Approved\",\r\n          purpose: \"Home Repairs\",\r\n          dueDate: \"April 01, 2024\",\r\n          paid: false\r\n        }\r\n      ]\r\n    },\r\n    loanBalance: {\r\n      amount: 10000,\r\n      dueDate: \"April 01, 2024\"\r\n    },\r\n    status: \"Pending\" // Added for UI state\r\n  }\r\n];\r\n\r\nexport function LoanProvider({ children }) {\r\n  const [loans, setLoans] = useState(initialLoans);\r\n  const [notifications, setNotifications] = useState(initialNotifications);\r\n  const [unreadCount, setUnreadCount] = useState(0);\r\n\r\n  const addNotification = (notification) => {\r\n    setNotifications(prev => [{\r\n      id: Date.now(),\r\n      timestamp: new Date().toISOString(),\r\n      read: false,\r\n      ...notification\r\n    }, ...prev]);\r\n    setUnreadCount(prev => prev + 1);\r\n  };\r\n\r\n  const markNotificationsAsRead = () => {\r\n    setNotifications(prev => prev.map(notif => ({ ...notif, read: true })));\r\n    setUnreadCount(0);\r\n  };\r\n\r\n  const clearNotifications = () => {\r\n    setNotifications([]);\r\n    setUnreadCount(0);\r\n  };\r\n\r\n  const updateLoan = (cid, updates) => {\r\n    setLoans(prevLoans =>\r\n      prevLoans.map(loan =>\r\n        loan.cid === cid\r\n          ? { ...loan, ...updates }\r\n          : loan\r\n      )\r\n    );\r\n\r\n    // Add notification for loan status changes\r\n    if (updates.status === 'Approved' || updates.status === 'Declined') {\r\n      const loan = loans.find(l => l.cid === cid);\r\n      addNotification({\r\n        cid,\r\n        clientName: loan.name,\r\n        type: 'status_change',\r\n        status: updates.status,\r\n        message: `Loan request for client ${loan.name} has been ${updates.status.toLowerCase()} by Operations Manager`\r\n      });\r\n    }\r\n  };\r\n\r\n  const updateLoanAmount = (cid, newAmount) => {\r\n    const loan = loans.find(l => l.cid === cid);\r\n    setLoans(prevLoans =>\r\n      prevLoans.map(loan => {\r\n        if (loan.cid === cid) {\r\n          const updatedHistory = [...loan.loans.loanHistory];\r\n          const latestRequestIndex = updatedHistory.findIndex(\r\n            (loan, _, arr) =>\r\n            new Date(loan.dateApplied).getTime() ===\r\n            Math.max(...arr.map(l => new Date(l.dateApplied).getTime()))\r\n          );\r\n          \r\n          if (latestRequestIndex !== -1) {\r\n            updatedHistory[latestRequestIndex] = {\r\n              ...updatedHistory[latestRequestIndex],\r\n              amount: newAmount\r\n            };\r\n          }\r\n\r\n          return {\r\n            ...loan,\r\n            loans: {\r\n              ...loan.loans,\r\n              loanHistory: updatedHistory\r\n            }\r\n          };\r\n        }\r\n        return loan;\r\n      })\r\n    );\r\n  };\r\n\r\n  // Trigger notification for loan amount changes\r\n  if (loan) {\r\n    addNotification({\r\n      cid,\r\n      clientName: loan.name,\r\n      type: 'amount_change',\r\n      amount: newAmount,\r\n      message: `Loan amount for client ${loan.name} has been updated to â‚±${newAmount.toLocaleString()} by Operations Manager`\r\n    });\r\n  }\r\n\r\n  return (\r\n    <LoanContext.Provider value={{\r\n      loans,\r\n      updateLoan,\r\n      updateLoanAmount,\r\n      notifications,\r\n      unreadCount,\r\n      markNotificationsAsRead,\r\n      clearNotifications\r\n    }}>\r\n      {children}\r\n    </LoanContext.Provider>\r\n  );\r\n}\r\n\r\nexport function useLoan() {\r\n  const context = useContext(LoanContext);\r\n  if (!context) {\r\n    throw new Error('useLoan must be used within a LoanProvider');\r\n  }\r\n  return context;\r\n}"],"mappings":";;;;;AAAA,OAAOA,KAAK,IAAIC,aAAa,EAAEC,QAAQ,EAAEC,UAAU,QAAQ,OAAO;AAAC,SAAAC,GAAA,IAAAC,IAAA;AAEnE,IAAMC,WAAW,GAAGL,aAAa,CAAC,CAAC;AAEnC,IAAMM,oBAAoB,GAAG,EAAE;AAE/B,IAAMC,YAAY,GAAG,CACnB;EACEC,GAAG,EAAE,KAAK;EACVC,IAAI,EAAE,UAAU;EAChBC,GAAG,EAAE,EAAE;EACPC,KAAK,EAAE,mBAAmB;EAC1BC,MAAM,EAAE,eAAe;EACvBC,OAAO,EAAE,oDAAoD;EAC7DC,KAAK,EAAE;IACLN,GAAG,EAAE,KAAK;IACVO,cAAc,EAAE,EAAE;IAClBC,iBAAiB,EAAE,EAAE;IACrBC,mBAAmB,EAAE,EAAE;IACvBC,SAAS,EAAE,EAAE;IACbC,YAAY,EAAE;EAChB,CAAC;EACDC,SAAS,EAAE;IACTC,aAAa,EAAE,KAAK;IACpBC,eAAe,EAAE,KAAK;IACtBC,MAAM,EAAE,MAAM;IACdC,GAAG,EAAE;EACP,CAAC;EACDC,QAAQ,EAAE,iBAAiB;EAC3BC,QAAQ,EAAE,oBAAoB;EAC9BC,KAAK,EAAE;IACLC,QAAQ,EAAE;MACRC,MAAM,EAAE,KAAK;MACbC,MAAM,EAAE;IACV,CAAC;IACDC,OAAO,EAAE;MACPF,MAAM,EAAE,CAAC;MACTC,MAAM,EAAE;IACV,CAAC;IACDE,WAAW,EAAE,CACX;MACEH,MAAM,EAAE,KAAK;MACbI,WAAW,EAAE,gBAAgB;MAC7BH,MAAM,EAAE,UAAU;MAClBI,OAAO,EAAE,mBAAmB;MAC5BC,OAAO,EAAE,iBAAiB;MAC1BC,IAAI,EAAE;IACR,CAAC,EACD;MACEP,MAAM,EAAE,KAAK;MACbI,WAAW,EAAE,mBAAmB;MAChCH,MAAM,EAAE,UAAU;MAClBI,OAAO,EAAE,oBAAoB;MAC7BC,OAAO,EAAE,eAAe;MACxBC,IAAI,EAAE;IACR,CAAC;EAEL,CAAC;EACDC,WAAW,EAAE;IACXR,MAAM,EAAE,CAAC;IACTM,OAAO,EAAE;EACX,CAAC;EACDL,MAAM,EAAE;AACV,CAAC,EACD;EACEtB,GAAG,EAAE,KAAK;EACVC,IAAI,EAAE,cAAc;EACpBC,GAAG,EAAE,EAAE;EACPC,KAAK,EAAE,wBAAwB;EAC/BC,MAAM,EAAE,eAAe;EACvBC,OAAO,EAAE,iDAAiD;EAC1DC,KAAK,EAAE;IACLN,GAAG,EAAE,KAAK;IACVO,cAAc,EAAE,GAAG;IACnBC,iBAAiB,EAAE,CAAC;IACpBC,mBAAmB,EAAE,EAAE;IACvBC,SAAS,EAAE,EAAE;IACbC,YAAY,EAAE;EAChB,CAAC;EACDC,SAAS,EAAE;IACTC,aAAa,EAAE,KAAK;IACpBC,eAAe,EAAE,KAAK;IACtBC,MAAM,EAAE,MAAM;IACdC,GAAG,EAAE;EACP,CAAC;EACDC,QAAQ,EAAE,sBAAsB;EAChCC,QAAQ,EAAE,iBAAiB;EAC3BC,KAAK,EAAE;IACLC,QAAQ,EAAE;MACRC,MAAM,EAAE,KAAK;MACbC,MAAM,EAAE;IACV,CAAC;IACDC,OAAO,EAAE;MACPF,MAAM,EAAE,CAAC;MACTC,MAAM,EAAE;IACV,CAAC;IACDE,WAAW,EAAE,CACX;MACEH,MAAM,EAAE,KAAK;MACbI,WAAW,EAAE,kBAAkB;MAC/BH,MAAM,EAAE,UAAU;MAClBI,OAAO,EAAE,iBAAiB;MAC1BC,OAAO,EAAE,eAAe;MACxBC,IAAI,EAAE;IACR,CAAC,EACD;MACEP,MAAM,EAAE,KAAK;MACbI,WAAW,EAAE,oBAAoB;MACjCH,MAAM,EAAE,UAAU;MAClBI,OAAO,EAAE,iBAAiB;MAC1BC,OAAO,EAAE,gBAAgB;MACzBC,IAAI,EAAE;IACR,CAAC;EAEL,CAAC;EACDC,WAAW,EAAE;IACXR,MAAM,EAAE,CAAC;IACTM,OAAO,EAAE;EACX,CAAC;EACDL,MAAM,EAAE;AACV,CAAC,EACD;EACEtB,GAAG,EAAE,KAAK;EACVC,IAAI,EAAE,YAAY;EAClBC,GAAG,EAAE,EAAE;EACPC,KAAK,EAAE,sBAAsB;EAC7BC,MAAM,EAAE,eAAe;EACvBC,OAAO,EAAE,yDAAyD;EAClEC,KAAK,EAAE;IACLN,GAAG,EAAE,KAAK;IACVO,cAAc,EAAE,GAAG;IACnBC,iBAAiB,EAAE,CAAC;IACpBC,mBAAmB,EAAE,EAAE;IACvBC,SAAS,EAAE,EAAE;IACbC,YAAY,EAAE;EAChB,CAAC;EACDC,SAAS,EAAE;IACTC,aAAa,EAAE,KAAK;IACpBC,eAAe,EAAE,KAAK;IACtBC,MAAM,EAAE,MAAM;IACdC,GAAG,EAAE;EACP,CAAC;EACDC,QAAQ,EAAE,uBAAuB;EACjCC,QAAQ,EAAE,kBAAkB;EAC5BC,KAAK,EAAE;IACLC,QAAQ,EAAE;MACRC,MAAM,EAAE,KAAK;MACbC,MAAM,EAAE;IACV,CAAC;IACDC,OAAO,EAAE;MACPF,MAAM,EAAE,CAAC;MACTC,MAAM,EAAE;IACV,CAAC;IACDE,WAAW,EAAE,CACX;MACEH,MAAM,EAAE,KAAK;MACbI,WAAW,EAAE,mBAAmB;MAChCH,MAAM,EAAE,UAAU;MAClBI,OAAO,EAAE,gBAAgB;MACzBC,OAAO,EAAE,eAAe;MACxBC,IAAI,EAAE;IACR,CAAC,EACD;MACEP,MAAM,EAAE,KAAK;MACbI,WAAW,EAAE,kBAAkB;MAC/BH,MAAM,EAAE,UAAU;MAClBI,OAAO,EAAE,kBAAkB;MAC3BC,OAAO,EAAE,IAAI;MACbC,IAAI,EAAE;IACR,CAAC;EAEL,CAAC;EACDC,WAAW,EAAE;IACXR,MAAM,EAAE,CAAC;IACTM,OAAO,EAAE;EACX,CAAC;EACDL,MAAM,EAAE;AACV,CAAC,EACD;EACEtB,GAAG,EAAE,KAAK;EACVC,IAAI,EAAE,cAAc;EACpBC,GAAG,EAAE,EAAE;EACPC,KAAK,EAAE,wBAAwB;EAC/BC,MAAM,EAAE,eAAe;EACvBC,OAAO,EAAE,iDAAiD;EAC1DC,KAAK,EAAE;IACLN,GAAG,EAAE,KAAK;IACVO,cAAc,EAAE,EAAE;IAClBC,iBAAiB,EAAE,EAAE;IACrBC,mBAAmB,EAAE,EAAE;IACvBC,SAAS,EAAE,EAAE;IACbC,YAAY,EAAE;EAChB,CAAC;EACDC,SAAS,EAAE;IACTC,aAAa,EAAE,MAAM;IACrBC,eAAe,EAAE,KAAK;IACtBC,MAAM,EAAE,MAAM;IACdC,GAAG,EAAE;EACP,CAAC;EACDC,QAAQ,EAAE,YAAY;EACtBC,QAAQ,EAAE,gBAAgB;EAC1BC,KAAK,EAAE;IACLC,QAAQ,EAAE;MACRC,MAAM,EAAE,MAAM;MACdC,MAAM,EAAE;IACV,CAAC;IACDC,OAAO,EAAE;MACPF,MAAM,EAAE,CAAC;MACTC,MAAM,EAAE;IACV,CAAC;IACDE,WAAW,EAAE,CACX;MACEH,MAAM,EAAE,KAAK;MACbI,WAAW,EAAE,eAAe;MAC5BH,MAAM,EAAE,UAAU;MAClBI,OAAO,EAAE,SAAS;MAClBC,OAAO,EAAE,mBAAmB;MAC5BC,IAAI,EAAE;IACR,CAAC,EACD;MACEP,MAAM,EAAE,MAAM;MACdI,WAAW,EAAE,gBAAgB;MAC7BH,MAAM,EAAE,UAAU;MAClBI,OAAO,EAAE,sBAAsB;MAC/BC,OAAO,EAAE,iBAAiB;MAC1BC,IAAI,EAAE;IACR,CAAC;EAEL,CAAC;EACDC,WAAW,EAAE;IACXR,MAAM,EAAE,MAAM;IACdM,OAAO,EAAE;EACX,CAAC;EACDL,MAAM,EAAE;AACV,CAAC,EACD;EACEtB,GAAG,EAAE,KAAK;EACVC,IAAI,EAAE,gBAAgB;EACtBC,GAAG,EAAE,EAAE;EACPC,KAAK,EAAE,yBAAyB;EAChCC,MAAM,EAAE,eAAe;EACvBC,OAAO,EAAE,oDAAoD;EAC7DC,KAAK,EAAE;IACLN,GAAG,EAAE,KAAK;IACVO,cAAc,EAAE,EAAE;IAClBC,iBAAiB,EAAE,EAAE;IACrBC,mBAAmB,EAAE,CAAC;IACtBC,SAAS,EAAE,EAAE;IACbC,YAAY,EAAE;EAChB,CAAC;EACDC,SAAS,EAAE;IACTC,aAAa,EAAE,KAAK;IACpBC,eAAe,EAAE,KAAK;IACtBC,MAAM,EAAE,KAAK;IACbC,GAAG,EAAE;EACP,CAAC;EACDC,QAAQ,EAAE,MAAM;EAChBC,QAAQ,EAAE,YAAY;EACtBC,KAAK,EAAE;IACLC,QAAQ,EAAE;MACRC,MAAM,EAAE,KAAK;MACbC,MAAM,EAAE;IACV,CAAC;IACDC,OAAO,EAAE;MACPF,MAAM,EAAE,CAAC;MACTC,MAAM,EAAE;IACV,CAAC;IACDE,WAAW,EAAE,CACX;MACEH,MAAM,EAAE,IAAI;MACZI,WAAW,EAAE,kBAAkB;MAC/BH,MAAM,EAAE,UAAU;MAClBI,OAAO,EAAE,mBAAmB;MAC5BC,OAAO,EAAE,eAAe;MACxBC,IAAI,EAAE;IACR,CAAC,EACD;MACEP,MAAM,EAAE,KAAK;MACbI,WAAW,EAAE,kBAAkB;MAC/BH,MAAM,EAAE,UAAU;MAClBI,OAAO,EAAE,cAAc;MACvBC,OAAO,EAAE,gBAAgB;MACzBC,IAAI,EAAE;IACR,CAAC;EAEL,CAAC;EACDC,WAAW,EAAE;IACXR,MAAM,EAAE,KAAK;IACbM,OAAO,EAAE;EACX,CAAC;EACDL,MAAM,EAAE;AACV,CAAC,CACF;AAED,OAAO,SAASQ,YAAYA,CAAAC,IAAA,EAAe;EAAA,IAAZC,QAAQ,GAAAD,IAAA,CAARC,QAAQ;EACrC,IAAAC,SAAA,GAA0BxC,QAAQ,CAACM,YAAY,CAAC;IAAAmC,UAAA,GAAAC,cAAA,CAAAF,SAAA;IAAzCd,KAAK,GAAAe,UAAA;IAAEE,QAAQ,GAAAF,UAAA;EACtB,IAAAG,UAAA,GAA0C5C,QAAQ,CAACK,oBAAoB,CAAC;IAAAwC,UAAA,GAAAH,cAAA,CAAAE,UAAA;IAAjEE,aAAa,GAAAD,UAAA;IAAEE,gBAAgB,GAAAF,UAAA;EACtC,IAAAG,UAAA,GAAsChD,QAAQ,CAAC,CAAC,CAAC;IAAAiD,UAAA,GAAAP,cAAA,CAAAM,UAAA;IAA1CE,WAAW,GAAAD,UAAA;IAAEE,cAAc,GAAAF,UAAA;EAElC,IAAMG,eAAe,GAAG,SAAlBA,eAAeA,CAAIC,YAAY,EAAK;IACxCN,gBAAgB,CAAC,UAAAO,IAAI;MAAA,QAAAC,aAAA;QACnBC,EAAE,EAAEC,IAAI,CAACC,GAAG,CAAC,CAAC;QACdC,SAAS,EAAE,IAAIF,IAAI,CAAC,CAAC,CAACG,WAAW,CAAC,CAAC;QACnCC,IAAI,EAAE;MAAK,GACRR,YAAY,GAAAS,MAAA,CAAAC,kBAAA,CACXT,IAAI;IAAA,CAAC,CAAC;IACZH,cAAc,CAAC,UAAAG,IAAI;MAAA,OAAIA,IAAI,GAAG,CAAC;IAAA,EAAC;EAClC,CAAC;EAED,IAAMU,uBAAuB,GAAG,SAA1BA,uBAAuBA,CAAA,EAAS;IACpCjB,gBAAgB,CAAC,UAAAO,IAAI;MAAA,OAAIA,IAAI,CAACW,GAAG,CAAC,UAAAC,KAAK;QAAA,OAAAX,aAAA,CAAAA,aAAA,KAAUW,KAAK;UAAEL,IAAI,EAAE;QAAI;MAAA,CAAG,CAAC;IAAA,EAAC;IACvEV,cAAc,CAAC,CAAC,CAAC;EACnB,CAAC;EAED,IAAMgB,kBAAkB,GAAG,SAArBA,kBAAkBA,CAAA,EAAS;IAC/BpB,gBAAgB,CAAC,EAAE,CAAC;IACpBI,cAAc,CAAC,CAAC,CAAC;EACnB,CAAC;EAED,IAAMiB,UAAU,GAAG,SAAbA,UAAUA,CAAI7D,GAAG,EAAE8D,OAAO,EAAK;IACnC1B,QAAQ,CAAC,UAAA2B,SAAS;MAAA,OAChBA,SAAS,CAACL,GAAG,CAAC,UAAAM,IAAI;QAAA,OAChBA,IAAI,CAAChE,GAAG,KAAKA,GAAG,GAAAgD,aAAA,CAAAA,aAAA,KACPgB,IAAI,GAAKF,OAAO,IACrBE,IAAI;MAAA,CACV,CAAC;IAAA,CACH,CAAC;IAGD,IAAIF,OAAO,CAACxC,MAAM,KAAK,UAAU,IAAIwC,OAAO,CAACxC,MAAM,KAAK,UAAU,EAAE;MAClE,IAAM0C,KAAI,GAAG7C,KAAK,CAAC8C,IAAI,CAAC,UAAAC,CAAC;QAAA,OAAIA,CAAC,CAAClE,GAAG,KAAKA,GAAG;MAAA,EAAC;MAC3C6C,eAAe,CAAC;QACd7C,GAAG,EAAHA,GAAG;QACHmE,UAAU,EAAEH,KAAI,CAAC/D,IAAI;QACrBmE,IAAI,EAAE,eAAe;QACrB9C,MAAM,EAAEwC,OAAO,CAACxC,MAAM;QACtB+C,OAAO,+BAA6BL,KAAI,CAAC/D,IAAI,kBAAa6D,OAAO,CAACxC,MAAM,CAACgD,WAAW,CAAC,CAAC;MACxF,CAAC,CAAC;IACJ;EACF,CAAC;EAED,IAAMC,gBAAgB,GAAG,SAAnBA,gBAAgBA,CAAIvE,GAAG,EAAEwE,SAAS,EAAK;IAC3C,IAAMR,IAAI,GAAG7C,KAAK,CAAC8C,IAAI,CAAC,UAAAC,CAAC;MAAA,OAAIA,CAAC,CAAClE,GAAG,KAAKA,GAAG;IAAA,EAAC;IAC3CoC,QAAQ,CAAC,UAAA2B,SAAS;MAAA,OAChBA,SAAS,CAACL,GAAG,CAAC,UAAAM,IAAI,EAAI;QACpB,IAAIA,IAAI,CAAChE,GAAG,KAAKA,GAAG,EAAE;UACpB,IAAMyE,cAAc,GAAAjB,kBAAA,CAAOQ,IAAI,CAAC7C,KAAK,CAACK,WAAW,CAAC;UAClD,IAAMkD,kBAAkB,GAAGD,cAAc,CAACE,SAAS,CACjD,UAACX,IAAI,EAAEY,CAAC,EAAEC,GAAG;YAAA,OACb,IAAI3B,IAAI,CAACc,IAAI,CAACvC,WAAW,CAAC,CAACqD,OAAO,CAAC,CAAC,KACpCC,IAAI,CAACC,GAAG,CAAAC,KAAA,CAARF,IAAI,EAAAvB,kBAAA,CAAQqB,GAAG,CAACnB,GAAG,CAAC,UAAAQ,CAAC;cAAA,OAAI,IAAIhB,IAAI,CAACgB,CAAC,CAACzC,WAAW,CAAC,CAACqD,OAAO,CAAC,CAAC;YAAA,EAAC,EAAC;UAAA,CAC9D,CAAC;UAED,IAAIJ,kBAAkB,KAAK,CAAC,CAAC,EAAE;YAC7BD,cAAc,CAACC,kBAAkB,CAAC,GAAA1B,aAAA,CAAAA,aAAA,KAC7ByB,cAAc,CAACC,kBAAkB,CAAC;cACrCrD,MAAM,EAAEmD;YAAS,EAClB;UACH;UAEA,OAAAxB,aAAA,CAAAA,aAAA,KACKgB,IAAI;YACP7C,KAAK,EAAA6B,aAAA,CAAAA,aAAA,KACAgB,IAAI,CAAC7C,KAAK;cACbK,WAAW,EAAEiD;YAAc;UAC5B;QAEL;QACA,OAAOT,IAAI;MACb,CAAC,CAAC;IAAA,CACJ,CAAC;EACH,CAAC;EAGD,IAAIA,IAAI,EAAE;IACRnB,eAAe,CAAC;MACd7C,GAAG,EAAHA,GAAG;MACHmE,UAAU,EAAEH,IAAI,CAAC/D,IAAI;MACrBmE,IAAI,EAAE,eAAe;MACrB/C,MAAM,EAAEmD,SAAS;MACjBH,OAAO,8BAA4BL,IAAI,CAAC/D,IAAI,mCAAyBuE,SAAS,CAACU,cAAc,CAAC,CAAC;IACjG,CAAC,CAAC;EACJ;EAEA,OACEtF,IAAA,CAACC,WAAW,CAACsF,QAAQ;IAACC,KAAK,EAAE;MAC3BjE,KAAK,EAALA,KAAK;MACL0C,UAAU,EAAVA,UAAU;MACVU,gBAAgB,EAAhBA,gBAAgB;MAChBhC,aAAa,EAAbA,aAAa;MACbI,WAAW,EAAXA,WAAW;MACXc,uBAAuB,EAAvBA,uBAAuB;MACvBG,kBAAkB,EAAlBA;IACF,CAAE;IAAA5B,QAAA,EACCA;EAAQ,CACW,CAAC;AAE3B;AAEA,OAAO,SAASqD,OAAOA,CAAA,EAAG;EACxB,IAAMC,OAAO,GAAG5F,UAAU,CAACG,WAAW,CAAC;EACvC,IAAI,CAACyF,OAAO,EAAE;IACZ,MAAM,IAAIC,KAAK,CAAC,4CAA4C,CAAC;EAC/D;EACA,OAAOD,OAAO;AAChB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}